import{j as n}from"./JWTStore.C8Ly8kZn.js";import{w as r}from"./index.A4FuD42y.js";const a=r(null),e="http://localhost:3000/api";function s(){window.location.href=`${e}/auth/login`}function u(){n.clearToken(),a.set(null),window.location.href=`${e}/auth/logout`}async function l(){try{console.log("Fetching user data from backend...");const t=await fetch(`${e}/auth/profile`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok){if(t.status===401)return console.log("User is not authenticated. Redirecting to login..."),s(),null;throw new Error(`Failed to fetch user data: ${t.statusText}`)}const o=await t.json();return console.log("User data received:",o),a.set(o),o}catch(t){return console.error("Error getting user data:",t),null}}async function h(){await l()}export{s as a,l as g,h,u as l,a as u};
