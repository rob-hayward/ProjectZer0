import{s as $,e as W,b as L,t as I,y as X,d as N,f as O,p as q,j as A,h as U,i as c,q as p,k as C,l as T,z as S,r as B,T as se,m as F,n as Z,w as ee,U as oe,J as re,V as z,v as ne,W as ie}from"../chunks/scheduler.CHpejKh9.js";import{S as te,i as le,t as D,a as M,c as ae,b as ue,d as fe,m as de,e as ce,g as pe}from"../chunks/index.DkR5ShKl.js";import{g as V}from"../chunks/entry.C6B3fOkw.js";import{g as he}from"../chunks/auth0.Dq7QKDNG.js";import{f as H}from"../chunks/api.D3fHdpjr.js";const me=!0,R=me;function G(n){let e,l="Definition (optional):",r,s,a,f,v="Discussion:",m,h,u,_,k,E,j,y,P=n[7]?"Creating Word Node...":"Create Word Node",b,w,o;return{c(){e=W("label"),e.textContent=l,r=L(),s=W("textarea"),a=L(),f=W("label"),f.textContent=v,m=L(),h=W("textarea"),u=L(),_=W("label"),k=W("input"),E=I(`
      Would you like to be publicly credited for the creation of this node?`),j=L(),y=W("button"),b=I(P),this.h()},l(t){e=N(t,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1pr6agd"&&(e.textContent=l),r=A(t),s=N(t,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),O(s).forEach(c),a=A(t),f=N(t,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(f)!=="svelte-s3ahi0"&&(f.textContent=v),m=A(t),h=N(t,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),O(h).forEach(c),u=A(t),_=N(t,"LABEL",{class:!0});var i=O(_);k=N(i,"INPUT",{type:!0}),E=U(i,`
      Would you like to be publicly credited for the creation of this node?`),i.forEach(c),j=A(t),y=N(t,"BUTTON",{type:!0,class:!0});var d=O(y);b=U(d,P),d.forEach(c),this.h()},h(){p(e,"for","definition"),p(e,"class","svelte-n0md7j"),p(s,"id","definition"),p(s,"placeholder","Enter your definition of this word within the context of its use in ProjectZer0. If you do not provide a definition, a placeholder definition will be automatically generated from Free Online Dictionary."),s.disabled=n[7],p(s,"class","svelte-n0md7j"),p(f,"for","discussion"),p(f,"class","svelte-n0md7j"),p(h,"id","discussion"),p(h,"placeholder","Would you like to start a discussion around this word and its definition? If so, please kick off the discussion by adding your creator comment here."),h.disabled=n[7],p(h,"class","svelte-n0md7j"),p(k,"type","checkbox"),k.disabled=n[7],p(_,"class","svelte-n0md7j"),p(y,"type","submit"),y.disabled=n[7],p(y,"class","svelte-n0md7j")},m(t,i){C(t,e,i),C(t,r,i),C(t,s,i),S(s,n[1]),C(t,a,i),C(t,f,i),C(t,m,i),C(t,h,i),S(h,n[2]),C(t,u,i),C(t,_,i),T(_,k),k.checked=n[3],T(_,E),C(t,j,i),C(t,y,i),T(y,b),w||(o=[B(s,"input",n[12]),B(h,"input",n[13]),B(k,"change",n[14])],w=!0)},p(t,i){i&128&&(s.disabled=t[7]),i&2&&S(s,t[1]),i&128&&(h.disabled=t[7]),i&4&&S(h,t[2]),i&128&&(k.disabled=t[7]),i&8&&(k.checked=t[3]),i&128&&P!==(P=t[7]?"Creating Word Node...":"Create Word Node")&&F(b,P),i&128&&(y.disabled=t[7])},d(t){t&&(c(e),c(r),c(s),c(a),c(f),c(m),c(h),c(u),c(_),c(j),c(y)),w=!1,ee(o)}}}function K(n){let e,l;return{c(){e=W("p"),l=I(n[4]),this.h()},l(r){e=N(r,"P",{class:!0});var s=O(e);l=U(s,n[4]),s.forEach(c),this.h()},h(){p(e,"class","error svelte-n0md7j")},m(r,s){C(r,e,s),T(e,l)},p(r,s){s&16&&F(l,r[4])},d(r){r&&c(e)}}}function _e(n){let e,l,r="Word:",s,a,f,v,m,h=n[6]?"Checking...":"Check word existence",u,_,k,E,j,y,P,b=n[5]===!1&&G(n),w=n[4]&&K(n);return{c(){e=W("form"),l=W("label"),l.textContent=r,s=L(),a=W("input"),v=L(),m=W("button"),u=I(h),k=L(),b&&b.c(),E=L(),w&&w.c(),j=X(),this.h()},l(o){e=N(o,"FORM",{class:!0});var t=O(e);l=N(t,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(l)!=="svelte-1vghm3s"&&(l.textContent=r),s=A(t),a=N(t,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),v=A(t),m=N(t,"BUTTON",{type:!0,class:!0});var i=O(m);u=U(i,h),i.forEach(c),k=A(t),b&&b.l(t),t.forEach(c),E=A(o),w&&w.l(o),j=X(),this.h()},h(){p(l,"for","word"),p(l,"class","svelte-n0md7j"),p(a,"type","text"),p(a,"id","word"),p(a,"placeholder","Enter the keyword you believe to be important for use in ProjectZer0"),a.disabled=f=n[5]!==null||n[7],p(a,"class","svelte-n0md7j"),p(m,"type","button"),m.disabled=_=n[6]||n[5]!==null||n[7],p(m,"class","svelte-n0md7j"),p(e,"class","svelte-n0md7j")},m(o,t){C(o,e,t),T(e,l),T(e,s),T(e,a),S(a,n[0]),T(e,v),T(e,m),T(m,u),T(e,k),b&&b.m(e,null),C(o,E,t),w&&w.m(o,t),C(o,j,t),y||(P=[B(a,"input",n[11]),B(m,"click",n[8]),B(e,"submit",se(n[9]))],y=!0)},p(o,[t]){t&160&&f!==(f=o[5]!==null||o[7])&&(a.disabled=f),t&1&&a.value!==o[0]&&S(a,o[0]),t&64&&h!==(h=o[6]?"Checking...":"Check word existence")&&F(u,h),t&224&&_!==(_=o[6]||o[5]!==null||o[7])&&(m.disabled=_),o[5]===!1?b?b.p(o,t):(b=G(o),b.c(),b.m(e,null)):b&&(b.d(1),b=null),o[4]?w?w.p(o,t):(w=K(o),w.c(),w.m(j.parentNode,j)):w&&(w.d(1),w=null)},i:Z,o:Z,d(o){o&&(c(e),c(E),c(j)),b&&b.d(),w&&w.d(o),y=!1,ee(P)}}}function be(n,e,l){let{user:r}=e,s="",a="",f="",v=!1,m=null,h=null,u=!1,_=!1;const k=oe();async function E(){if(!s.trim()){l(4,m="Please enter a word");return}l(6,u=!0),l(4,m=null);try{R&&console.log("Checking word existence for:",s);const o=await H(`/nodes/word/check/${encodeURIComponent(s.trim())}`);R&&console.log("Word existence check response:",o),l(5,h=o.exists),h&&k("wordExists",{word:s.trim()})}catch(o){console.error("Error checking word existence:",o),l(4,m=o instanceof Error?o.message:"Failed to check word existence")}finally{l(6,u=!1)}}async function j(){if(!s.trim()){l(4,m="Please enter a word");return}l(7,_=!0),l(4,m=null);try{R&&console.log("Submitting word creation form:",{word:s,definition:a,discussion:f,publicCredit:v});const o=await H("/nodes/word",{method:"POST",body:JSON.stringify({word:s.trim(),definition:a,discussion:f,publicCredit:v,createdBy:r==null?void 0:r.sub})});R&&console.log("Word creation response:",o),k("nodeCreated",{success:!0,message:`Word node "${o.word}" created successfully`,data:o}),V(`/nodes/word/${encodeURIComponent(o.word.toLowerCase())}`),l(0,s=""),l(1,a=""),l(2,f=""),l(3,v=!1),l(5,h=null)}catch(o){console.error("Error creating word:",o),l(4,m=o instanceof Error?o.message:"Failed to create new word node"),k("nodeCreated",{success:!1,message:m})}finally{l(7,_=!1)}}function y(){s=this.value,l(0,s)}function P(){a=this.value,l(1,a)}function b(){f=this.value,l(2,f)}function w(){v=this.checked,l(3,v)}return n.$$set=o=>{"user"in o&&l(10,r=o.user)},[s,a,f,v,m,h,u,_,E,j,r,y,P,b,w]}class we extends te{constructor(e){super(),le(this,e,be,_e,$,{user:10})}}function Q(n){let e,l;return{c(){e=W("p"),l=I(n[2]),this.h()},l(r){e=N(r,"P",{class:!0});var s=O(e);l=U(s,n[2]),s.forEach(c),this.h()},h(){p(e,"class","error svelte-vvq35s")},m(r,s){C(r,e,s),T(e,l)},p(r,s){s&4&&F(l,r[2])},d(r){r&&c(e)}}}function Y(n){let e,l;return{c(){e=W("p"),l=I(n[3]),this.h()},l(r){e=N(r,"P",{class:!0});var s=O(e);l=U(s,n[3]),s.forEach(c),this.h()},h(){p(e,"class","success svelte-vvq35s")},m(r,s){C(r,e,s),T(e,l)},p(r,s){s&8&&F(l,r[3])},d(r){r&&c(e)}}}function x(n){let e,l;return e=new we({props:{user:n[0]}}),e.$on("nodeCreated",n[4]),e.$on("wordExists",n[5]),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,s){de(e,r,s),l=!0},p(r,s){const a={};s&1&&(a.user=r[0]),e.$set(a)},i(r){l||(D(e.$$.fragment,r),l=!0)},o(r){M(e.$$.fragment,r),l=!1},d(r){ce(e,r)}}}function ve(n){let e,l="Create New Node",r,s,a,f,v,m="Select Node Type:",h,u,_,k="Select a node type",E,j="Word",y,P,b,w,o=n[2]&&Q(n),t=n[3]&&Y(n),i=n[1]==="word"&&x(n);return{c(){e=W("h1"),e.textContent=l,r=L(),o&&o.c(),s=L(),t&&t.c(),a=L(),f=W("div"),v=W("label"),v.textContent=m,h=L(),u=W("select"),_=W("option"),_.textContent=k,E=W("option"),E.textContent=j,y=L(),i&&i.c(),this.h()},l(d){e=N(d,"H1",{"data-svelte-h":!0}),q(e)!=="svelte-a91774"&&(e.textContent=l),r=A(d),o&&o.l(d),s=A(d),t&&t.l(d),a=A(d),f=N(d,"DIV",{class:!0});var g=O(f);v=N(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(v)!=="svelte-16fub45"&&(v.textContent=m),h=A(g),u=N(g,"SELECT",{id:!0,class:!0});var J=O(u);_=N(J,"OPTION",{"data-svelte-h":!0}),q(_)!=="svelte-1ylcgyf"&&(_.textContent=k),E=N(J,"OPTION",{"data-svelte-h":!0}),q(E)!=="svelte-183aq5q"&&(E.textContent=j),J.forEach(c),y=A(g),i&&i.l(g),g.forEach(c),this.h()},h(){p(v,"for","node-type"),p(v,"class","svelte-vvq35s"),_.__value="",S(_,_.__value),E.__value="word",S(E,E.__value),p(u,"id","node-type"),p(u,"class","svelte-vvq35s"),n[1]===void 0&&re(()=>n[6].call(u)),p(f,"class","create-node-form svelte-vvq35s")},m(d,g){C(d,e,g),C(d,r,g),o&&o.m(d,g),C(d,s,g),t&&t.m(d,g),C(d,a,g),C(d,f,g),T(f,v),T(f,h),T(f,u),T(u,_),T(u,E),z(u,n[1],!0),T(f,y),i&&i.m(f,null),P=!0,b||(w=B(u,"change",n[6]),b=!0)},p(d,[g]){d[2]?o?o.p(d,g):(o=Q(d),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),d[3]?t?t.p(d,g):(t=Y(d),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null),g&2&&z(u,d[1]),d[1]==="word"?i?(i.p(d,g),g&2&&D(i,1)):(i=x(d),i.c(),D(i,1),i.m(f,null)):i&&(pe(),M(i,1,1,()=>{i=null}),ae())},i(d){P||(D(i),P=!0)},o(d){M(i),P=!1},d(d){d&&(c(e),c(r),c(s),c(a),c(f)),o&&o.d(d),t&&t.d(d),i&&i.d(),b=!1,w()}}}function Ce(n,e,l){let r=null,s="",a=null,f=null;ne(async()=>{try{const u=await he();u?l(0,r=u):l(2,a="Failed to fetch user data")}catch{l(2,a="Failed to fetch user data")}});function v(u){u.detail.success?(l(3,f=u.detail.message),l(2,a=null),u.detail.data&&u.detail.data.id&&V(`/nodes/word/${u.detail.data.id}`)):(l(2,a=u.detail.message),l(3,f=null))}function m(u){V(`/nodes/word/${u.detail.word}`)}function h(){s=ie(this),l(1,s)}return[r,s,a,f,v,m,h]}class Ne extends te{constructor(e){super(),le(this,e,Ce,ve,$,{})}}export{Ne as component};
