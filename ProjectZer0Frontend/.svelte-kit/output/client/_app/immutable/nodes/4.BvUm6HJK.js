import{s as G,n as O,o as K,r as Q}from"../chunks/scheduler.DUa3pFyD.js";import{S as Y,i as Z,e as p,s as E,c as h,d as T,m as P,h as x,g as C,n as l,j as k,k as f,p as J,A,o as V}from"../chunks/index.BtLLPK58.js";import{j as $,h as ee,g as te,u as se}from"../chunks/auth0.DsDXFQ5O.js";import{g as W}from"../chunks/entry._RkA5kDJ.js";const le="http://localhost:3000/api";async function re(o,e={}){const s=$.getToken(),t={"Content-Type":"application/json",...e.headers};s&&(t.Authorization=`Bearer ${s}`);const u=await fetch(`${le}${o}`,{...e,headers:t,credentials:"include"});if(!u.ok)throw new Error(`API call failed: ${u.statusText}`);return u.json()}async function ae(o){try{console.log("Updating user profile...");const e=await re("/users/update-profile",{method:"POST",body:JSON.stringify(o)});return console.log("User profile updated:",e),e}catch(e){return console.error("Error updating user profile:",e),null}}function ne(o){let e,s="No user found. Please log in.";return{c(){e=p("p"),e.textContent=s},l(t){e=h(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-vdljjr"&&(e.textContent=s)},m(t,u){k(t,e,u)},p:O,d(t){t&&C(e)}}}function oe(o){let e,s,t,u="Preferred Username:",b,a,n,r,i,I="Email:",w,v,S,j,_,M="Mission Statement:",R,y,q,g,z="Save Profile",L,U,F,H,m=o[5]&&X();return{c(){e=p("form"),s=p("div"),t=p("label"),t.textContent=u,b=E(),a=p("input"),n=E(),r=p("div"),i=p("label"),i.textContent=I,w=E(),v=p("input"),S=E(),j=p("div"),_=p("label"),_.textContent=M,R=E(),y=p("textarea"),q=E(),g=p("button"),g.textContent=z,L=E(),m&&m.c(),U=J(),this.h()},l(c){e=h(c,"FORM",{});var d=T(e);s=h(d,"DIV",{class:!0});var D=T(s);t=h(D,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(t)!=="svelte-8dbq29"&&(t.textContent=u),b=x(D),a=h(D,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),D.forEach(C),n=x(d),r=h(d,"DIV",{class:!0});var N=T(r);i=h(N,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(i)!=="svelte-1flf0h4"&&(i.textContent=I),w=x(N),v=h(N,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),N.forEach(C),S=x(d),j=h(d,"DIV",{class:!0});var B=T(j);_=h(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(_)!=="svelte-1jgvm37"&&(_.textContent=M),R=x(B),y=h(B,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),T(y).forEach(C),B.forEach(C),q=x(d),g=h(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),P(g)!=="svelte-35p64j"&&(g.textContent=z),d.forEach(C),L=x(c),m&&m.l(c),U=J(),this.h()},h(){l(t,"for","preferred_username"),l(t,"class","svelte-ajh800"),l(a,"type","text"),l(a,"id","preferred_username"),l(a,"placeholder","Enter your preferred username"),l(a,"class","svelte-ajh800"),l(s,"class","form-group svelte-ajh800"),l(i,"for","email"),l(i,"class","svelte-ajh800"),l(v,"type","email"),l(v,"id","email"),l(v,"placeholder","Enter your email"),l(v,"class","svelte-ajh800"),l(r,"class","form-group svelte-ajh800"),l(_,"for","mission_statement"),l(_,"class","svelte-ajh800"),l(y,"id","mission_statement"),l(y,"placeholder","Enter your mission statement"),l(y,"rows","4"),l(y,"class","svelte-ajh800"),l(j,"class","form-group svelte-ajh800"),l(g,"type","submit"),l(g,"class","svelte-ajh800")},m(c,d){k(c,e,d),f(e,s),f(s,t),f(s,b),f(s,a),A(a,o[2]),f(e,n),f(e,r),f(r,i),f(r,w),f(r,v),A(v,o[3]),f(e,S),f(e,j),f(j,_),f(j,R),f(j,y),A(y,o[4]),f(e,q),f(e,g),k(c,L,d),m&&m.m(c,d),k(c,U,d),F||(H=[V(a,"input",o[7]),V(v,"input",o[8]),V(y,"input",o[9]),V(e,"submit",o[6])],F=!0)},p(c,d){d&4&&a.value!==c[2]&&A(a,c[2]),d&8&&v.value!==c[3]&&A(v,c[3]),d&16&&A(y,c[4]),c[5]?m||(m=X(),m.c(),m.m(U.parentNode,U)):m&&(m.d(1),m=null)},d(c){c&&(C(e),C(L),C(U)),m&&m.d(c),F=!1,Q(H)}}}function ie(o){let e,s="Loading...";return{c(){e=p("p"),e.textContent=s},l(t){e=h(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-qdsr2u"&&(e.textContent=s)},m(t,u){k(t,e,u)},p:O,d(t){t&&C(e)}}}function X(o){let e,s="Profile updated successfully! Redirecting to dashboard...";return{c(){e=p("div"),e.textContent=s,this.h()},l(t){e=h(t,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1c48do5"&&(e.textContent=s),this.h()},h(){l(e,"class","success-message svelte-ajh800")},m(t,u){k(t,e,u)},d(t){t&&C(e)}}}function ue(o){let e,s,t="Edit Profile",u;function b(r,i){return r[1]?ie:r[0]?oe:ne}let a=b(o),n=a(o);return{c(){e=p("div"),s=p("h1"),s.textContent=t,u=E(),n.c(),this.h()},l(r){e=h(r,"DIV",{class:!0});var i=T(e);s=h(i,"H1",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1o5ke4h"&&(s.textContent=t),u=x(i),n.l(i),i.forEach(C),this.h()},h(){l(s,"class","svelte-ajh800"),l(e,"class","container svelte-ajh800")},m(r,i){k(r,e,i),f(e,s),f(e,u),n.m(e,null)},p(r,[i]){a===(a=b(r))&&n?n.p(r,i):(n.d(1),n=a(r),n&&(n.c(),n.m(e,null)))},i:O,o:O,d(r){r&&C(e),n.d()}}}function ce(o,e,s){let t=null,u=!0,b="",a="",n="",r=!1;async function i(){await ee(),s(0,t=await te()),t?(s(2,b=t.preferred_username||""),s(3,a=t.email||""),s(4,n=t.mission_statement||"")):W("/"),s(1,u=!1)}async function I(j){if(j.preventDefault(),!!t)try{const _=await ae({sub:t.sub,preferred_username:b,email:a,mission_statement:n});_?(console.log("Profile updated:",_),se.set(_),s(5,r=!0),setTimeout(()=>{W("/dashboard")},2e3)):console.error("Failed to update profile: No data returned")}catch(_){console.error("Failed to update profile:",_)}}K(i);function w(){b=this.value,s(2,b)}function v(){a=this.value,s(3,a)}function S(){n=this.value,s(4,n)}return[t,u,b,a,n,r,I,w,v,S]}class me extends Y{constructor(e){super(),Z(this,e,ce,ue,G,{})}}export{me as component};
