import{s as G,e as d,b as x,d as p,f as S,p as P,j as E,i as b,q as l,k as U,l as f,n as B,v as K,y as J,z as A,r as q,w as Q}from"../chunks/scheduler.B8nqcW9H.js";import{S as Y,i as Z}from"../chunks/index.Bb0C942f.js";import{h as $,g as ee,u as te}from"../chunks/auth0.Bs0tMaqG.js";import{f as se}from"../chunks/api.Dyfb_DGk.js";import{g as W}from"../chunks/entry.D89jaJfG.js";async function le(i){try{console.log("Updating user profile...");const e=await se("/users/update-profile",{method:"POST",body:JSON.stringify(i)});return console.log("User profile updated:",e),e}catch(e){return console.error("Error updating user profile:",e),null}}function re(i){let e,s="No user found. Please log in.";return{c(){e=d("p"),e.textContent=s},l(t){e=p(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-vdljjr"&&(e.textContent=s)},m(t,h){U(t,e,h)},p:B,d(t){t&&b(e)}}}function ae(i){let e,s,t,h="Preferred Username:",C,a,n,r,o,D="Email:",T,_,w,g,v,R="Mission Statement:",O,y,F,j,z="Save Profile",I,k,M,H,m=i[5]&&X();return{c(){e=d("form"),s=d("div"),t=d("label"),t.textContent=h,C=x(),a=d("input"),n=x(),r=d("div"),o=d("label"),o.textContent=D,T=x(),_=d("input"),w=x(),g=d("div"),v=d("label"),v.textContent=R,O=x(),y=d("textarea"),F=x(),j=d("button"),j.textContent=z,I=x(),m&&m.c(),k=J(),this.h()},l(u){e=p(u,"FORM",{});var c=S(e);s=p(c,"DIV",{class:!0});var L=S(s);t=p(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(t)!=="svelte-8dbq29"&&(t.textContent=h),C=E(L),a=p(L,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),L.forEach(b),n=E(c),r=p(c,"DIV",{class:!0});var N=S(r);o=p(N,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(o)!=="svelte-1flf0h4"&&(o.textContent=D),T=E(N),_=p(N,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),N.forEach(b),w=E(c),g=p(c,"DIV",{class:!0});var V=S(g);v=p(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(v)!=="svelte-1jgvm37"&&(v.textContent=R),O=E(V),y=p(V,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),S(y).forEach(b),V.forEach(b),F=E(c),j=p(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),P(j)!=="svelte-35p64j"&&(j.textContent=z),c.forEach(b),I=E(u),m&&m.l(u),k=J(),this.h()},h(){l(t,"for","preferred_username"),l(t,"class","svelte-ajh800"),l(a,"type","text"),l(a,"id","preferred_username"),l(a,"placeholder","Enter your preferred username"),l(a,"class","svelte-ajh800"),l(s,"class","form-group svelte-ajh800"),l(o,"for","email"),l(o,"class","svelte-ajh800"),l(_,"type","email"),l(_,"id","email"),l(_,"placeholder","Enter your email"),l(_,"class","svelte-ajh800"),l(r,"class","form-group svelte-ajh800"),l(v,"for","mission_statement"),l(v,"class","svelte-ajh800"),l(y,"id","mission_statement"),l(y,"placeholder","Enter your mission statement"),l(y,"rows","4"),l(y,"class","svelte-ajh800"),l(g,"class","form-group svelte-ajh800"),l(j,"type","submit"),l(j,"class","svelte-ajh800")},m(u,c){U(u,e,c),f(e,s),f(s,t),f(s,C),f(s,a),A(a,i[2]),f(e,n),f(e,r),f(r,o),f(r,T),f(r,_),A(_,i[3]),f(e,w),f(e,g),f(g,v),f(g,O),f(g,y),A(y,i[4]),f(e,F),f(e,j),U(u,I,c),m&&m.m(u,c),U(u,k,c),M||(H=[q(a,"input",i[7]),q(_,"input",i[8]),q(y,"input",i[9]),q(e,"submit",i[6])],M=!0)},p(u,c){c&4&&a.value!==u[2]&&A(a,u[2]),c&8&&_.value!==u[3]&&A(_,u[3]),c&16&&A(y,u[4]),u[5]?m||(m=X(),m.c(),m.m(k.parentNode,k)):m&&(m.d(1),m=null)},d(u){u&&(b(e),b(I),b(k)),m&&m.d(u),M=!1,Q(H)}}}function ne(i){let e,s="Loading...";return{c(){e=d("p"),e.textContent=s},l(t){e=p(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-qdsr2u"&&(e.textContent=s)},m(t,h){U(t,e,h)},p:B,d(t){t&&b(e)}}}function X(i){let e,s="Profile updated successfully! Redirecting to dashboard...";return{c(){e=d("div"),e.textContent=s,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1c48do5"&&(e.textContent=s),this.h()},h(){l(e,"class","success-message svelte-ajh800")},m(t,h){U(t,e,h)},d(t){t&&b(e)}}}function oe(i){let e,s,t="Edit Profile",h;function C(r,o){return r[1]?ne:r[0]?ae:re}let a=C(i),n=a(i);return{c(){e=d("div"),s=d("h1"),s.textContent=t,h=x(),n.c(),this.h()},l(r){e=p(r,"DIV",{class:!0});var o=S(e);s=p(o,"H1",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1o5ke4h"&&(s.textContent=t),h=E(o),n.l(o),o.forEach(b),this.h()},h(){l(s,"class","svelte-ajh800"),l(e,"class","container svelte-ajh800")},m(r,o){U(r,e,o),f(e,s),f(e,h),n.m(e,null)},p(r,[o]){a===(a=C(r))&&n?n.p(r,o):(n.d(1),n=a(r),n&&(n.c(),n.m(e,null)))},i:B,o:B,d(r){r&&b(e),n.d()}}}function ie(i,e,s){let t=null,h=!0,C="",a="",n="",r=!1;async function o(){await $(),s(0,t=await ee()),t?(s(2,C=t.preferred_username||""),s(3,a=t.email||""),s(4,n=t.mission_statement||"")):W("/"),s(1,h=!1)}async function D(g){if(g.preventDefault(),!!t)try{const v=await le({sub:t.sub,preferred_username:C,email:a,mission_statement:n});v?(console.log("Profile updated:",v),te.set(v),s(5,r=!0),setTimeout(()=>{W("/dashboard")},2e3)):console.error("Failed to update profile: No data returned")}catch(v){console.error("Failed to update profile:",v)}}K(o);function T(){C=this.value,s(2,C)}function _(){a=this.value,s(3,a)}function w(){n=this.value,s(4,n)}return[t,h,C,a,n,r,D,T,_,w]}class he extends Y{constructor(e){super(),Z(this,e,ie,oe,G,{})}}export{he as component};
