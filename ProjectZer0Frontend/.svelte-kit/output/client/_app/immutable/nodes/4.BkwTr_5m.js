import{s as z,n as B,o as H,r as J}from"../chunks/scheduler.DUa3pFyD.js";import{S as W,i as X,e as f,s as w,c as d,d as P,m as E,h as y,g as k,n as s,j as D,k as u,A as x,o as L}from"../chunks/index.BtLLPK58.js";import{j as G,h as K,g as Q,u as Y}from"../chunks/auth0.CGa5ZhUM.js";import{g as R}from"../chunks/entry.KsajuBdT.js";const Z="http://localhost:3000/api";async function $(i,e={}){const r=G.getToken(),t={"Content-Type":"application/json",...e.headers};r&&(t.Authorization=`Bearer ${r}`);const c=await fetch(`${Z}${i}`,{...e,headers:t,credentials:"include"});if(!c.ok)throw new Error(`API call failed: ${c.statusText}`);return c.json()}async function ee(i){try{console.log("Updating user profile...");const e=await $("/users/update-profile",{method:"POST",body:JSON.stringify(i)});return console.log("User profile updated:",e),e}catch(e){return console.error("Error updating user profile:",e),null}}function te(i){let e,r="No user found. Please log in.";return{c(){e=f("p"),e.textContent=r},l(t){e=d(t,"P",{"data-svelte-h":!0}),E(e)!=="svelte-vdljjr"&&(e.textContent=r)},m(t,c){D(t,e,c)},p:B,d(t){t&&k(e)}}}function re(i){let e,r,t,c="Preferred Username:",v,n,a,l,o,T="Email:",U,m,A,p,C,q="Mission Statement:",N,_,O,g,F="Save Profile",V,M;return{c(){e=f("form"),r=f("div"),t=f("label"),t.textContent=c,v=w(),n=f("input"),a=w(),l=f("div"),o=f("label"),o.textContent=T,U=w(),m=f("input"),A=w(),p=f("div"),C=f("label"),C.textContent=q,N=w(),_=f("textarea"),O=w(),g=f("button"),g.textContent=F,this.h()},l(b){e=d(b,"FORM",{});var h=P(e);r=d(h,"DIV",{class:!0});var j=P(r);t=d(j,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(t)!=="svelte-8dbq29"&&(t.textContent=c),v=y(j),n=d(j,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),j.forEach(k),a=y(h),l=d(h,"DIV",{class:!0});var S=P(l);o=d(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(o)!=="svelte-1flf0h4"&&(o.textContent=T),U=y(S),m=d(S,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),S.forEach(k),A=y(h),p=d(h,"DIV",{class:!0});var I=P(p);C=d(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(C)!=="svelte-1jgvm37"&&(C.textContent=q),N=y(I),_=d(I,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),P(_).forEach(k),I.forEach(k),O=y(h),g=d(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),E(g)!=="svelte-35p64j"&&(g.textContent=F),h.forEach(k),this.h()},h(){s(t,"for","preferred_username"),s(t,"class","svelte-8nkbw6"),s(n,"type","text"),s(n,"id","preferred_username"),s(n,"placeholder","Enter your preferred username"),s(n,"class","svelte-8nkbw6"),s(r,"class","form-group svelte-8nkbw6"),s(o,"for","email"),s(o,"class","svelte-8nkbw6"),s(m,"type","email"),s(m,"id","email"),s(m,"placeholder","Enter your email"),s(m,"class","svelte-8nkbw6"),s(l,"class","form-group svelte-8nkbw6"),s(C,"for","mission_statement"),s(C,"class","svelte-8nkbw6"),s(_,"id","mission_statement"),s(_,"placeholder","Enter your mission statement"),s(_,"rows","4"),s(_,"class","svelte-8nkbw6"),s(p,"class","form-group svelte-8nkbw6"),s(g,"type","submit"),s(g,"class","svelte-8nkbw6")},m(b,h){D(b,e,h),u(e,r),u(r,t),u(r,v),u(r,n),x(n,i[2]),u(e,a),u(e,l),u(l,o),u(l,U),u(l,m),x(m,i[3]),u(e,A),u(e,p),u(p,C),u(p,N),u(p,_),x(_,i[4]),u(e,O),u(e,g),V||(M=[L(n,"input",i[6]),L(m,"input",i[7]),L(_,"input",i[8]),L(e,"submit",i[5])],V=!0)},p(b,h){h&4&&n.value!==b[2]&&x(n,b[2]),h&8&&m.value!==b[3]&&x(m,b[3]),h&16&&x(_,b[4])},d(b){b&&k(e),V=!1,J(M)}}}function se(i){let e,r="Loading...";return{c(){e=f("p"),e.textContent=r},l(t){e=d(t,"P",{"data-svelte-h":!0}),E(e)!=="svelte-qdsr2u"&&(e.textContent=r)},m(t,c){D(t,e,c)},p:B,d(t){t&&k(e)}}}function le(i){let e,r,t="Edit Profile",c;function v(l,o){return l[1]?se:l[0]?re:te}let n=v(i),a=n(i);return{c(){e=f("div"),r=f("h1"),r.textContent=t,c=w(),a.c(),this.h()},l(l){e=d(l,"DIV",{class:!0});var o=P(e);r=d(o,"H1",{class:!0,"data-svelte-h":!0}),E(r)!=="svelte-1o5ke4h"&&(r.textContent=t),c=y(o),a.l(o),o.forEach(k),this.h()},h(){s(r,"class","svelte-8nkbw6"),s(e,"class","container svelte-8nkbw6")},m(l,o){D(l,e,o),u(e,r),u(e,c),a.m(e,null)},p(l,[o]){n===(n=v(l))&&a?a.p(l,o):(a.d(1),a=n(l),a&&(a.c(),a.m(e,null)))},i:B,o:B,d(l){l&&k(e),a.d()}}}function ne(i,e,r){let t=null,c=!0,v="",n="",a="";async function l(){await K(),r(0,t=await Q()),t?(r(2,v=t.preferred_username||""),r(3,n=t.email||""),r(4,a=t.mission_statement||"")):R("/"),r(1,c=!1)}async function o(A){if(A.preventDefault(),!!t)try{const p=await ee({sub:t.sub,preferred_username:v,email:n,mission_statement:a});p?(console.log("Profile updated:",p),Y.set(p),R("/dashboard")):console.error("Failed to update profile: No data returned")}catch(p){console.error("Failed to update profile:",p)}}H(l);function T(){v=this.value,r(2,v)}function U(){n=this.value,r(3,n)}function m(){a=this.value,r(4,a)}return[t,c,v,n,a,o,T,U,m]}class ce extends W{constructor(e){super(),X(this,e,ne,le,z,{})}}export{ce as component};
