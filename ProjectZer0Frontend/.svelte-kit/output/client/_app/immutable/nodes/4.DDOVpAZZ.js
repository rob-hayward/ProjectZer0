var ms=Object.defineProperty;var vs=(e,t,n)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>vs(e,typeof t!="symbol"?t+"":t,n);import{n as Re,r as jt,s as Ne,h as Co,j as ws,a as Ut,u as Gt,g as Wt,b as Yt,c as Xt,i as ti}from"../chunks/utils.JM6e9OV-.js";import{E as A,H as yi,j as Ae,e as J,t as V,s as he,F as R,a as E,G as bi,d as _,c as ee,b as z,f as de,l as f,m as ie,I as ys,J as ge,i as U,g as m,D as be,h as ce,K as rt,L as tr,M as Dr,o as tn,N as ni,p as Xe,C as Et,O as Le,P as mn,v as bs,Q as Ei,R as Es}from"../chunks/scheduler.DhRaDfhv.js";import{a as B,t as Y,S as Ie,i as xe,g as et,c as tt,b as se,d as ae,m as le,e as ue,f as vn}from"../chunks/index.d7ykBbfN.js";import{p as Ns}from"../chunks/stores.BvLLzeAt.js";import{C as G,a as Is,u as yn,h as xs,g as As,l as Ni}from"../chunks/colors.50HzwFd3.js";import{f as qe,g as Rs}from"../chunks/word.BLj9Y2VI.js";import{g as yt}from"../chunks/entry.B9Xi5JFP.js";import{w as Lo}from"../chunks/index.CmQ9bmmN.js";const Ss=!0,Fo=typeof window<"u";let Ii=Fo?()=>window.performance.now():()=>Date.now(),Vo=Fo?e=>requestAnimationFrame(e):Re;const Sn=new Set;function zo(e){Sn.forEach(t=>{t.c(e)||(Sn.delete(t),t.f())}),Sn.size!==0&&Vo(zo)}function Ts(e){let t;return Sn.size===0&&Vo(zo),{promise:new Promise(n=>{Sn.add(t={c:e,f:n})}),abort(){Sn.delete(t)}}}const Os=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Tt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ms(e,t){B(e,1,1,()=>{t.delete(e.key)})}function ks(e,t,n,r,i,o,s,l,a,u,h,g){let d=e.length,c=o.length,p=d;const w={};for(;p--;)w[e[p].key]=p;const b=[],v=new Map,y=new Map,N=[];for(p=c;p--;){const M=g(i,o,p),L=n(M);let X=s.get(L);X?N.push(()=>X.p(M,t)):(X=u(L,M),X.c()),v.set(L,b[p]=X),L in w&&y.set(L,Math.abs(p-w[L]))}const x=new Set,S=new Set;function I(M){Y(M,1),M.m(l,h),s.set(M.key,M),h=M.first,c--}for(;d&&c;){const M=b[c-1],L=e[d-1],X=M.key,C=L.key;M===L?(h=M.first,d--,c--):v.has(C)?!s.has(X)||x.has(X)?I(M):S.has(C)?d--:y.get(X)>y.get(C)?(S.add(X),I(M)):(x.add(C),d--):(a(L,s),d--)}for(;d--;){const M=e[d];v.has(M.key)||a(M,s)}for(;c;)I(b[c-1]);return jt(N),b}function Ds(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],l=t[o];if(l){for(const a in s)a in l||(r[a]=1);for(const a in l)i[a]||(n[a]=l[a],i[a]=1);e[o]=l}else for(const a in s)i[a]=1}for(const s in r)s in n||(n[s]=void 0);return n}function Ps(e){return typeof e=="object"&&e!==null?e:{}}const xi=Ss;async function Cs(){try{console.log("Fetching user activity...");const e=await qe("/users/activity");return console.log("Received activity data:",e),e}catch(e){return console.error("Error fetching user activity:",e),{nodesCreated:0,votesCast:0,commentsMade:0}}}const Ai=290,H={SIZES:{DASHBOARD:{size:600},WORD:{preview:135,detail:600},DEFINITION:{live:{preview:320,detail:600},alternative:{preview:320,detail:600}}},STROKE:{preview:{normal:3,hover:6},detail:{normal:2,hover:3}},PADDING:{preview:10,detail:40},LINE_HEIGHT:{preview:16,detail:24},EFFECTS:{glow:{normal:{blur:5,strength:.6,spread:2},hover:{blur:8,strength:.8,spread:3}}},COLORS:{DASHBOARD:{background:`${G.PRIMARY.BLUE}33`,border:`${G.PRIMARY.BLUE}FF`,text:`${G.PRIMARY.BLUE}FF`,hover:`${G.PRIMARY.BLUE}FF`,gradient:{start:`${G.PRIMARY.BLUE}66`,end:`${G.PRIMARY.BLUE}33`}},WORD:{background:`${G.PRIMARY.BLUE}33`,border:`${G.PRIMARY.BLUE}FF`,text:`${G.PRIMARY.BLUE}FF`,hover:`${G.PRIMARY.BLUE}FF`,gradient:{start:`${G.PRIMARY.BLUE}66`,end:`${G.PRIMARY.BLUE}33`}},DEFINITION:{live:{background:`${G.PRIMARY.BLUE}33`,border:`${G.PRIMARY.BLUE}FF`,text:`${G.PRIMARY.BLUE}FF`,hover:`${G.PRIMARY.BLUE}FF`,gradient:{start:`${G.PRIMARY.BLUE}66`,end:`${G.PRIMARY.BLUE}33`}},alternative:{background:`${G.PRIMARY.PURPLE}33`,border:`${G.PRIMARY.PURPLE}FF`,text:`${G.PRIMARY.PURPLE}FF`,hover:`${G.PRIMARY.PURPLE}FF`,gradient:{start:`${G.PRIMARY.PURPLE}66`,end:`${G.PRIMARY.PURPLE}33`}}}},FONTS:{title:{family:"Orbitron",size:"12px",weight:"500"},value:{family:"Orbitron",size:"14px",weight:"300"},hover:{family:"Orbitron",size:"10px",weight:"400"},word:{family:"Orbitron",size:"14px",weight:"500"}},SVG:{filters:{glow:{deviation:3,strength:.5},hover:{deviation:5,strength:.7}},animation:{duration:"0.3s",easing:"ease-out"}}};var Ls={value:()=>{}};function Pr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new br(n)}function br(e){this._=e}function Fs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}br.prototype=Pr.prototype={constructor:br,on:function(e,t){var n=this._,r=Fs(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Vs(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Ri(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ri(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new br(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Vs(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ri(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ls,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Br="http://www.w3.org/1999/xhtml";const Si={svg:"http://www.w3.org/2000/svg",xhtml:Br,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Si.hasOwnProperty(t)?{space:Si[t],local:e}:e}function zs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Br&&t.documentElement.namespaceURI===Br?t.createElement(e):t.createElementNS(n,e)}}function Us(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uo(e){var t=Cr(e);return(t.local?Us:zs)(t)}function Gs(){}function ri(e){return e==null?Gs:function(){return this.querySelector(e)}}function Ws(e){typeof e!="function"&&(e=ri(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,l=r[i]=new Array(s),a,u,h=0;h<s;++h)(a=o[h])&&(u=e.call(a,a.__data__,h,o))&&("__data__"in a&&(u.__data__=a.__data__),l[h]=u);return new nt(r,this._parents)}function Ys(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Bs(){return[]}function Go(e){return e==null?Bs:function(){return this.querySelectorAll(e)}}function Xs(e){return function(){return Ys(e.apply(this,arguments))}}function Hs(e){typeof e=="function"?e=Xs(e):e=Go(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new nt(r,i)}function Wo(e){return function(){return this.matches(e)}}function Yo(e){return function(t){return t.matches(e)}}var js=Array.prototype.find;function qs(e){return function(){return js.call(this.children,e)}}function $s(){return this.firstElementChild}function Zs(e){return this.select(e==null?$s:qs(typeof e=="function"?e:Yo(e)))}var Ks=Array.prototype.filter;function Qs(){return Array.from(this.children)}function Js(e){return function(){return Ks.call(this.children,e)}}function ea(e){return this.selectAll(e==null?Qs:Js(typeof e=="function"?e:Yo(e)))}function ta(e){typeof e!="function"&&(e=Wo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,l=r[i]=[],a,u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new nt(r,this._parents)}function Bo(e){return new Array(e.length)}function na(){return new nt(this._enter||this._groups.map(Bo),this._parents)}function xr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xr.prototype={constructor:xr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ra(e){return function(){return e}}function ia(e,t,n,r,i,o){for(var s=0,l,a=t.length,u=o.length;s<u;++s)(l=t[s])?(l.__data__=o[s],r[s]=l):n[s]=new xr(e,o[s]);for(;s<a;++s)(l=t[s])&&(i[s]=l)}function oa(e,t,n,r,i,o,s){var l,a,u=new Map,h=t.length,g=o.length,d=new Array(h),c;for(l=0;l<h;++l)(a=t[l])&&(d[l]=c=s.call(a,a.__data__,l,t)+"",u.has(c)?i[l]=a:u.set(c,a));for(l=0;l<g;++l)c=s.call(e,o[l],l,o)+"",(a=u.get(c))?(r[l]=a,a.__data__=o[l],u.delete(c)):n[l]=new xr(e,o[l]);for(l=0;l<h;++l)(a=t[l])&&u.get(d[l])===a&&(i[l]=a)}function sa(e){return e.__data__}function aa(e,t){if(!arguments.length)return Array.from(this,sa);var n=t?oa:ia,r=this._parents,i=this._groups;typeof e!="function"&&(e=ra(e));for(var o=i.length,s=new Array(o),l=new Array(o),a=new Array(o),u=0;u<o;++u){var h=r[u],g=i[u],d=g.length,c=la(e.call(h,h&&h.__data__,u,r)),p=c.length,w=l[u]=new Array(p),b=s[u]=new Array(p),v=a[u]=new Array(d);n(h,g,w,b,v,c,t);for(var y=0,N=0,x,S;y<p;++y)if(x=w[y]){for(y>=N&&(N=y+1);!(S=b[N])&&++N<p;);x._next=S||null}}return s=new nt(s,r),s._enter=l,s._exit=a,s}function la(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ua(){return new nt(this._exit||this._groups.map(Bo),this._parents)}function fa(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ca(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),l=new Array(i),a=0;a<s;++a)for(var u=n[a],h=r[a],g=u.length,d=l[a]=new Array(g),c,p=0;p<g;++p)(c=u[p]||h[p])&&(d[p]=c);for(;a<i;++a)l[a]=n[a];return new nt(l,this._parents)}function ha(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function da(e){e||(e=ga);function t(g,d){return g&&d?e(g.__data__,d.__data__):!g-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],l=s.length,a=i[o]=new Array(l),u,h=0;h<l;++h)(u=s[h])&&(a[h]=u);a.sort(t)}return new nt(i,this._parents).order()}function ga(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _a(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pa(){return Array.from(this)}function ma(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function va(){let e=0;for(const t of this)++e;return e}function wa(){return!this.node()}function ya(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,l;o<s;++o)(l=i[o])&&e.call(l,l.__data__,o,i);return this}function ba(e){return function(){this.removeAttribute(e)}}function Ea(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Na(e,t){return function(){this.setAttribute(e,t)}}function Ia(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Aa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ra(e,t){var n=Cr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ea:ba:typeof t=="function"?n.local?Aa:xa:n.local?Ia:Na)(n,t))}function Xo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Sa(e){return function(){this.style.removeProperty(e)}}function Ta(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Oa(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ma(e,t,n){return arguments.length>1?this.each((t==null?Sa:typeof t=="function"?Oa:Ta)(e,t,n??"")):Mn(this.node(),e)}function Mn(e,t){return e.style.getPropertyValue(t)||Xo(e).getComputedStyle(e,null).getPropertyValue(t)}function ka(e){return function(){delete this[e]}}function Da(e,t){return function(){this[e]=t}}function Pa(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ca(e,t){return arguments.length>1?this.each((t==null?ka:typeof t=="function"?Pa:Da)(e,t)):this.node()[e]}function Ho(e){return e.trim().split(/^|\s+/)}function ii(e){return e.classList||new jo(e)}function jo(e){this._node=e,this._names=Ho(e.getAttribute("class")||"")}jo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function qo(e,t){for(var n=ii(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function $o(e,t){for(var n=ii(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function La(e){return function(){qo(this,e)}}function Fa(e){return function(){$o(this,e)}}function Va(e,t){return function(){(t.apply(this,arguments)?qo:$o)(this,e)}}function za(e,t){var n=Ho(e+"");if(arguments.length<2){for(var r=ii(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Va:t?La:Fa)(n,t))}function Ua(){this.textContent=""}function Ga(e){return function(){this.textContent=e}}function Wa(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ya(e){return arguments.length?this.each(e==null?Ua:(typeof e=="function"?Wa:Ga)(e)):this.node().textContent}function Ba(){this.innerHTML=""}function Xa(e){return function(){this.innerHTML=e}}function Ha(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ja(e){return arguments.length?this.each(e==null?Ba:(typeof e=="function"?Ha:Xa)(e)):this.node().innerHTML}function qa(){this.nextSibling&&this.parentNode.appendChild(this)}function $a(){return this.each(qa)}function Za(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ka(){return this.each(Za)}function Qa(e){var t=typeof e=="function"?e:Uo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ja(){return null}function el(e,t){var n=typeof e=="function"?e:Uo(e),r=t==null?Ja:typeof t=="function"?t:ri(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tl(){var e=this.parentNode;e&&e.removeChild(this)}function nl(){return this.each(tl)}function rl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function il(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ol(e){return this.select(e?il:rl)}function sl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function al(e){return function(t){e.call(this,t,this.__data__)}}function ll(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ul(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function fl(e,t,n){return function(){var r=this.__on,i,o=al(t);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function cl(e,t,n){var r=ll(e+""),i,o=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,h;a<u;++a)for(i=0,h=l[a];i<o;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value}return}for(l=t?fl:ul,i=0;i<o;++i)this.each(l(r[i],t,n));return this}function Zo(e,t,n){var r=Xo(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function hl(e,t){return function(){return Zo(this,e,t)}}function dl(e,t){return function(){return Zo(this,e,t.apply(this,arguments))}}function gl(e,t){return this.each((typeof t=="function"?dl:hl)(e,t))}function*_l(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Ko=[null];function nt(e,t){this._groups=e,this._parents=t}function ar(){return new nt([[document.documentElement]],Ko)}function pl(){return this}nt.prototype=ar.prototype={constructor:nt,select:Ws,selectAll:Hs,selectChild:Zs,selectChildren:ea,filter:ta,data:aa,enter:na,exit:ua,join:fa,merge:ca,selection:pl,order:ha,sort:da,call:_a,nodes:pa,node:ma,size:va,empty:wa,each:ya,attr:Ra,style:Ma,property:Ca,classed:za,text:Ya,html:ja,raise:$a,lower:Ka,append:Qa,insert:el,remove:nl,clone:ol,datum:sl,on:cl,dispatch:gl,[Symbol.iterator]:_l};function ut(e){return typeof e=="string"?new nt([[document.querySelector(e)]],[document.documentElement]):new nt([[e]],Ko)}function ml(e){let t;for(;t=e.sourceEvent;)e=t;return e}function _n(e,t){if(e=ml(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Xr={capture:!0,passive:!1};function Hr(e){e.preventDefault(),e.stopImmediatePropagation()}function vl(e){var t=e.document.documentElement,n=ut(e).on("dragstart.drag",Hr,Xr);"onselectstart"in t?n.on("selectstart.drag",Hr,Xr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wl(e,t){var n=e.document.documentElement,r=ut(e).on("dragstart.drag",null);t&&(r.on("click.drag",Hr,Xr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function oi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lr(){}var rr=.7,Ar=1/rr,Tn="\\s*([+-]?\\d+)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yl=/^#([0-9a-f]{3,8})$/,bl=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),El=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),Nl=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${ir}\\)$`),Il=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${ir}\\)$`),xl=new RegExp(`^hsl\\(${ir},${Ot},${Ot}\\)$`),Al=new RegExp(`^hsla\\(${ir},${Ot},${Ot},${ir}\\)$`),Ti={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oi(lr,or,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Oi,formatHex:Oi,formatHex8:Rl,formatHsl:Sl,formatRgb:Mi,toString:Mi});function Oi(){return this.rgb().formatHex()}function Rl(){return this.rgb().formatHex8()}function Sl(){return Jo(this).formatHsl()}function Mi(){return this.rgb().formatRgb()}function or(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ki(t):n===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bl.exec(e))?new He(t[1],t[2],t[3],1):(t=El.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Nl.exec(e))?dr(t[1],t[2],t[3],t[4]):(t=Il.exec(e))?dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xl.exec(e))?Ci(t[1],t[2]/100,t[3]/100,1):(t=Al.exec(e))?Ci(t[1],t[2]/100,t[3]/100,t[4]):Ti.hasOwnProperty(e)?ki(Ti[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function ki(e){return new He(e>>16&255,e>>8&255,e&255,1)}function dr(e,t,n,r){return r<=0&&(e=t=n=NaN),new He(e,t,n,r)}function Tl(e){return e instanceof lr||(e=or(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function jr(e,t,n,r){return arguments.length===1?Tl(e):new He(e,t,n,r??1)}function He(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}oi(He,jr,Qo(lr,{brighter(e){return e=e==null?Ar:Math.pow(Ar,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rr:Math.pow(rr,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(wn(this.r),wn(this.g),wn(this.b),Rr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Di,formatHex:Di,formatHex8:Ol,formatRgb:Pi,toString:Pi}));function Di(){return`#${pn(this.r)}${pn(this.g)}${pn(this.b)}`}function Ol(){return`#${pn(this.r)}${pn(this.g)}${pn(this.b)}${pn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pi(){const e=Rr(this.opacity);return`${e===1?"rgb(":"rgba("}${wn(this.r)}, ${wn(this.g)}, ${wn(this.b)}${e===1?")":`, ${e})`}`}function Rr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pn(e){return e=wn(e),(e<16?"0":"")+e.toString(16)}function Ci(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bt(e,t,n,r)}function Jo(e){if(e instanceof bt)return new bt(e.h,e.s,e.l,e.opacity);if(e instanceof lr||(e=or(e)),!e)return new bt;if(e instanceof bt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,l=o-i,a=(o+i)/2;return l?(t===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-t)/l+2:s=(t-n)/l+4,l/=a<.5?o+i:2-o-i,s*=60):l=a>0&&a<1?0:s,new bt(s,l,a,e.opacity)}function Ml(e,t,n,r){return arguments.length===1?Jo(e):new bt(e,t,n,r??1)}function bt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oi(bt,Ml,Qo(lr,{brighter(e){return e=e==null?Ar:Math.pow(Ar,e),new bt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rr:Math.pow(rr,e),new bt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new He(Ur(e>=240?e-240:e+120,i,r),Ur(e,i,r),Ur(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new bt(Li(this.h),gr(this.s),gr(this.l),Rr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rr(this.opacity);return`${e===1?"hsl(":"hsla("}${Li(this.h)}, ${gr(this.s)*100}%, ${gr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Li(e){return e=(e||0)%360,e<0?e+360:e}function gr(e){return Math.max(0,Math.min(1,e||0))}function Ur(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const es=e=>()=>e;function kl(e,t){return function(n){return e+n*t}}function Dl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Pl(e){return(e=+e)==1?ts:function(t,n){return n-t?Dl(t,n,e):es(isNaN(t)?n:t)}}function ts(e,t){var n=t-e;return n?kl(e,n):es(isNaN(e)?t:e)}const Fi=function e(t){var n=Pl(t);function r(i,o){var s=n((i=jr(i)).r,(o=jr(o)).r),l=n(i.g,o.g),a=n(i.b,o.b),u=ts(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=l(h),i.b=a(h),i.opacity=u(h),i+""}}return r.gamma=e,r}(1);function Jt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gr=new RegExp(qr.source,"g");function Cl(e){return function(){return e}}function Ll(e){return function(t){return e(t)+""}}function Fl(e,t){var n=qr.lastIndex=Gr.lastIndex=0,r,i,o,s=-1,l=[],a=[];for(e=e+"",t=t+"";(r=qr.exec(e))&&(i=Gr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,a.push({i:s,x:Jt(r,i)})),n=Gr.lastIndex;return n<t.length&&(o=t.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?a[0]?Ll(a[0].x):Cl(t):(t=a.length,function(u){for(var h=0,g;h<t;++h)l[(g=a[h]).i]=g.x(u);return l.join("")})}var Vi=180/Math.PI,$r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ns(e,t,n,r,i,o){var s,l,a;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),e*r<t*n&&(e=-e,t=-t,a=-a,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Vi,skewX:Math.atan(a)*Vi,scaleX:s,scaleY:l}}var _r;function Vl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$r:ns(t.a,t.b,t.c,t.d,t.e,t.f)}function zl(e){return e==null||(_r||(_r=document.createElementNS("http://www.w3.org/2000/svg","g")),_r.setAttribute("transform",e),!(e=_r.transform.baseVal.consolidate()))?$r:(e=e.matrix,ns(e.a,e.b,e.c,e.d,e.e,e.f))}function rs(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,h,g,d,c,p){if(u!==g||h!==d){var w=c.push("translate(",null,t,null,n);p.push({i:w-4,x:Jt(u,g)},{i:w-2,x:Jt(h,d)})}else(g||d)&&c.push("translate("+g+t+d+n)}function s(u,h,g,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:g.push(i(g)+"rotate(",null,r)-2,x:Jt(u,h)})):h&&g.push(i(g)+"rotate("+h+r)}function l(u,h,g,d){u!==h?d.push({i:g.push(i(g)+"skewX(",null,r)-2,x:Jt(u,h)}):h&&g.push(i(g)+"skewX("+h+r)}function a(u,h,g,d,c,p){if(u!==g||h!==d){var w=c.push(i(c)+"scale(",null,",",null,")");p.push({i:w-4,x:Jt(u,g)},{i:w-2,x:Jt(h,d)})}else(g!==1||d!==1)&&c.push(i(c)+"scale("+g+","+d+")")}return function(u,h){var g=[],d=[];return u=e(u),h=e(h),o(u.translateX,u.translateY,h.translateX,h.translateY,g,d),s(u.rotate,h.rotate,g,d),l(u.skewX,h.skewX,g,d),a(u.scaleX,u.scaleY,h.scaleX,h.scaleY,g,d),u=h=null,function(c){for(var p=-1,w=d.length,b;++p<w;)g[(b=d[p]).i]=b.x(c);return g.join("")}}}var Ul=rs(Vl,"px, ","px)","deg)"),Gl=rs(zl,", ",")",")"),Wl=1e-12;function zi(e){return((e=Math.exp(e))+1/e)/2}function Yl(e){return((e=Math.exp(e))-1/e)/2}function Bl(e){return((e=Math.exp(2*e))-1)/(e+1)}const Xl=function e(t,n,r){function i(o,s){var l=o[0],a=o[1],u=o[2],h=s[0],g=s[1],d=s[2],c=h-l,p=g-a,w=c*c+p*p,b,v;if(w<Wl)v=Math.log(d/u)/t,b=function(M){return[l+M*c,a+M*p,u*Math.exp(t*M*v)]};else{var y=Math.sqrt(w),N=(d*d-u*u+r*w)/(2*u*n*y),x=(d*d-u*u-r*w)/(2*d*n*y),S=Math.log(Math.sqrt(N*N+1)-N),I=Math.log(Math.sqrt(x*x+1)-x);v=(I-S)/t,b=function(M){var L=M*v,X=zi(S),C=u/(n*y)*(X*Bl(t*L+S)-Yl(S));return[l+C*c,a+C*p,u*X/zi(t*L+S)]}}return b.duration=v*1e3*t/Math.SQRT2,b}return i.rho=function(o){var s=Math.max(.001,+o),l=s*s,a=l*l;return e(s,l,a)},i}(Math.SQRT2,2,4);var kn=0,Jn=0,Kn=0,is=1e3,Sr,er,Tr=0,bn=0,Lr=0,sr=typeof performance=="object"&&performance.now?performance:Date,os=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function si(){return bn||(os(Hl),bn=sr.now()+Lr)}function Hl(){bn=0}function Or(){this._call=this._time=this._next=null}Or.prototype=ai.prototype={constructor:Or,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?si():+n)+(t==null?0:+t),!this._next&&er!==this&&(er?er._next=this:Sr=this,er=this),this._call=e,this._time=n,Zr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zr())}};function ai(e,t,n){var r=new Or;return r.restart(e,t,n),r}function jl(){si(),++kn;for(var e=Sr,t;e;)(t=bn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kn}function Ui(){bn=(Tr=sr.now())+Lr,kn=Jn=0;try{jl()}finally{kn=0,$l(),bn=0}}function ql(){var e=sr.now(),t=e-Tr;t>is&&(Lr-=t,Tr=e)}function $l(){for(var e,t=Sr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Sr=n);er=e,Zr(r)}function Zr(e){if(!kn){Jn&&(Jn=clearTimeout(Jn));var t=e-bn;t>24?(e<1/0&&(Jn=setTimeout(Ui,e-sr.now()-Lr)),Kn&&(Kn=clearInterval(Kn))):(Kn||(Tr=sr.now(),Kn=setInterval(ql,is)),kn=1,os(Ui))}}function Gi(e,t,n){var r=new Or;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Zl=Pr("start","end","cancel","interrupt"),Kl=[],ss=0,Wi=1,Kr=2,Er=3,Yi=4,Qr=5,Nr=6;function Fr(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ql(e,n,{name:t,index:r,group:i,on:Zl,tween:Kl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ss})}function li(e,t){var n=It(e,t);if(n.state>ss)throw new Error("too late; already scheduled");return n}function Mt(e,t){var n=It(e,t);if(n.state>Er)throw new Error("too late; already running");return n}function It(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ql(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ai(o,0,n.time);function o(u){n.state=Wi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var h,g,d,c;if(n.state!==Wi)return a();for(h in r)if(c=r[h],c.name===n.name){if(c.state===Er)return Gi(s);c.state===Yi?(c.state=Nr,c.timer.stop(),c.on.call("interrupt",e,e.__data__,c.index,c.group),delete r[h]):+h<t&&(c.state=Nr,c.timer.stop(),c.on.call("cancel",e,e.__data__,c.index,c.group),delete r[h])}if(Gi(function(){n.state===Er&&(n.state=Yi,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Kr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Kr){for(n.state=Er,i=new Array(d=n.tween.length),h=0,g=-1;h<d;++h)(c=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++g]=c);i.length=g+1}}function l(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Qr,1),g=-1,d=i.length;++g<d;)i[g].call(e,h);n.state===Qr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Nr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ir(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Kr&&r.state<Qr,r.state=Nr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Jl(e){return this.each(function(){Ir(this,e)})}function eu(e,t){var n,r;return function(){var i=Mt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,l=r.length;s<l;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function tu(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Mt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var l={name:t,value:n},a=0,u=i.length;a<u;++a)if(i[a].name===t){i[a]=l;break}a===u&&i.push(l)}o.tween=i}}function nu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=It(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?eu:tu)(n,e,t))}function ui(e,t,n){var r=e._id;return e.each(function(){var i=Mt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return It(i,r).value[t]}}function as(e,t){var n;return(typeof t=="number"?Jt:t instanceof or?Fi:(n=or(t))?(t=n,Fi):Fl)(e,t)}function ru(e){return function(){this.removeAttribute(e)}}function iu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ou(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function su(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function au(e,t,n){var r,i,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=l+"",s===a?null:s===r&&a===i?o:(i=a,o=t(r=s,l)))}}function lu(e,t,n){var r,i,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=l+"",s===a?null:s===r&&a===i?o:(i=a,o=t(r=s,l)))}}function uu(e,t){var n=Cr(e),r=n==="transform"?Gl:as;return this.attrTween(e,typeof t=="function"?(n.local?lu:au)(n,r,ui(this,"attr."+e,t)):t==null?(n.local?iu:ru)(n):(n.local?su:ou)(n,r,t))}function fu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hu(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&cu(e,o)),n}return i._value=t,i}function du(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&fu(e,o)),n}return i._value=t,i}function gu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Cr(e);return this.tween(n,(r.local?hu:du)(r,t))}function _u(e,t){return function(){li(this,e).delay=+t.apply(this,arguments)}}function pu(e,t){return t=+t,function(){li(this,e).delay=t}}function mu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_u:pu)(t,e)):It(this.node(),t).delay}function vu(e,t){return function(){Mt(this,e).duration=+t.apply(this,arguments)}}function wu(e,t){return t=+t,function(){Mt(this,e).duration=t}}function yu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vu:wu)(t,e)):It(this.node(),t).duration}function bu(e,t){if(typeof t!="function")throw new Error;return function(){Mt(this,e).ease=t}}function Eu(e){var t=this._id;return arguments.length?this.each(bu(t,e)):It(this.node(),t).ease}function Nu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Mt(this,e).ease=n}}function Iu(e){if(typeof e!="function")throw new Error;return this.each(Nu(this._id,e))}function xu(e){typeof e!="function"&&(e=Wo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,l=r[i]=[],a,u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new Ht(r,this._parents,this._name,this._id)}function Au(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var a=t[l],u=n[l],h=a.length,g=s[l]=new Array(h),d,c=0;c<h;++c)(d=a[c]||u[c])&&(g[c]=d);for(;l<r;++l)s[l]=t[l];return new Ht(s,this._parents,this._name,this._id)}function Ru(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Su(e,t,n){var r,i,o=Ru(t)?li:Mt;return function(){var s=o(this,e),l=s.on;l!==r&&(i=(r=l).copy()).on(t,n),s.on=i}}function Tu(e,t){var n=this._id;return arguments.length<2?It(this.node(),n).on.on(e):this.each(Su(n,e,t))}function Ou(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Mu(){return this.on("end.remove",Ou(this._id))}function ku(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ri(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l=r[s],a=l.length,u=o[s]=new Array(a),h,g,d=0;d<a;++d)(h=l[d])&&(g=e.call(h,h.__data__,d,l))&&("__data__"in h&&(g.__data__=h.__data__),u[d]=g,Fr(u[d],t,n,d,u,It(h,n)));return new Ht(o,this._parents,t,n)}function Du(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Go(e));for(var r=this._groups,i=r.length,o=[],s=[],l=0;l<i;++l)for(var a=r[l],u=a.length,h,g=0;g<u;++g)if(h=a[g]){for(var d=e.call(h,h.__data__,g,a),c,p=It(h,n),w=0,b=d.length;w<b;++w)(c=d[w])&&Fr(c,t,n,w,d,p);o.push(d),s.push(h)}return new Ht(o,s,t,n)}var Pu=ar.prototype.constructor;function Cu(){return new Pu(this._groups,this._parents)}function Lu(e,t){var n,r,i;return function(){var o=Mn(this,e),s=(this.style.removeProperty(e),Mn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ls(e){return function(){this.style.removeProperty(e)}}function Fu(e,t,n){var r,i=n+"",o;return function(){var s=Mn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Vu(e,t,n){var r,i,o;return function(){var s=Mn(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),Mn(this,e))),s===a?null:s===r&&a===i?o:(i=a,o=t(r=s,l))}}function zu(e,t){var n,r,i,o="style."+t,s="end."+o,l;return function(){var a=Mt(this,e),u=a.on,h=a.value[o]==null?l||(l=ls(t)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(s,i=h),a.on=r}}function Uu(e,t,n){var r=(e+="")=="transform"?Ul:as;return t==null?this.styleTween(e,Lu(e,r)).on("end.style."+e,ls(e)):typeof t=="function"?this.styleTween(e,Vu(e,r,ui(this,"style."+e,t))).each(zu(this._id,e)):this.styleTween(e,Fu(e,r,t),n).on("end.style."+e,null)}function Gu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Wu(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Gu(e,s,n)),r}return o._value=t,o}function Yu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Wu(e,t,n??""))}function Bu(e){return function(){this.textContent=e}}function Xu(e){return function(){var t=e(this);this.textContent=t??""}}function Hu(e){return this.tween("text",typeof e=="function"?Xu(ui(this,"text",e)):Bu(e==null?"":e+""))}function ju(e){return function(t){this.textContent=e.call(this,t)}}function qu(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ju(i)),t}return r._value=e,r}function $u(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qu(e))}function Zu(){for(var e=this._name,t=this._id,n=us(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var h=It(a,t);Fr(a,e,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ht(r,this._parents,e,n)}function Ku(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var l={value:s},a={value:function(){--i===0&&o()}};n.each(function(){var u=Mt(this,r),h=u.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),u.on=t}),i===0&&o()})}var Qu=0;function Ht(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function us(){return++Qu}var Ft=ar.prototype;Ht.prototype={constructor:Ht,select:ku,selectAll:Du,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:xu,merge:Au,selection:Cu,transition:Zu,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:Tu,attr:uu,attrTween:gu,style:Uu,styleTween:Yu,text:Hu,textTween:$u,remove:Mu,tween:nu,delay:mu,duration:yu,ease:Eu,easeVarying:Iu,end:Ku,[Symbol.iterator]:Ft[Symbol.iterator]};function Ju(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ef={time:null,delay:0,duration:250,ease:Ju};function tf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nf(e){var t,n;e instanceof Ht?(t=e._id,e=e._name):(t=us(),(n=ef).time=si(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&Fr(a,e,t,u,s,n||tf(a,t));return new Ht(r,this._parents,e,t)}ar.prototype.interrupt=Jl;ar.prototype.transition=nf;function rf(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,l,a=0,u=0;for(o=0;o<s;++o)l=n[o],a+=l.x,u+=l.y;for(a=(a/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)l=n[o],l.x-=a,l.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function of(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return fs(this.cover(t,n),t,n,e)}function fs(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},l=e._x0,a=e._y0,u=e._x1,h=e._y1,g,d,c,p,w,b,v,y;if(!o)return e._root=s,e;for(;o.length;)if((w=t>=(g=(l+u)/2))?l=g:u=g,(b=n>=(d=(a+h)/2))?a=d:h=d,i=o,!(o=o[v=b<<1|w]))return i[v]=s,e;if(c=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===c&&n===p)return s.next=o,i?i[v]=s:e._root=s,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(w=t>=(g=(l+u)/2))?l=g:u=g,(b=n>=(d=(a+h)/2))?a=d:h=d;while((v=b<<1|w)===(y=(p>=d)<<1|c>=g));return i[y]=o,i[v]=s,e}function sf(e){var t,n,r=e.length,i,o,s=new Array(r),l=new Array(r),a=1/0,u=1/0,h=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,l[n]=o,i<a&&(a=i),i>h&&(h=i),o<u&&(u=o),o>g&&(g=o));if(a>h||u>g)return this;for(this.cover(a,u).cover(h,g),n=0;n<r;++n)fs(this,s[n],l[n],e[n]);return this}function af(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,l=this._root,a,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,a=new Array(4),a[u]=l,l=a,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function lf(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function uf(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ye(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function ff(e,t,n){var r,i=this._x0,o=this._y0,s,l,a,u,h=this._x1,g=this._y1,d=[],c=this._root,p,w;for(c&&d.push(new Ye(c,i,o,h,g)),n==null?n=1/0:(i=e-n,o=t-n,h=e+n,g=t+n,n*=n);p=d.pop();)if(!(!(c=p.node)||(s=p.x0)>h||(l=p.y0)>g||(a=p.x1)<i||(u=p.y1)<o))if(c.length){var b=(s+a)/2,v=(l+u)/2;d.push(new Ye(c[3],b,v,a,u),new Ye(c[2],s,v,b,u),new Ye(c[1],b,l,a,v),new Ye(c[0],s,l,b,v)),(w=(t>=v)<<1|e>=b)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-w],d[d.length-1-w]=p)}else{var y=e-+this._x.call(null,c.data),N=t-+this._y.call(null,c.data),x=y*y+N*N;if(x<n){var S=Math.sqrt(n=x);i=e-S,o=t-S,h=e+S,g=t+S,r=c.data}}return r}function cf(e){if(isNaN(h=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,l=this._y0,a=this._x1,u=this._y1,h,g,d,c,p,w,b,v;if(!n)return this;if(n.length)for(;;){if((p=h>=(d=(s+a)/2))?s=d:a=d,(w=g>=(c=(l+u)/2))?l=c:u=c,t=n,!(n=n[b=w<<1|p]))return this;if(!n.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(r=t,v=b)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[b]=o:delete t[b],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function hf(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function df(){return this._root}function gf(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function _f(e){var t=[],n,r=this._root,i,o,s,l,a;for(r&&t.push(new Ye(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,l=n.x1,a=n.y1)&&r.length){var u=(o+l)/2,h=(s+a)/2;(i=r[3])&&t.push(new Ye(i,u,h,l,a)),(i=r[2])&&t.push(new Ye(i,o,h,u,a)),(i=r[1])&&t.push(new Ye(i,u,s,l,h)),(i=r[0])&&t.push(new Ye(i,o,s,u,h))}return this}function pf(e){var t=[],n=[],r;for(this._root&&t.push(new Ye(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,l=r.y0,a=r.x1,u=r.y1,h=(s+a)/2,g=(l+u)/2;(o=i[0])&&t.push(new Ye(o,s,l,h,g)),(o=i[1])&&t.push(new Ye(o,h,l,a,g)),(o=i[2])&&t.push(new Ye(o,s,g,h,u)),(o=i[3])&&t.push(new Ye(o,h,g,a,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function mf(e){return e[0]}function vf(e){return arguments.length?(this._x=e,this):this._x}function wf(e){return e[1]}function yf(e){return arguments.length?(this._y=e,this):this._y}function fi(e,t,n){var r=new ci(t??mf,n??wf,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function ci(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Bi(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Be=fi.prototype=ci.prototype;Be.copy=function(){var e=new ci(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Bi(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Bi(r));return e};Be.add=of;Be.addAll=sf;Be.cover=af;Be.data=lf;Be.extent=uf;Be.find=ff;Be.remove=cf;Be.removeAll=hf;Be.root=df;Be.size=gf;Be.visit=_f;Be.visitAfter=pf;Be.x=vf;Be.y=yf;function Nt(e){return function(){return e}}function en(e){return(e()-.5)*1e-6}function bf(e){return e.x+e.vx}function Ef(e){return e.y+e.vy}function Xi(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Nt(e==null?1:+e));function s(){for(var u,h=t.length,g,d,c,p,w,b,v=0;v<o;++v)for(g=fi(t,bf,Ef).visitAfter(l),u=0;u<h;++u)d=t[u],w=n[d.index],b=w*w,c=d.x+d.vx,p=d.y+d.vy,g.visit(y);function y(N,x,S,I,M){var L=N.data,X=N.r,C=w+X;if(L){if(L.index>d.index){var F=c-L.x-L.vx,$=p-L.y-L.vy,re=F*F+$*$;re<C*C&&(F===0&&(F=en(r),re+=F*F),$===0&&($=en(r),re+=$*$),re=(C-(re=Math.sqrt(re)))/re*i,d.vx+=(F*=re)*(C=(X*=X)/(b+X)),d.vy+=($*=re)*C,L.vx-=F*(C=1-C),L.vy-=$*C)}return}return x>c+C||I<c-C||S>p+C||M<p-C}}function l(u){if(u.data)return u.r=n[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function a(){if(t){var u,h=t.length,g;for(n=new Array(h),u=0;u<h;++u)g=t[u],n[g.index]=+e(g,u,t)}}return s.initialize=function(u,h){t=u,r=h,a()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Nt(+u),a(),s):e},s}function Nf(e){return e.index}function Hi(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function If(e){var t=Nf,n=g,r,i=Nt(30),o,s,l,a,u,h=1;e==null&&(e=[]);function g(b){return 1/Math.min(l[b.source.index],l[b.target.index])}function d(b){for(var v=0,y=e.length;v<h;++v)for(var N=0,x,S,I,M,L,X,C;N<y;++N)x=e[N],S=x.source,I=x.target,M=I.x+I.vx-S.x-S.vx||en(u),L=I.y+I.vy-S.y-S.vy||en(u),X=Math.sqrt(M*M+L*L),X=(X-o[N])/X*b*r[N],M*=X,L*=X,I.vx-=M*(C=a[N]),I.vy-=L*C,S.vx+=M*(C=1-C),S.vy+=L*C}function c(){if(s){var b,v=s.length,y=e.length,N=new Map(s.map((S,I)=>[t(S,I,s),S])),x;for(b=0,l=new Array(v);b<y;++b)x=e[b],x.index=b,typeof x.source!="object"&&(x.source=Hi(N,x.source)),typeof x.target!="object"&&(x.target=Hi(N,x.target)),l[x.source.index]=(l[x.source.index]||0)+1,l[x.target.index]=(l[x.target.index]||0)+1;for(b=0,a=new Array(y);b<y;++b)x=e[b],a[b]=l[x.source.index]/(l[x.source.index]+l[x.target.index]);r=new Array(y),p(),o=new Array(y),w()}}function p(){if(s)for(var b=0,v=e.length;b<v;++b)r[b]=+n(e[b],b,e)}function w(){if(s)for(var b=0,v=e.length;b<v;++b)o[b]=+i(e[b],b,e)}return d.initialize=function(b,v){s=b,u=v,c()},d.links=function(b){return arguments.length?(e=b,c(),d):e},d.id=function(b){return arguments.length?(t=b,d):t},d.iterations=function(b){return arguments.length?(h=+b,d):h},d.strength=function(b){return arguments.length?(n=typeof b=="function"?b:Nt(+b),p(),d):n},d.distance=function(b){return arguments.length?(i=typeof b=="function"?b:Nt(+b),w(),d):i},d}const xf=1664525,Af=1013904223,ji=4294967296;function Rf(){let e=1;return()=>(e=(xf*e+Af)%ji)/ji}function Sf(e){return e.x}function Tf(e){return e.y}var Of=10,Mf=Math.PI*(3-Math.sqrt(5));function kf(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,l=new Map,a=ai(g),u=Pr("tick","end"),h=Rf();e==null&&(e=[]);function g(){d(),u.call("tick",t),n<r&&(a.stop(),u.call("end",t))}function d(w){var b,v=e.length,y;w===void 0&&(w=1);for(var N=0;N<w;++N)for(n+=(o-n)*i,l.forEach(function(x){x(n)}),b=0;b<v;++b)y=e[b],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return t}function c(){for(var w=0,b=e.length,v;w<b;++w){if(v=e[w],v.index=w,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=Of*Math.sqrt(.5+w),N=w*Mf;v.x=y*Math.cos(N),v.y=y*Math.sin(N)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(w){return w.initialize&&w.initialize(e,h),w}return c(),t={tick:d,restart:function(){return a.restart(g),t},stop:function(){return a.stop(),t},nodes:function(w){return arguments.length?(e=w,c(),l.forEach(p),t):e},alpha:function(w){return arguments.length?(n=+w,t):n},alphaMin:function(w){return arguments.length?(r=+w,t):r},alphaDecay:function(w){return arguments.length?(i=+w,t):+i},alphaTarget:function(w){return arguments.length?(o=+w,t):o},velocityDecay:function(w){return arguments.length?(s=1-w,t):1-s},randomSource:function(w){return arguments.length?(h=w,l.forEach(p),t):h},force:function(w,b){return arguments.length>1?(b==null?l.delete(w):l.set(w,p(b)),t):l.get(w)},find:function(w,b,v){var y=0,N=e.length,x,S,I,M,L;for(v==null?v=1/0:v*=v,y=0;y<N;++y)M=e[y],x=w-M.x,S=b-M.y,I=x*x+S*S,I<v&&(L=M,v=I);return L},on:function(w,b){return arguments.length>1?(u.on(w,b),t):u.on(w)}}}function Df(){var e,t,n,r,i=Nt(-30),o,s=1,l=1/0,a=.81;function u(c){var p,w=e.length,b=fi(e,Sf,Tf).visitAfter(g);for(r=c,p=0;p<w;++p)t=e[p],b.visit(d)}function h(){if(e){var c,p=e.length,w;for(o=new Array(p),c=0;c<p;++c)w=e[c],o[w.index]=+i(w,c,e)}}function g(c){var p=0,w,b,v=0,y,N,x;if(c.length){for(y=N=x=0;x<4;++x)(w=c[x])&&(b=Math.abs(w.value))&&(p+=w.value,v+=b,y+=b*w.x,N+=b*w.y);c.x=y/v,c.y=N/v}else{w=c,w.x=w.data.x,w.y=w.data.y;do p+=o[w.data.index];while(w=w.next)}c.value=p}function d(c,p,w,b){if(!c.value)return!0;var v=c.x-t.x,y=c.y-t.y,N=b-p,x=v*v+y*y;if(N*N/a<x)return x<l&&(v===0&&(v=en(n),x+=v*v),y===0&&(y=en(n),x+=y*y),x<s&&(x=Math.sqrt(s*x)),t.vx+=v*c.value*r/x,t.vy+=y*c.value*r/x),!0;if(c.length||x>=l)return;(c.data!==t||c.next)&&(v===0&&(v=en(n),x+=v*v),y===0&&(y=en(n),x+=y*y),x<s&&(x=Math.sqrt(s*x)));do c.data!==t&&(N=o[c.data.index]*r/x,t.vx+=v*N,t.vy+=y*N);while(c=c.next)}return u.initialize=function(c,p){e=c,n=p,h()},u.strength=function(c){return arguments.length?(i=typeof c=="function"?c:Nt(+c),h(),u):i},u.distanceMin=function(c){return arguments.length?(s=c*c,u):Math.sqrt(s)},u.distanceMax=function(c){return arguments.length?(l=c*c,u):Math.sqrt(l)},u.theta=function(c){return arguments.length?(a=c*c,u):Math.sqrt(a)},u}function Pf(e,t,n){var r,i=Nt(.1),o,s;typeof e!="function"&&(e=Nt(+e)),t==null&&(t=0),n==null&&(n=0);function l(u){for(var h=0,g=r.length;h<g;++h){var d=r[h],c=d.x-t||1e-6,p=d.y-n||1e-6,w=Math.sqrt(c*c+p*p),b=(s[h]-w)*o[h]*u/w;d.vx+=c*b,d.vy+=p*b}}function a(){if(r){var u,h=r.length;for(o=new Array(h),s=new Array(h),u=0;u<h;++u)s[u]=+e(r[u],u,r),o[u]=isNaN(s[u])?0:+i(r[u],u,r)}}return l.initialize=function(u){r=u,a()},l.strength=function(u){return arguments.length?(i=typeof u=="function"?u:Nt(+u),a(),l):i},l.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Nt(+u),a(),l):e},l.x=function(u){return arguments.length?(t=+u,l):t},l.y=function(u){return arguments.length?(n=+u,l):n},l}const pr=e=>()=>e;function Cf(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Bt(e,t,n){this.k=e,this.x=t,this.y=n}Bt.prototype={constructor:Bt,scale:function(e){return e===1?this:new Bt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Bt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mr=new Bt(1,0,0);Bt.prototype;function Wr(e){e.stopImmediatePropagation()}function Qn(e){e.preventDefault(),e.stopImmediatePropagation()}function Lf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ff(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function qi(){return this.__zoom||Mr}function Vf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function zf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uf(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Gf(){var e=Lf,t=Ff,n=Uf,r=Vf,i=zf,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=Xl,u=Pr("start","zoom","end"),h,g,d,c=500,p=150,w=0,b=10;function v(O){O.property("__zoom",qi).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",C).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(O,k,T,D){var P=O.selection?O.selection():O;P.property("__zoom",qi),O!==P?S(O,k,T,D):P.interrupt().each(function(){I(this,arguments).event(D).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},v.scaleBy=function(O,k,T,D){v.scaleTo(O,function(){var P=this.__zoom.k,W=typeof k=="function"?k.apply(this,arguments):k;return P*W},T,D)},v.scaleTo=function(O,k,T,D){v.transform(O,function(){var P=t.apply(this,arguments),W=this.__zoom,j=T==null?x(P):typeof T=="function"?T.apply(this,arguments):T,Q=W.invert(j),ne=typeof k=="function"?k.apply(this,arguments):k;return n(N(y(W,ne),j,Q),P,s)},T,D)},v.translateBy=function(O,k,T,D){v.transform(O,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),s)},null,D)},v.translateTo=function(O,k,T,D,P){v.transform(O,function(){var W=t.apply(this,arguments),j=this.__zoom,Q=D==null?x(W):typeof D=="function"?D.apply(this,arguments):D;return n(Mr.translate(Q[0],Q[1]).scale(j.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),W,s)},D,P)};function y(O,k){return k=Math.max(o[0],Math.min(o[1],k)),k===O.k?O:new Bt(k,O.x,O.y)}function N(O,k,T){var D=k[0]-T[0]*O.k,P=k[1]-T[1]*O.k;return D===O.x&&P===O.y?O:new Bt(O.k,D,P)}function x(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function S(O,k,T,D){O.on("start.zoom",function(){I(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(D).end()}).tween("zoom",function(){var P=this,W=arguments,j=I(P,W).event(D),Q=t.apply(P,W),ne=T==null?x(Q):typeof T=="function"?T.apply(P,W):T,_e=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),pe=P.__zoom,we=typeof k=="function"?k.apply(P,W):k,me=a(pe.invert(ne).concat(_e/pe.k),we.invert(ne).concat(_e/we.k));return function(ve){if(ve===1)ve=we;else{var Te=me(ve),Se=_e/Te[2];ve=new Bt(Se,ne[0]-Te[0]*Se,ne[1]-Te[1]*Se)}j.zoom(null,ve)}})}function I(O,k,T){return!T&&O.__zooming||new M(O,k)}function M(O,k){this.that=O,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,k),this.taps=0}M.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,k){return this.mouse&&O!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var k=ut(this.that).datum();u.call(O,this.that,new Cf(O,{sourceEvent:this.sourceEvent,target:v,type:O,transform:this.that.__zoom,dispatch:u}),k)}};function L(O,...k){if(!e.apply(this,arguments))return;var T=I(this,k).event(O),D=this.__zoom,P=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,r.apply(this,arguments)))),W=_n(O);if(T.wheel)(T.mouse[0][0]!==W[0]||T.mouse[0][1]!==W[1])&&(T.mouse[1]=D.invert(T.mouse[0]=W)),clearTimeout(T.wheel);else{if(D.k===P)return;T.mouse=[W,D.invert(W)],Ir(this),T.start()}Qn(O),T.wheel=setTimeout(j,p),T.zoom("mouse",n(N(y(D,P),T.mouse[0],T.mouse[1]),T.extent,s));function j(){T.wheel=null,T.end()}}function X(O,...k){if(d||!e.apply(this,arguments))return;var T=O.currentTarget,D=I(this,k,!0).event(O),P=ut(O.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",_e,!0),W=_n(O,T),j=O.clientX,Q=O.clientY;vl(O.view),Wr(O),D.mouse=[W,this.__zoom.invert(W)],Ir(this),D.start();function ne(pe){if(Qn(pe),!D.moved){var we=pe.clientX-j,me=pe.clientY-Q;D.moved=we*we+me*me>w}D.event(pe).zoom("mouse",n(N(D.that.__zoom,D.mouse[0]=_n(pe,T),D.mouse[1]),D.extent,s))}function _e(pe){P.on("mousemove.zoom mouseup.zoom",null),wl(pe.view,D.moved),Qn(pe),D.event(pe).end()}}function C(O,...k){if(e.apply(this,arguments)){var T=this.__zoom,D=_n(O.changedTouches?O.changedTouches[0]:O,this),P=T.invert(D),W=T.k*(O.shiftKey?.5:2),j=n(N(y(T,W),D,P),t.apply(this,k),s);Qn(O),l>0?ut(this).transition().duration(l).call(S,j,D,O):ut(this).call(v.transform,j,D,O)}}function F(O,...k){if(e.apply(this,arguments)){var T=O.touches,D=T.length,P=I(this,k,O.changedTouches.length===D).event(O),W,j,Q,ne;for(Wr(O),j=0;j<D;++j)Q=T[j],ne=_n(Q,this),ne=[ne,this.__zoom.invert(ne),Q.identifier],P.touch0?!P.touch1&&P.touch0[2]!==ne[2]&&(P.touch1=ne,P.taps=0):(P.touch0=ne,W=!0,P.taps=1+!!h);h&&(h=clearTimeout(h)),W&&(P.taps<2&&(g=ne[0],h=setTimeout(function(){h=null},c)),Ir(this),P.start())}}function $(O,...k){if(this.__zooming){var T=I(this,k).event(O),D=O.changedTouches,P=D.length,W,j,Q,ne;for(Qn(O),W=0;W<P;++W)j=D[W],Q=_n(j,this),T.touch0&&T.touch0[2]===j.identifier?T.touch0[0]=Q:T.touch1&&T.touch1[2]===j.identifier&&(T.touch1[0]=Q);if(j=T.that.__zoom,T.touch1){var _e=T.touch0[0],pe=T.touch0[1],we=T.touch1[0],me=T.touch1[1],ve=(ve=we[0]-_e[0])*ve+(ve=we[1]-_e[1])*ve,Te=(Te=me[0]-pe[0])*Te+(Te=me[1]-pe[1])*Te;j=y(j,Math.sqrt(ve/Te)),Q=[(_e[0]+we[0])/2,(_e[1]+we[1])/2],ne=[(pe[0]+me[0])/2,(pe[1]+me[1])/2]}else if(T.touch0)Q=T.touch0[0],ne=T.touch0[1];else return;T.zoom("touch",n(N(j,Q,ne),T.extent,s))}}function re(O,...k){if(this.__zooming){var T=I(this,k).event(O),D=O.changedTouches,P=D.length,W,j;for(Wr(O),d&&clearTimeout(d),d=setTimeout(function(){d=null},c),W=0;W<P;++W)j=D[W],T.touch0&&T.touch0[2]===j.identifier?delete T.touch0:T.touch1&&T.touch1[2]===j.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(j=_n(j,this),Math.hypot(g[0]-j[0],g[1]-j[1])<b)){var Q=ut(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return v.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:pr(+O),v):r},v.filter=function(O){return arguments.length?(e=typeof O=="function"?O:pr(!!O),v):e},v.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:pr(!!O),v):i},v.extent=function(O){return arguments.length?(t=typeof O=="function"?O:pr([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),v):t},v.scaleExtent=function(O){return arguments.length?(o[0]=+O[0],o[1]=+O[1],v):[o[0],o[1]]},v.translateExtent=function(O){return arguments.length?(s[0][0]=+O[0][0],s[1][0]=+O[1][0],s[0][1]=+O[0][1],s[1][1]=+O[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(O){return arguments.length?(n=O,v):n},v.duration=function(O){return arguments.length?(l=+O,v):l},v.interpolate=function(O){return arguments.length?(a=O,v):a},v.on=function(){var O=u.on.apply(u,arguments);return O===u?v:O},v.clickDistance=function(O){return arguments.length?(w=(O=+O)*O,v):Math.sqrt(w)},v.tapDistance=function(O){return arguments.length?(b=+O,v):b},v}const lt={RADIUS:{CENTER:0,DEFINITIONS:{PREVIEW:{SCALE:.6,SPACING:150,MIN_RADIUS:250,MAX_RADIUS:1500,VOTE_SCALE_FACTOR:.1},DETAIL:{SCALE:1.5,SPACING:550,MIN_RADIUS:600,MAX_RADIUS:2e3,VOTE_SCALE_FACTOR:.15}}},FORCES:{CHARGE:{WORD:-1e3,DEFINITION:{PREVIEW:-800,DETAIL:-2e3}},COLLISION:{STRENGTH:{NORMAL:1.5,DETAIL:2},PADDING:{NORMAL:75,DETAIL:400}},LINK:{STRENGTH:.5,DISTANCE:{PREVIEW:400,DETAIL:800,DETAIL_BONUS:200}},RADIAL:{STRENGTH:{PREVIEW:1,DETAIL:.7}}},NAVIGATION:{RADIUS:{DETAIL:355,PREVIEW:130},SPACING:{DETAIL:60,PREVIEW:45},STRENGTH:{RADIAL:2,COLLISION:1.5,CHARGE:-200}},SIMULATION:{VELOCITY_DECAY:.4,ALPHA_DECAY:.02,ITERATIONS:500,ALPHA_TARGET:{NORMAL:0,TRANSITIONING:.3}},EDGES:{WORD_TO_LIVE:{COLOR:G.PRIMARY.BLUE,OPACITY:.8},WORD_TO_ALTERNATIVE:{COLOR:G.PRIMARY.PURPLE,OPACITY:{NORMAL:.8,PREVIEW:.6}}},TRANSITIONS:{DURATION:750,EASING:"cubic-bezier(0.4, 0, 0.2, 1)"}};function nr(e){return typeof e=="number"?e:Wf(e)?e.low:0}function mr(e){if("positiveVotes"in e&&"negativeVotes"in e){const t=nr(e.positiveVotes),n=nr(e.negativeVotes);return t-n}return nr(e.votes)}function kr(e,t,n=!1){return n?"Anonymous":e==="FreeDictionaryAPI"?"Free Dictionary API":(t==null?void 0:t.preferred_username)||(t==null?void 0:t.name)||"User"}function Wf(e){return typeof e=="object"&&e!==null&&"low"in e&&typeof e.low=="number"}class Yf{constructor(t,n,r=!1,i){ke(this,"simulation");ke(this,"width");ke(this,"height");ke(this,"isPreviewMode");ke(this,"definitionNodeModes");ke(this,"nodeMap");ke(this,"logger",console);this.width=t,this.height=n,this.isPreviewMode=r,this.definitionNodeModes=i||new Map,this.nodeMap=new Map,this.simulation=this.initializeSimulation(),this.logger.debug("GraphLayout initialized",{width:t,height:n,isPreviewMode:r})}initializeSimulation(){return kf().velocityDecay(lt.SIMULATION.VELOCITY_DECAY).alphaDecay(lt.SIMULATION.ALPHA_DECAY).nodes([]).on("tick",()=>this.handleSimulationTick())}handleSimulationTick(){const t=this.simulation.nodes();this.logger.debug("Simulation tick",{timestamp:new Date().toISOString(),nodePositions:t.map(n=>({id:n.id,group:n.group,position:{x:n.x,y:n.y},velocity:{vx:n.vx,vy:n.vy},fixed:{fx:n.fx,fy:n.fy}}))}),t.forEach((n,r)=>{if(n.group==="central")return;const o=this.getNodeSize(n)*2;t.forEach((s,l)=>{if(r===l)return;const a=s.x-n.x,u=s.y-n.y,h=Math.sqrt(a*a+u*u);if(h<o){this.logger.debug("Enforcing minimum distance",{node1:{id:n.id,group:n.group},node2:{id:s.id,group:s.group},currentDistance:h,minRequired:o,adjustment:(o-h)/h});const g=(o-h)/h;n.x-=a*g*.5,n.y-=u*g*.5,s.group!=="central"&&(s.x+=a*g*.5,s.y+=u*g*.5)}})})}configureDashboardAndNavigationLayout(t){const n=t.filter(s=>s.group==="navigation"),r=t.find(s=>s.group==="central");if(!r){this.logger.warn("No center node found for navigation layout");return}r.fx=0,r.fy=0,r.x=0,r.y=0;const i=this.isPreviewMode?lt.NAVIGATION.RADIUS.PREVIEW:lt.NAVIGATION.RADIUS.DETAIL,o=this.isPreviewMode?lt.NAVIGATION.SPACING.PREVIEW:lt.NAVIGATION.SPACING.DETAIL;n.forEach((s,l)=>{const a=l/n.length*2*Math.PI-Math.PI/2,u=Math.cos(a)*i,h=Math.sin(a)*i;s.fx=u,s.fy=h,s.x=u,s.y=h}),this.simulation.force("collision",Xi().radius(o).strength(lt.NAVIGATION.STRENGTH.COLLISION).iterations(4)).force("center",rf(0,0))}getNodeVotes(t){return t.data?nr(t.data.positiveVotes)-nr(t.data.negativeVotes):0}getNodeSize(t){const n=this.definitionNodeModes.get(t.id)==="detail";let r;switch(t.group){case"central":r=H.SIZES.WORD.detail/2;break;case"live-definition":case"alternative-definition":r=n?H.SIZES.DEFINITION.alternative.detail/2:H.SIZES.DEFINITION.alternative.preview/2;break;default:r=0}const i=r*1.5;return this.logger.debug("Node size calculation",{nodeId:t.id,group:t.group,mode:n?"detail":"preview",baseSize:r,finalSize:i}),i}configureAlternativeDefinitionsLayout(t,n){const r=t.find(c=>c.group==="central");if(!r)return;r.fx=0,r.fy=0,r.x=0,r.y=0;const i=t.filter(c=>c.group!=="central"),o=150,s=new Map(i.map(c=>[c.id,this.getNodeVotes(c)])),l=Math.max(...s.values()),a=Math.min(...s.values()),u=l-a||1,h=Pf((c,p,w)=>{if(c.group==="central")return 0;const b=s.get(c.id)||0,v=lt.RADIUS.DEFINITIONS.PREVIEW,y=(b-a)/u,N=v.MAX_RADIUS-y*(v.MAX_RADIUS-v.MIN_RADIUS);return Math.max(v.MIN_RADIUS,N)},0,0).strength(.8),g=Xi().radius((c,p,w)=>{const b=this.getNodeSize(c);return Math.max(b,o/2)}).strength(1).iterations(100);if(n.length>0){const c=If(n).id(p=>p.id).distance(o*1.5).strength(.2);this.simulation.force("link",c)}const d=Df().strength((c,p,w)=>c.group==="central"?0:-2e3).distanceMax(o*3);this.simulation.force("radial",h).force("collision",g).force("charge",d).alpha(1).velocityDecay(.7).alphaDecay(.01);for(let c=0;c<lt.SIMULATION.ITERATIONS;++c)this.simulation.tick();this.logger.debug("Force configuration:",{nodes:t.map(c=>({id:c.id,group:c.group,votes:s.get(c.id),radius:h.radius()(c,0,t),collisionRadius:g.radius()(c,0,t)}))})}calculateNodeScale(t){return t.group==="central"?1:this.definitionNodeModes.get(t.id)==="detail"?lt.RADIUS.DEFINITIONS.DETAIL.SCALE:this.isPreviewMode?lt.RADIUS.DEFINITIONS.PREVIEW.SCALE:1}updatePreviewMode(t){this.isPreviewMode!==t&&(this.isPreviewMode=t,this.simulation.nodes().length>0&&this.simulation.alpha(1).alphaTarget(0).velocityDecay(.4).restart())}updateDefinitionModes(t){this.definitionNodeModes=t,this.simulation.nodes().length>0&&this.simulation.alpha(1).restart()}updateLayout(t){this.simulation.force("link",null).force("charge",null).force("collision",null).force("radial",null).force("center",null);const n=t.nodes,r=t.links||[];n.forEach(i=>{i.fx=void 0,i.fy=void 0,i.x=void 0,i.y=void 0}),this.simulation.nodes(n),n.length===1?this.configureSingleNodeLayout(n[0]):n.some(i=>i.group==="navigation")&&(this.configureDashboardAndNavigationLayout(n),n.some(i=>i.group==="live-definition"||i.group==="alternative-definition")&&this.configureAlternativeDefinitionsLayout(n,r)),this.simulation.alpha(1).restart();for(let i=0;i<lt.SIMULATION.ITERATIONS;++i)this.simulation.tick();return this.getNodePositions(n)}configureSingleNodeLayout(t){t.fx=0,t.fy=0,t.x=0,t.y=0}getNodePositions(t){return new Map(t.map(n=>[n.id,{x:n.x??0,y:n.y??0,scale:this.calculateNodeScale(n),svgTransform:`translate(${n.x??0}, ${n.y??0})`,angle:n.group==="navigation"?Math.atan2(n.y??0,n.x??0):void 0,distanceFromCenter:n.group==="navigation"?Math.sqrt(Math.pow(n.x??0,2)+Math.pow(n.y??0,2)):void 0}]))}resize(t,n){this.width=t,this.height=n;const r=this.simulation.force("center");r&&r.x(0).y(0)}stop(){this.simulation.stop()}}const $i={explore:G.PRIMARY.BLUE,"create-node":G.PRIMARY.YELLOW,network:G.PRIMARY.PURPLE,creations:G.PRIMARY.GREEN,interactions:G.PRIMARY.TURQUOISE,"edit-profile":G.PRIMARY.ORANGE,logout:G.PRIMARY.RED,dashboard:G.PRIMARY.BLUE,"alternative-definitions":G.PRIMARY.PURPLE,"create-alternative":G.PRIMARY.PURPLE,discuss:G.PRIMARY.TURQUOISE};function Bf(e){return $i[e]||$i.explore}function Xf(e){const t=`glow-${Math.random().toString(36).slice(2)}`;Math.floor(e.intensity*255).toString(16).padStart(2,"0"),Math.floor(e.intensity*1.5*255).toString(16).padStart(2,"0");const n=`
        <filter id="${t}" x="-100%" y="-100%" width="300%" height="300%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="${e.radius-20}" result="blur"/>
            <feFlood flood-color="${e.color}" flood-opacity="0" result="color"/>
            <feComposite in="color" in2="blur" operator="in" result="glow"/>
            <feMerge>
                <feMergeNode in="glow"/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
    `;return{id:t,element:n}}function Hf(e){const t=`glow-gradient-${Math.random().toString(36).slice(2)}`;Math.floor(e.intensity*255).toString(16).padStart(2,"0"),Math.floor(e.intensity*1.5*255).toString(16).padStart(2,"0");const n=`
            <stop offset="0%" stop-color="${e.color}" stop-opacity="0"/>
            <stop offset="70%" stop-color="${e.color}" stop-opacity="${e.intensity}"/>
            <stop offset="100%" stop-color="${e.color}" stop-opacity="${e.intensity*1.5}"/>
        `,r=`
        <radialGradient id="${t}" 
            cx="50%" cy="50%" 
            r="${e.radius}" 
            fx="50%" fy="50%"
            gradientUnits="userSpaceOnUse"
        >
            ${n}
        </radialGradient>
    `;return{id:t,element:r}}function Zi(e){let t,n,r,i;return{c(){t=A("line"),i=A("circle"),this.h()},l(o){t=R(o,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),E(t).forEach(_),i=R(o,"circle",{class:!0,r:!0,fill:!0,filter:!0}),E(i).forEach(_),this.h()},h(){f(t,"class","connection-line svelte-13p5e86"),f(t,"x1","0"),f(t,"y1","0"),f(t,"x2",n=-e[3]),f(t,"y2",r=-e[4]),f(t,"stroke",`${e[5]}50`),f(t,"stroke-width","1"),f(i,"class","glow svelte-13p5e86"),f(i,"r","25"),f(i,"fill",`url(#${e[8]})`),f(i,"filter",`url(#${e[6]})`)},m(o,s){U(o,t,s),U(o,i,s)},p(o,s){s&8&&n!==(n=-o[3])&&f(t,"x2",n),s&16&&r!==(r=-o[4])&&f(t,"y2",r)},d(o){o&&(_(t),_(i))}}}function Ki(e){let t,n=e[0].label+"",r;return{c(){t=A("text"),r=V(n),this.h()},l(i){t=R(i,"text",{class:!0,dy:!0});var o=E(t);r=z(o,n),o.forEach(_),this.h()},h(){f(t,"class","label svelte-13p5e86"),f(t,"dy","30"),ie(t,"fill",e[5])},m(i,o){U(i,t,o),m(t,r)},p(i,o){o&1&&n!==(n=i[0].label+"")&&ce(r,n)},d(i){i&&_(t)}}}function jf(e){let t,n,r,i,o,s,l,a,u=e[0].icon+"",h,g,d,c,p=e[2]&&Zi(e),w=[{class:"icon-wrapper"},{xmlns:"http://www.w3.org/1999/xhtml"}],b={};for(let y=0;y<w.length;y+=1)b=Co(b,w[y]);let v=e[2]&&Ki(e);return{c(){t=A("g"),n=A("defs"),r=new yi(!0),i=Ae(),o=new yi(!0),p&&p.c(),s=A("foreignObject"),l=J("div"),a=J("span"),h=V(u),g=he(),v&&v.c(),this.h()},l(y){t=R(y,"g",{class:!0,transform:!0});var N=E(t);n=R(N,"defs",{});var x=E(n);r=bi(x,!0),i=Ae(),o=bi(x,!0),x.forEach(_),p&&p.l(N),s=R(N,"foreignObject",{x:!0,y:!0,width:!0,height:!0,class:!0});var S=E(s);l=ee(S,"DIV",{class:!0});var I=E(l);a=ee(I,"SPAN",{class:!0});var M=E(a);h=z(M,u),M.forEach(_),g=de(I),I.forEach(_),S.forEach(_),v&&v.l(N),N.forEach(_),this.h()},h(){r.a=i,o.a=null,f(a,"class","material-symbols-outlined"),ie(a,"color",e[2]?e[5]:"white"),ys(l,b),ge(l,"svelte-13p5e86",!0),f(s,"x","-16"),f(s,"y","-16"),f(s,"width","32"),f(s,"height","32"),f(s,"class","icon-container svelte-13p5e86"),ie(s,"filter",e[2]?`url(#${e[6]})`:"none"),f(t,"class","navigation-node svelte-13p5e86"),f(t,"transform",e[1])},m(y,N){U(y,t,N),m(t,n),r.m(e[7],n),m(n,i),o.m(e[9],n),p&&p.m(t,null),m(t,s),m(s,l),m(l,a),m(a,h),m(l,g),v&&v.m(t,null),d||(c=[be(t,"mouseenter",e[11]),be(t,"mouseleave",e[12]),be(t,"click",e[13])],d=!0)},p(y,[N]){y[2]?p?p.p(y,N):(p=Zi(y),p.c(),p.m(t,s)):p&&(p.d(1),p=null),N&1&&u!==(u=y[0].icon+"")&&ce(h,u),N&4&&ie(a,"color",y[2]?y[5]:"white"),ge(l,"svelte-13p5e86",!0),N&4&&ie(s,"filter",y[2]?`url(#${y[6]})`:"none"),y[2]?v?v.p(y,N):(v=Ki(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null),N&2&&f(t,"transform",y[1])},i:Re,o:Re,d(y){y&&_(t),p&&p.d(),v&&v.d(),d=!1,jt(c)}}}function qf(e,t,n){rt();let{option:r}=t,{transform:i}=t,{isHovered:o=!1}=t;const s=Bf(r.id),l={color:s,radius:10,intensity:.1,fade:!0},{id:a,element:u}=Xf(l),{id:h,element:g}=Hf(l);let d=[],c=0,p=0;function w(y){tr.call(this,e,y)}function b(y){tr.call(this,e,y)}function v(y){tr.call(this,e,y)}return e.$$set=y=>{"option"in y&&n(0,r=y.option),"transform"in y&&n(1,i=y.transform),"isHovered"in y&&n(2,o=y.isHovered)},e.$$.update=()=>{if(e.$$.dirty&1026){const y=i.match(/translate\(([-\d.e+-]+),\s*([-\d.e+-]+)\)/);y?(n(10,d=[parseFloat(y[1]),parseFloat(y[2])]),n(3,[c,p]=d,c,(n(4,p),n(1,i),n(10,d)))):(n(10,d=[0,0]),n(3,[c,p]=d,c,(n(4,p),n(1,i),n(10,d))))}},[r,i,o,c,p,s,a,u,h,g,d,w,b,v]}class $f extends Ie{constructor(t){super(),xe(this,t,qf,jf,Ne,{option:0,transform:1,isHovered:2})}}function Zf(e){return e.type==="dashboard"}function Kf(e){return e.type==="edit-profile"}function Qf(e){return e.type==="create-node"}function Jf(e){return e.type==="navigation"}function ec(e){return e.type==="word"}function tc(e){return e.type==="definition"}function nc(){const{subscribe:e,set:t}=Lo(null);function n(i,o){if(console.log("WordStore: Updating URL with:",{word:i,view:o}),i){const s=`/graph/${o}?word=${encodeURIComponent(i)}`,a=new URL(window.location.href).searchParams.get("word");if(console.log("WordStore: URL check:",{newUrl:s,currentWord:a,word:i,needsUpdate:a!==i}),a!==i)try{const u={word:i};window.history.replaceState(u,"",s),console.log("WordStore: URL updated successfully via history API")}catch(u){console.error("WordStore: Error updating URL:",u)}else console.log("WordStore: URL already correct")}}let r=null;return{subscribe:e,set:(i,o="word")=>{console.log("WordStore: Setting word data:",{wordData:i,view:o,currentWordId:r,newWordId:i==null?void 0:i.id,currentUrl:window.location.href}),t(i),i?(setTimeout(()=>{n(i.word,o)},0),r=i.id):r=null},reset:()=>{console.log("WordStore: Resetting word data"),r=null,t(null)},getCurrentWord:()=>{let i=null;return e(o=>{i=o})(),i}}}const On=nc(),te={DASHBOARD:"dashboard",CREATE_NODE:"create-node",EDIT_PROFILE:"edit-profile",EXPLORE:"explore",NETWORK:"network",INTERACTIONS:"interactions",CREATIONS:"creations",LOGOUT:"logout",ALTERNATIVE_DEFINITIONS:"alternative-definitions",CREATE_ALTERNATIVE:"create-alternative",DISCUSS:"discuss"};function Yr(e){const t=ws(On);if(t){const n=`${e}?word=${encodeURIComponent(t.word)}`;yt(n,{replaceState:!0,keepFocus:!0})}}const rc={[te.DASHBOARD]:()=>yt("/graph/dashboard"),[te.CREATE_NODE]:()=>yt("/graph/create-node"),[te.EDIT_PROFILE]:()=>yt("/graph/edit-profile"),[te.EXPLORE]:()=>yt("/explore"),[te.NETWORK]:()=>yt("/network"),[te.INTERACTIONS]:()=>yt("/interactions"),[te.CREATIONS]:()=>yt("/creations"),[te.LOGOUT]:()=>Is(),[te.ALTERNATIVE_DEFINITIONS]:()=>Yr("/graph/alternative-definitions"),[te.CREATE_ALTERNATIVE]:()=>Yr("/graph/create-alternative"),[te.DISCUSS]:()=>Yr("/graph/discuss")},zt={DASHBOARD:"dashboard",CREATE_NODE:"create-node",EXPLORE:"explore",WORD:"word",EDIT_PROFILE:"edit-profile"},ic={[te.EXPLORE]:"Language",[te.CREATE_NODE]:"add_circle",[te.NETWORK]:"network_node",[te.LOGOUT]:"logout",[te.EDIT_PROFILE]:"settings",[te.INTERACTIONS]:"compare_arrows",[te.CREATIONS]:"stars",[te.DASHBOARD]:"home",[te.ALTERNATIVE_DEFINITIONS]:"format_list_bulleted",[te.CREATE_ALTERNATIVE]:"playlist_add_circle",[te.DISCUSS]:"forum"},oc={[zt.DASHBOARD]:[te.EXPLORE,te.CREATE_NODE,te.NETWORK,te.LOGOUT,te.EDIT_PROFILE,te.INTERACTIONS,te.CREATIONS],[zt.EDIT_PROFILE]:[te.EXPLORE,te.CREATE_NODE,te.NETWORK,te.LOGOUT,te.DASHBOARD,te.INTERACTIONS,te.CREATIONS],[zt.CREATE_NODE]:[te.EXPLORE,te.DASHBOARD,te.NETWORK,te.LOGOUT,te.EDIT_PROFILE,te.INTERACTIONS,te.CREATIONS],[zt.EXPLORE]:[],[zt.WORD]:[te.EXPLORE,te.DASHBOARD,te.LOGOUT,te.CREATE_NODE,te.ALTERNATIVE_DEFINITIONS,te.CREATE_ALTERNATIVE,te.DISCUSS]};function sc(e){const t=rc[e];t?t():console.warn(`No handler defined for navigation option: ${e}`)}function ac(e){const t=oc[e];return t?t.map(n=>({id:n,label:n.replace("-"," "),icon:ic[n]})):(console.warn(`No navigation configuration found for context: ${e}`),[])}const{Map:lc}=Os;function Qi(e,t,n){const r=e.slice();r[24]=t[n];const i=r[4].get(r[24].id);return r[25]=i,r}const uc=e=>({node:e[0]&1,position:e[0]&17}),Ji=e=>({node:e[24],position:e[25]});function eo(e,t,n){const r=e.slice();r[28]=t[n];const i=typeof r[28].source=="string"?r[28].source:"id"in r[28].source?r[28].source.id:null;r[29]=i;const o=typeof r[28].target=="string"?r[28].target:"id"in r[28].target?r[28].target.id:null;r[30]=o;const s=r[29]?r[4].get(r[29]):null;r[31]=s;const l=r[30]?r[4].get(r[30]):null;return r[32]=l,r}const fc=e=>({link:e[0]&2,source:e[0]&18,target:e[0]&18}),to=e=>({link:e[28],source:e[31],target:e[32]});function no(e){let t;const n=e[14].edge,r=Ut(n,e,e[13],to);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o[0]&8210)&&Gt(r,n,i,i[13],t?Yt(n,i[13],o,fc):Wt(i[13]),to)},i(i){t||(Y(r,i),t=!0)},o(i){B(r,i),t=!1},d(i){r&&r.d(i)}}}function ro(e){let t,n,r=e[31]&&e[32]&&no(e);return{c(){r&&r.c(),t=Ae()},l(i){r&&r.l(i),t=Ae()},m(i,o){r&&r.m(i,o),U(i,t,o),n=!0},p(i,o){i[31]&&i[32]?r?(r.p(i,o),o[0]&18&&Y(r,1)):(r=no(i),r.c(),Y(r,1),r.m(t.parentNode,t)):r&&(et(),B(r,1,1,()=>{r=null}),tt())},i(i){n||(Y(r),n=!0)},o(i){B(r),n=!1},d(i){i&&_(t),r&&r.d(i)}}}function io(e){let t,n,r,i,o;const s=[hc,cc],l=[];function a(u,h){return h[0]&1&&(t=null),t==null&&(t=!!Jf(u[24])),t?0:1}return n=a(e,[-1,-1]),r=l[n]=s[n](e),{c(){r.c(),i=Ae()},l(u){r.l(u),i=Ae()},m(u,h){l[n].m(u,h),U(u,i,h),o=!0},p(u,h){let g=n;n=a(u,h),n===g?l[n].p(u,h):(et(),B(l[g],1,1,()=>{l[g]=null}),tt(),r=l[n],r?r.p(u,h):(r=l[n]=s[n](u),r.c()),Y(r,1),r.m(i.parentNode,i))},i(u){o||(Y(r),o=!0)},o(u){B(r),o=!1},d(u){u&&_(i),l[n].d(u)}}}function cc(e){let t,n,r,i;const o=e[14].node,s=Ut(o,e,e[13],Ji);return{c(){t=A("g"),s&&s.c(),this.h()},l(l){t=R(l,"g",{class:!0,transform:!0,"data-node-id":!0});var a=E(t);s&&s.l(a),a.forEach(_),this.h()},h(){f(t,"class","node"),f(t,"transform",n=e[25].svgTransform),f(t,"data-node-id",r=e[24].id)},m(l,a){U(l,t,a),s&&s.m(t,null),i=!0},p(l,a){s&&s.p&&(!i||a[0]&8209)&&Gt(s,o,l,l[13],i?Yt(o,l[13],a,uc):Wt(l[13]),Ji),(!i||a[0]&17&&n!==(n=l[25].svgTransform))&&f(t,"transform",n),(!i||a[0]&1&&r!==(r=l[24].id))&&f(t,"data-node-id",r)},i(l){i||(Y(s,l),i=!0)},o(l){B(s,l),i=!1},d(l){l&&_(t),s&&s.d(l)}}}function hc(e){let t,n;function r(){return e[15](e[24])}function i(){return e[16](e[24])}function o(){return e[17](e[24])}return t=new $f({props:{option:e[24].data,transform:e[25].svgTransform,isHovered:e[7]===e[24].id}}),t.$on("click",r),t.$on("mouseenter",i),t.$on("mouseleave",o),{c(){se(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,l){le(t,s,l),n=!0},p(s,l){e=s;const a={};l[0]&1&&(a.option=e[24].data),l[0]&17&&(a.transform=e[25].svgTransform),l[0]&129&&(a.isHovered=e[7]===e[24].id),t.$set(a)},i(s){n||(Y(t.$$.fragment,s),n=!0)},o(s){B(t.$$.fragment,s),n=!1},d(s){ue(t,s)}}}function oo(e,t){let n,r,i,o=t[25]&&io(t);return{key:e,first:null,c(){n=Ae(),o&&o.c(),r=Ae(),this.h()},l(s){n=Ae(),o&&o.l(s),r=Ae(),this.h()},h(){this.first=n},m(s,l){U(s,n,l),o&&o.m(s,l),U(s,r,l),i=!0},p(s,l){t=s,t[25]?o?(o.p(t,l),l[0]&17&&Y(o,1)):(o=io(t),o.c(),Y(o,1),o.m(r.parentNode,r)):o&&(et(),B(o,1,1,()=>{o=null}),tt())},i(s){i||(Y(o),i=!0)},o(s){B(o),i=!1},d(s){s&&(_(n),_(r)),o&&o.d(s)}}}function dc(e){let t,n,r,i,o,s,l,a=[],u=new lc,h,g,d=Tt(e[1]),c=[];for(let v=0;v<d.length;v+=1)c[v]=ro(eo(e,d,v));const p=v=>B(c[v],1,1,()=>{c[v]=null});let w=Tt(e[0]);const b=v=>v[24].id;for(let v=0;v<w.length;v+=1){let y=Qi(e,w,v),N=b(y);u.set(N,a[v]=oo(N,y))}return{c(){t=A("svg"),n=A("defs"),r=A("radialGradient"),i=A("stop"),o=A("stop"),s=A("g");for(let v=0;v<c.length;v+=1)c[v].c();l=Ae();for(let v=0;v<a.length;v+=1)a[v].c();this.h()},l(v){t=R(v,"svg",{class:!0,width:!0,height:!0,viewBox:!0});var y=E(t);n=R(y,"defs",{});var N=E(n);r=R(N,"radialGradient",{id:!0,cx:!0,cy:!0,r:!0});var x=E(r);i=R(x,"stop",{offset:!0,"stop-color":!0}),E(i).forEach(_),o=R(x,"stop",{offset:!0,"stop-color":!0}),E(o).forEach(_),x.forEach(_),N.forEach(_),s=R(y,"g",{});var S=E(s);for(let I=0;I<c.length;I+=1)c[I].l(S);l=Ae();for(let I=0;I<a.length;I+=1)a[I].l(S);S.forEach(_),y.forEach(_),this.h()},h(){f(i,"offset","0%"),f(i,"stop-color","rgba(255,255,255,0.1)"),f(o,"offset","100%"),f(o,"stop-color","rgba(255,255,255,0)"),f(r,"id","node-gradient"),f(r,"cx","50%"),f(r,"cy","50%"),f(r,"r","50%"),f(t,"class","graph svelte-190ehr9"),f(t,"width",e[2]),f(t,"height",e[3]),f(t,"viewBox",h="0 0 "+e[2]+" "+e[3])},m(v,y){U(v,t,y),m(t,n),m(n,r),m(r,i),m(r,o),m(t,s);for(let N=0;N<c.length;N+=1)c[N]&&c[N].m(s,null);m(s,l);for(let N=0;N<a.length;N+=1)a[N]&&a[N].m(s,null);e[18](s),e[19](t),g=!0},p(v,y){if(y[0]&8210){d=Tt(v[1]);let N;for(N=0;N<d.length;N+=1){const x=eo(v,d,N);c[N]?(c[N].p(x,y),Y(c[N],1)):(c[N]=ro(x),c[N].c(),Y(c[N],1),c[N].m(s,l))}for(et(),N=d.length;N<c.length;N+=1)p(N);tt()}y[0]&9105&&(w=Tt(v[0]),et(),a=ks(a,y,b,1,v,w,u,s,Ms,oo,null,Qi),tt()),(!g||y[0]&4)&&f(t,"width",v[2]),(!g||y[0]&8)&&f(t,"height",v[3]),(!g||y[0]&12&&h!==(h="0 0 "+v[2]+" "+v[3]))&&f(t,"viewBox",h)},i(v){if(!g){for(let y=0;y<d.length;y+=1)Y(c[y]);for(let y=0;y<w.length;y+=1)Y(a[y]);g=!0}},o(v){c=c.filter(Boolean);for(let y=0;y<c.length;y+=1)B(c[y]);for(let y=0;y<a.length;y+=1)B(a[y]);g=!1},d(v){v&&_(t),Dr(c,v);for(let y=0;y<a.length;y+=1)a[y].d();e[18](null),e[19](null)}}}function gc(e,t,n){let{$$slots:r={},$$scope:i}=t,{nodes:o=[]}=t,{links:s=[]}=t,{width:l}=t,{height:a}=t,{isPreviewMode:u=!1}=t,h,g,d,c=new Map,p,w=null;function b(F,$){n(7,w=$?F:null)}function v(F){sc(F)}function y(){if(!h||!p)return;const F=Mr.translate(l/2,a*.515);ut(h).transition().duration(750).call(p.transform,F)}function N(){n(12,d=new Yf(l,a,u)),x()}function x(){d&&(n(4,c=d.updateLayout({nodes:o,links:s})),n(0,o))}function S(){p=Gf().scaleExtent([.1,4]).on("zoom",$=>{ut(g).attr("transform",$.transform.toString())});const F=Mr.translate(l/2,a*.515);ut(h).call(p).call(p.transform,F)}tn(()=>{N(),S()}),ni(()=>{d&&d.stop()});const I=F=>v(F.data.id),M=F=>b(F.id,!0),L=F=>b(F.id,!1);function X(F){Xe[F?"unshift":"push"](()=>{g=F,n(6,g)})}function C(F){Xe[F?"unshift":"push"](()=>{h=F,n(5,h)})}return e.$$set=F=>{"nodes"in F&&n(0,o=F.nodes),"links"in F&&n(1,s=F.links),"width"in F&&n(2,l=F.width),"height"in F&&n(3,a=F.height),"isPreviewMode"in F&&n(10,u=F.isPreviewMode),"$$scope"in F&&n(13,i=F.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&5120&&d&&u!==void 0&&(console.log("Preview mode change detected:",{isPreviewMode:u}),d.updatePreviewMode(u),setTimeout(()=>{console.log("Forcing layout update after preview mode change"),x()},50)),e.$$.dirty[0]&4099&&d&&(o||s)&&x(),e.$$.dirty[0]&18&&console.log("Edge rendering state:",{links:s.map(F=>({source:F.source,target:F.target,type:F.type,value:F.value})),nodePositions:Object.fromEntries(Array.from(c.entries()).map(([F,$])=>[F,{x:$.x,y:$.y}]))})},[o,s,l,a,c,h,g,w,b,v,u,y,d,i,r,I,M,L,X,C]}class _c extends Ie{constructor(t){super(),xe(this,t,gc,dc,Ne,{nodes:0,links:1,width:2,height:3,isPreviewMode:10,resetView:11},null,[-1,-1])}get resetView(){return this.$$.ctx[11]}}const Jr={STYLES:{WORD_TO_DEFINITION:{STROKE_WIDTH:1.5,GRADIENT:{START_OPACITY:.8,END_OPACITY:.8}}},COLORS:{WORD:G.PRIMARY.BLUE,DEFINITION:{LIVE:G.PRIMARY.BLUE,ALTERNATIVE:G.PRIMARY.PURPLE}}};function pc(e){let t,n,r,i,o,s,l,a,u,h,g,d,c,p;return{c(){t=A("g"),n=A("defs"),r=A("linearGradient"),i=A("stop"),o=A("stop"),h=A("line"),this.h()},l(w){t=R(w,"g",{class:!0});var b=E(t);n=R(b,"defs",{});var v=E(n);r=R(v,"linearGradient",{id:!0,gradientUnits:!0,x1:!0,y1:!0,x2:!0,y2:!0});var y=E(r);i=R(y,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),E(i).forEach(_),o=R(y,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),E(o).forEach(_),y.forEach(_),v.forEach(_),h=R(b,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),E(h).forEach(_),b.forEach(_),this.h()},h(){f(i,"offset","0%"),f(i,"stop-color",Jr.COLORS.WORD),f(i,"stop-opacity","0.8"),f(o,"offset","100%"),f(o,"stop-color",e[2]),f(o,"stop-opacity","0.8"),f(r,"id",e[3]),f(r,"gradientUnits","userSpaceOnUse"),f(r,"x1",s=e[0].x),f(r,"y1",l=e[0].y),f(r,"x2",a=e[1].x),f(r,"y2",u=e[1].y),f(h,"x1",g=e[0].x),f(h,"y1",d=e[0].y),f(h,"x2",c=e[1].x),f(h,"y2",p=e[1].y),f(h,"stroke",`url(#${e[3]})`),f(h,"stroke-width","2"),f(h,"class","edge-line svelte-kov06k"),f(t,"class","edge svelte-kov06k")},m(w,b){U(w,t,b),m(t,n),m(n,r),m(r,i),m(r,o),m(t,h)},p(w,[b]){b&4&&f(o,"stop-color",w[2]),b&1&&s!==(s=w[0].x)&&f(r,"x1",s),b&1&&l!==(l=w[0].y)&&f(r,"y1",l),b&2&&a!==(a=w[1].x)&&f(r,"x2",a),b&2&&u!==(u=w[1].y)&&f(r,"y2",u),b&1&&g!==(g=w[0].x)&&f(h,"x1",g),b&1&&d!==(d=w[0].y)&&f(h,"y1",d),b&2&&c!==(c=w[1].x)&&f(h,"x2",c),b&2&&p!==(p=w[1].y)&&f(h,"y2",p)},i:Re,o:Re,d(w){w&&_(t)}}}function mc(e,t,n){let r,{source:i}=t,{target:o}=t,{link:s}=t;const l=`edge-gradient-${Math.random().toString(36).slice(2)}`;return e.$$set=a=>{"source"in a&&n(0,i=a.source),"target"in a&&n(1,o=a.target),"link"in a&&n(4,s=a.link)},e.$$.update=()=>{e.$$.dirty&16&&n(2,r=s.type==="live"?Jr.COLORS.DEFINITION.LIVE:Jr.COLORS.DEFINITION.ALTERNATIVE)},[i,o,r,l,s]}class vc extends Ie{constructor(t){super(),xe(this,t,mc,pc,Ne,{source:0,target:1,link:4})}}const Vt={RADIUS:3,GLOW_RADIUS:5,GLOW_OPACITY:.25},vr={BASE_VELOCITY:.15,VELOCITY_SCALE:.5,DRIFT_FORCE:.008,MAX_SPEED:.25},cs={nodeCount:35,viewportScale:1.5,minConnections:2,maxConnections:4,viewport:{origin:{x:-.5,y:-.5},scale:1,preserveAspectRatio:"xMidYMid meet"},animation:{baseVelocity:vr.BASE_VELOCITY,velocityScale:vr.VELOCITY_SCALE,driftForce:vr.DRIFT_FORCE,maxSpeed:vr.MAX_SPEED},nodeStyles:[{mainRadius:Vt.RADIUS,glowRadius:Vt.GLOW_RADIUS,mainColor:G.PRIMARY.BLUE,glowColor:G.PRIMARY.BLUE,glowOpacity:Vt.GLOW_OPACITY},{mainRadius:Vt.RADIUS,glowRadius:Vt.GLOW_RADIUS,mainColor:G.PRIMARY.PURPLE,glowColor:G.PRIMARY.PURPLE,glowOpacity:Vt.GLOW_OPACITY},{mainRadius:Vt.RADIUS,glowRadius:Vt.GLOW_RADIUS,mainColor:G.PRIMARY.GREEN,glowColor:G.PRIMARY.GREEN,glowOpacity:Vt.GLOW_OPACITY}],edgeStyle:{width:1.2,color:G.GRAPH.EDGE.DEFAULT,glowColor:G.UI.TEXT.TERTIARY,glowWidth:1,opacity:.08}};class wc{constructor(t,n,r,i={}){ke(this,"nodes");ke(this,"width");ke(this,"height");ke(this,"config");ke(this,"nodesGroup");ke(this,"edgesGroup");ke(this,"defs");ke(this,"gradientIds",[]);ke(this,"animationFrameId",null);this.config={...cs,...i};const o=ut(t);this.width=n*this.config.viewportScale,this.height=r*this.config.viewportScale;const s=this.width/2,l=this.height/2;o.attr("viewBox",`${-s} ${-l} ${this.width} ${this.height}`).attr("preserveAspectRatio",this.config.viewport.preserveAspectRatio),this.defs=o.append("defs"),this.edgesGroup=o.append("g").attr("class","edges"),this.nodesGroup=o.append("g").attr("class","nodes"),this.createGlowFilter(),this.createGradients(),this.nodes=this.createInitialNodes(),this.initializeNodes()}createGlowFilter(){const t=this.defs.append("filter").attr("id","nodeGlow").attr("width","300%").attr("height","300%").attr("x","-100%").attr("y","-100%");t.append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","3").attr("result","blur"),t.append("feColorMatrix").attr("in","blur").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7")}createGradients(){this.gradientIds=this.config.nodeStyles.map((t,n)=>{const r=`edge-gradient-${n}`,{r:i,g:o,b:s}=this.hexToRgb(t.mainColor),l=this.defs.append("linearGradient").attr("id",r).attr("gradientUnits","userSpaceOnUse");return l.append("stop").attr("offset","0%").attr("stop-color",`rgba(${i}, ${o}, ${s}, ${this.config.edgeStyle.opacity})`),l.append("stop").attr("offset","50%").attr("stop-color",`rgba(255, 255, 255, ${this.config.edgeStyle.opacity/2})`),l.append("stop").attr("offset","100%").attr("stop-color",`rgba(${i}, ${o}, ${s}, ${this.config.edgeStyle.opacity})`),r})}createInitialNodes(){return Array.from({length:this.config.nodeCount},(t,n)=>({id:`node-${n}`,x:(Math.random()-.5)*this.width,y:(Math.random()-.5)*this.height,vx:(Math.random()-.5)*this.config.animation.baseVelocity,vy:(Math.random()-.5)*this.config.animation.baseVelocity,connections:this.generateConnections(n),styleIndex:Math.floor(Math.random()*this.config.nodeStyles.length)}))}generateConnections(t){const n=this.config.minConnections+Math.floor(Math.random()*(this.config.maxConnections-this.config.minConnections+1));return Array.from({length:n},()=>{let r;do r=Math.floor(Math.random()*this.config.nodeCount);while(r===t);return`node-${r}`})}initializeNodes(){this.updateNodes(),this.updateEdges()}tick(){this.updateNodePositions(),this.updateNodes(),this.updateEdges(),this.animationFrameId=requestAnimationFrame(()=>this.tick())}updateNodePositions(){const t=this.width/2,n=this.height/2,r=this.config.animation;this.nodes.forEach(i=>{i.vx+=(Math.random()-.5)*r.driftForce,i.vy+=(Math.random()-.5)*r.driftForce,i.x+=i.vx*r.velocityScale,i.y+=i.vy*r.velocityScale;const o=Math.sqrt(i.vx*i.vx+i.vy*i.vy);o>r.maxSpeed&&(i.vx=i.vx/o*r.maxSpeed,i.vy=i.vy/o*r.maxSpeed),i.x<-t-100&&(i.x=t+98),i.x>t+100&&(i.x=-t-98),i.y<-n-100&&(i.y=n+98),i.y>n+100&&(i.y=-n-98)})}updateEdges(){const t=this.edgesGroup.selectAll("path").data(this.createEdgeData());t.enter().append("path").merge(t).attr("d",n=>`M${n.source.x},${n.source.y}L${n.target.x},${n.target.y}`).attr("stroke",n=>`url(#${this.gradientIds[n.source.styleIndex]})`).attr("stroke-width",this.config.edgeStyle.width).attr("fill","none"),t.exit().remove()}updateNodes(){const t=this.nodesGroup.selectAll("g.node").data(this.nodes),n=t.enter().append("g").attr("class","node");n.append("circle").attr("r",i=>this.config.nodeStyles[i.styleIndex].glowRadius).attr("filter","url(#nodeGlow)"),n.append("circle").attr("r",i=>this.config.nodeStyles[i.styleIndex].mainRadius),n.merge(t).attr("transform",i=>`translate(${i.x},${i.y})`).selectAll("circle").attr("fill",i=>{const o=this.config.nodeStyles[i.styleIndex],{r:s,g:l,b:a}=this.hexToRgb(o.mainColor);return`rgba(${s}, ${l}, ${a}, ${o.glowOpacity})`}),t.exit().remove()}createEdgeData(){const t=[];return this.nodes.forEach(n=>{n.connections.forEach(r=>{const i=this.nodes.find(o=>o.id===r);i&&t.push({source:n,target:i})})}),t}hexToRgb(t){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:0,g:0,b:0}}resize(t,n){var s;this.width=t*this.config.viewportScale,this.height=n*this.config.viewportScale;const r=this.width/2,i=this.height/2,o=(s=this.nodesGroup.node())==null?void 0:s.parentElement;o&&ut(o).attr("viewBox",`${-r} ${-i} ${this.width} ${this.height}`)}start(){this.animationFrameId||this.tick()}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop(),this.edgesGroup.remove(),this.nodesGroup.remove(),this.defs.remove()}}const yc=e=>({node:e&16777216,position:e&33554432}),so=e=>({node:e[24],position:e[25]});function bc(e){let t,n;return t=new vc({props:{link:e[26],source:e[27],target:e[28]}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i&67108864&&(o.link=r[26]),i&134217728&&(o.source=r[27]),i&268435456&&(o.target=r[28]),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function Ec(e){let t;const n=e[13].node,r=Ut(n,e,e[19],so);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&50855936)&&Gt(r,n,i,i[19],t?Yt(n,i[19],o,yc):Wt(i[19]),so)},i(i){t||(Y(r,i),t=!0)},o(i){B(r,i),t=!1},d(i){r&&r.d(i)}}}function Nc(e){let t,n,r="",i,o,s,l,a,u,h,g,d={nodes:e[2],links:e[3],width:e[0],height:e[1],isPreviewMode:e[4],$$slots:{node:[Ec,({node:c,position:p})=>({24:c,25:p}),({node:c,position:p})=>(c?16777216:0)|(p?33554432:0)],edge:[bc,({link:c,source:p,target:w})=>({26:c,27:p,28:w}),({link:c,source:p,target:w})=>(c?67108864:0)|(p?134217728:0)|(w?268435456:0)]},$$scope:{ctx:e}};return a=new _c({props:d}),e[16](a),a.$on("modeChange",e[17]),{c(){t=J("div"),n=J("button"),n.textContent=r,i=he(),o=A("svg"),s=A("g"),l=he(),se(a.$$.fragment),this.h()},l(c){t=ee(c,"DIV",{class:!0});var p=E(t);n=ee(p,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),Et(n)!=="svelte-tkzas9"&&(n.textContent=r),i=de(p),o=R(p,"svg",{class:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var w=E(o);s=R(w,"g",{class:!0}),E(s).forEach(_),w.forEach(_),l=de(p),ae(a.$$.fragment,p),p.forEach(_),this.h()},h(){f(n,"class","reset-button svelte-1vitirz"),f(n,"aria-label","Reset view"),f(s,"class","background-group"),f(o,"class","background-svg svelte-1vitirz"),f(o,"width",e[0]),f(o,"height",e[1]),f(o,"viewBox",e[9]),f(o,"preserveAspectRatio",e[10].viewport.preserveAspectRatio),f(t,"class","graph-container svelte-1vitirz")},m(c,p){U(c,t,p),m(t,n),m(t,i),m(t,o),m(o,s),e[14](s),e[15](o),m(t,l),le(a,t,null),e[18](t),u=!0,h||(g=be(n,"click",e[11]),h=!0)},p(c,[p]){(!u||p&1)&&f(o,"width",c[0]),(!u||p&2)&&f(o,"height",c[1]),(!u||p&512)&&f(o,"viewBox",c[9]);const w={};p&4&&(w.nodes=c[2]),p&8&&(w.links=c[3]),p&1&&(w.width=c[0]),p&2&&(w.height=c[1]),p&16&&(w.isPreviewMode=c[4]),p&520617984&&(w.$$scope={dirty:p,ctx:c}),a.$set(w)},i(c){u||(Y(a.$$.fragment,c),u=!0)},o(c){B(a.$$.fragment,c),u=!1},d(c){c&&_(t),e[14](null),e[15](null),e[16](null),ue(a),e[18](null),h=!1,g()}}}function Ic(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{nodes:s=[]}=t,{links:l=[]}=t,{width:a=window.innerWidth}=t,{height:u=window.innerHeight}=t,{backgroundConfig:h={}}=t,{isPreviewMode:g=!1}=t;const d={...cs,...h};rt();let c,p,w,b=null,v;function y(){if(!c)return;const C=c.getBoundingClientRect();n(0,a=C.width),n(1,u=C.height),b&&b.resize(a,u)}function N(){w&&(b=new wc(w,a,u),b&&b.start())}function x(){v&&v.resetView()}tn(()=>{y(),window.addEventListener("resize",y),a&&u&&N()}),ni(()=>{window.removeEventListener("resize",y),b&&b.destroy()});function S(C){Xe[C?"unshift":"push"](()=>{w=C,n(8,w)})}function I(C){Xe[C?"unshift":"push"](()=>{p=C,n(7,p)})}function M(C){Xe[C?"unshift":"push"](()=>{v=C,n(5,v)})}function L(C){tr.call(this,e,C)}function X(C){Xe[C?"unshift":"push"](()=>{c=C,n(6,c)})}return e.$$set=C=>{"nodes"in C&&n(2,s=C.nodes),"links"in C&&n(3,l=C.links),"width"in C&&n(0,a=C.width),"height"in C&&n(1,u=C.height),"backgroundConfig"in C&&n(12,h=C.backgroundConfig),"isPreviewMode"in C&&n(4,g=C.isPreviewMode),"$$scope"in C&&n(19,o=C.$$scope)},e.$$.update=()=>{e.$$.dirty&48&&g!==void 0&&(console.log("Graph.svelte - Preview mode changed:",g),v&&setTimeout(()=>{v.resetView()},0)),e.$$.dirty&3&&n(9,r=a?`${a*d.viewport.origin.x} ${u*d.viewport.origin.y} ${a*d.viewport.scale} ${u*d.viewport.scale}`:"0 0 100 100")},[a,u,s,l,g,v,c,p,w,r,d,x,h,i,S,I,M,L,X,o]}class xc extends Ie{constructor(t){super(),xe(this,t,Ic,Nc,Ne,{nodes:2,links:3,width:0,height:1,backgroundConfig:12,isPreviewMode:4})}}function ao(e){return Object.prototype.toString.call(e)==="[object Date]"}function ei(e,t,n,r){if(typeof n=="number"||ao(n)){const i=r-n,o=(n-t)/(e.dt||1/60),s=e.opts.stiffness*i,l=e.opts.damping*o,a=(s-l)*e.inv_mass,u=(o+a)*e.dt;return Math.abs(u)<e.opts.precision&&Math.abs(i)<e.opts.precision?r:(e.settled=!1,ao(n)?new Date(n.getTime()+u):n+u)}else{if(Array.isArray(n))return n.map((i,o)=>ei(e,t[o],n[o],r[o]));if(typeof n=="object"){const i={};for(const o in n)i[o]=ei(e,t[o],n[o],r[o]);return i}else throw new Error(`Cannot spring ${typeof n} values`)}}function hs(e,t={}){const n=Lo(e),{stiffness:r=.15,damping:i=.8,precision:o=.01}=t;let s,l,a,u=e,h=e,g=1,d=0,c=!1;function p(b,v={}){h=b;const y=a={};return e==null||v.hard||w.stiffness>=1&&w.damping>=1?(c=!0,s=Ii(),u=b,n.set(e=h),Promise.resolve()):(v.soft&&(d=1/((v.soft===!0?.5:+v.soft)*60),g=0),l||(s=Ii(),c=!1,l=Ts(N=>{if(c)return c=!1,l=null,!1;g=Math.min(g+d,1);const x={inv_mass:g,opts:w,settled:!0,dt:(N-s)*60/1e3},S=ei(x,u,e,h);return s=N,u=e,n.set(e=S),x.settled&&(l=null),!x.settled})),new Promise(N=>{l.promise.then(()=>{y===a&&N()})}))}const w={set:p,update:(b,v)=>p(b(h,e),v),subscribe:n.subscribe,stiffness:r,damping:i,precision:o};return w}const Ac=e=>({}),lo=e=>({radius:e[2]});function Rc(e){let t,n,r,i,o,s,l,a,u,h,g,d,c,p,w,b,v,y,N,x,S,I,M,L,X,C,F,$,re,O;const k=e[8].default,T=Ut(k,e,e[7],lo);return{c(){t=A("g"),n=A("defs"),r=A("filter"),i=A("feGaussianBlur"),o=A("feFlood"),s=A("feComposite"),l=A("feGaussianBlur"),a=A("feFlood"),u=A("feComposite"),h=A("feGaussianBlur"),g=A("feFlood"),d=A("feComposite"),c=A("feMerge"),p=A("feMergeNode"),w=A("feMergeNode"),b=A("feMergeNode"),v=A("feMergeNode"),y=A("radialGradient"),N=A("stop"),x=A("stop"),S=A("stop"),I=A("circle"),M=A("circle"),L=A("circle"),X=A("circle"),C=A("circle"),F=A("circle"),T&&T.c(),this.h()},l(D){t=R(D,"g",{class:!0,transform:!0});var P=E(t);n=R(P,"defs",{});var W=E(n);r=R(W,"filter",{id:!0,x:!0,y:!0,width:!0,height:!0});var j=E(r);i=R(j,"feGaussianBlur",{in:!0,stdDeviation:!0,result:!0}),E(i).forEach(_),o=R(j,"feFlood",{"flood-color":!0,"flood-opacity":!0,result:!0}),E(o).forEach(_),s=R(j,"feComposite",{in:!0,in2:!0,operator:!0,result:!0}),E(s).forEach(_),l=R(j,"feGaussianBlur",{in:!0,stdDeviation:!0,result:!0}),E(l).forEach(_),a=R(j,"feFlood",{"flood-color":!0,"flood-opacity":!0,result:!0}),E(a).forEach(_),u=R(j,"feComposite",{in:!0,in2:!0,operator:!0,result:!0}),E(u).forEach(_),h=R(j,"feGaussianBlur",{in:!0,stdDeviation:!0,result:!0}),E(h).forEach(_),g=R(j,"feFlood",{"flood-color":!0,"flood-opacity":!0,result:!0}),E(g).forEach(_),d=R(j,"feComposite",{in:!0,in2:!0,operator:!0,result:!0}),E(d).forEach(_),c=R(j,"feMerge",{});var Q=E(c);p=R(Q,"feMergeNode",{in:!0}),E(p).forEach(_),w=R(Q,"feMergeNode",{in:!0}),E(w).forEach(_),b=R(Q,"feMergeNode",{in:!0}),E(b).forEach(_),v=R(Q,"feMergeNode",{in:!0}),E(v).forEach(_),Q.forEach(_),j.forEach(_),y=R(W,"radialGradient",{id:!0});var ne=E(y);N=R(ne,"stop",{offset:!0,"stop-color":!0}),E(N).forEach(_),x=R(ne,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),E(x).forEach(_),S=R(ne,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),E(S).forEach(_),ne.forEach(_),W.forEach(_),I=R(P,"circle",{r:!0,class:!0}),E(I).forEach(_),M=R(P,"circle",{r:!0,class:!0}),E(M).forEach(_),L=R(P,"circle",{r:!0,class:!0}),E(L).forEach(_),X=R(P,"circle",{r:!0,class:!0}),E(X).forEach(_),C=R(P,"circle",{r:!0,class:!0,filter:!0}),E(C).forEach(_),F=R(P,"circle",{r:!0,class:!0}),E(F).forEach(_),T&&T.l(P),P.forEach(_),this.h()},h(){f(i,"in","SourceAlpha"),f(i,"stdDeviation","8"),f(i,"result","blur1"),f(o,"flood-color",e[1]),f(o,"flood-opacity","0.6"),f(o,"result","color1"),f(s,"in","color1"),f(s,"in2","blur1"),f(s,"operator","in"),f(s,"result","shadow1"),f(l,"in","SourceAlpha"),f(l,"stdDeviation","4"),f(l,"result","blur2"),f(a,"flood-color",e[1]),f(a,"flood-opacity","0.8"),f(a,"result","color2"),f(u,"in","color2"),f(u,"in2","blur2"),f(u,"operator","in"),f(u,"result","shadow2"),f(h,"in","SourceAlpha"),f(h,"stdDeviation","1"),f(h,"result","blur3"),f(g,"flood-color",e[1]),f(g,"flood-opacity","1"),f(g,"result","color3"),f(d,"in","color3"),f(d,"in2","blur3"),f(d,"operator","in"),f(d,"result","shadow3"),f(p,"in","shadow1"),f(w,"in","shadow2"),f(b,"in","shadow3"),f(v,"in","SourceGraphic"),f(r,"id",e[3]),f(r,"x","-100%"),f(r,"y","-100%"),f(r,"width","300%"),f(r,"height","300%"),f(N,"offset","0%"),f(N,"stop-color","rgba(0,0,0,0)"),f(x,"offset","85%"),f(x,"stop-color",e[1]),f(x,"stop-opacity","0.5"),f(S,"offset","100%"),f(S,"stop-color",e[1]),f(S,"stop-opacity","0.1"),f(y,"id",e[4]),f(I,"r",e[2]),f(I,"class","background-layer-1 svelte-23hgqn"),f(M,"r",e[2]-4),f(M,"class","background-layer-2 svelte-23hgqn"),f(L,"r",e[2]-8),f(L,"class","background-layer-3 svelte-23hgqn"),f(X,"r",e[2]-12),f(X,"class","content-background svelte-23hgqn"),f(C,"r",e[2]),f(C,"class","outer-ring svelte-23hgqn"),f(C,"filter",`url(#${e[3]})`),ie(C,"stroke",e[1]),ie(C,"stroke-opacity","5.5"),f(F,"r",e[2]),f(F,"class","middle-ring svelte-23hgqn"),f(t,"class","base-node svelte-23hgqn"),f(t,"transform",e[0])},m(D,P){U(D,t,P),m(t,n),m(n,r),m(r,i),m(r,o),m(r,s),m(r,l),m(r,a),m(r,u),m(r,h),m(r,g),m(r,d),m(r,c),m(c,p),m(c,w),m(c,b),m(c,v),m(n,y),m(y,N),m(y,x),m(y,S),m(t,I),m(t,M),m(t,L),m(t,X),m(t,C),m(t,F),T&&T.m(t,null),$=!0,re||(O=be(t,"click",e[5]),re=!0)},p(D,[P]){(!$||P&2)&&f(o,"flood-color",D[1]),(!$||P&2)&&f(a,"flood-color",D[1]),(!$||P&2)&&f(g,"flood-color",D[1]),(!$||P&2)&&f(x,"stop-color",D[1]),(!$||P&2)&&f(S,"stop-color",D[1]),P&2&&ie(C,"stroke",D[1]),T&&T.p&&(!$||P&128)&&Gt(T,k,D,D[7],$?Yt(k,D[7],P,Ac):Wt(D[7]),lo),(!$||P&1)&&f(t,"transform",D[0])},i(D){$||(Y(T,D),$=!0)},o(D){B(T,D),$=!1},d(D){D&&_(t),T&&T.d(D),re=!1,O()}}}function Sc(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{transform:s}=t,{style:l}=t;const a=l.previewSize/2,u=`glow-${Math.random().toString(36).slice(2)}`,h=`gradient-${Math.random().toString(36).slice(2)}`,g=rt();function d(){g("click")}return e.$$set=c=>{"transform"in c&&n(0,s=c.transform),"style"in c&&n(6,l=c.style),"$$scope"in c&&n(7,o=c.$$scope)},e.$$.update=()=>{e.$$.dirty&64&&n(1,r=l.highlightColor||"#FFFFFF")},[s,r,a,u,h,d,l,o,i]}class ds extends Ie{constructor(t){super(),xe(this,t,Sc,Rc,Ne,{transform:0,style:6})}}const Tc=e=>({radius:e&1}),uo=e=>({radius:e[0]});function Oc(e){let t;const n=e[5].default,r=Ut(n,e,e[6],uo);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&65)&&Gt(r,n,i,i[6],t?Yt(n,i[6],o,Tc):Wt(i[6]),uo)},i(i){t||(Y(r,i),t=!0)},o(i){B(r,i),t=!1},d(i){r&&r.d(i)}}}function Mc(e){let t,n,r;return n=new ds({props:{transform:"",style:e[1],$$slots:{default:[Oc]},$$scope:{ctx:e}}}),{c(){t=A("g"),se(n.$$.fragment),this.h()},l(i){t=R(i,"g",{class:!0});var o=E(t);ae(n.$$.fragment,o),o.forEach(_),this.h()},h(){f(t,"class","detail-node svelte-1ebasdh"),ie(t,"opacity",e[2]),ie(t,"transform-origin","center")},m(i,o){U(i,t,o),le(n,t,null),r=!0},p(i,[o]){const s={};o&2&&(s.style=i[1]),o&65&&(s.$$scope={dirty:o,ctx:i}),n.$set(s),o&4&&ie(t,"opacity",i[2])},i(i){r||(Y(n.$$.fragment,i),r=!0)},o(i){B(n.$$.fragment,i),r=!1},d(i){i&&_(t),ue(n)}}}function kc(e,t,n){let r,i,o,{$$slots:s={},$$scope:l}=t,{style:a}=t;const u=hs(0,{stiffness:.3,damping:.8});return Xt(e,u,h=>n(2,o=h)),tn(()=>{u.set(1)}),e.$$set=h=>{"style"in h&&n(4,a=h.style),"$$scope"in h&&n(6,l=h.$$scope)},e.$$.update=()=>{e.$$.dirty&16&&n(1,r={...a,previewSize:Ai*2})},n(0,i=Ai),[i,r,o,u,a,s,l]}class ur extends Ie{constructor(t){super(),xe(this,t,kc,Mc,Ne,{style:4})}}function fo(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function co(e){let t,n=e[7].text+"",r,i,o;return{c(){t=A("text"),r=V(n),this.h()},l(s){t=R(s,"text",{x:!0,dy:!0,class:!0});var l=E(t);r=z(l,n),l.forEach(_),this.h()},h(){f(t,"x",i=e[7].x),f(t,"dy",o=25+e[7].dy),f(t,"class","value left-align svelte-1w67vw4")},m(s,l){U(s,t,l),m(t,r)},p(s,l){l&4&&n!==(n=s[7].text+"")&&ce(r,n),l&4&&i!==(i=s[7].x)&&f(t,"x",i),l&4&&o!==(o=25+s[7].dy)&&f(t,"dy",o)},d(s){s&&_(t)}}}function ho(e){let t,n,r,i,o,s,l,a,u,h=e[1].nodesCreated+"",g,d,c,p,w,b,v,y=e[1].votesCast+"",N,x;return{c(){t=A("g"),n=A("text"),r=V(`activity stats:
                `),i=A("g"),o=A("text"),s=V(`nodes created
                    `),l=A("text"),a=V(`=
                    `),u=A("text"),g=V(h),d=A("g"),c=A("text"),p=V(`votes cast
                    `),w=A("text"),b=V(`=
                    `),v=A("text"),N=V(y),this.h()},l(S){t=R(S,"g",{transform:!0});var I=E(t);n=R(I,"text",{x:!0,class:!0});var M=E(n);r=z(M,`activity stats:
                `),M.forEach(_),i=R(I,"g",{transform:!0});var L=E(i);o=R(L,"text",{x:!0,class:!0});var X=E(o);s=z(X,`nodes created
                    `),X.forEach(_),l=R(L,"text",{class:!0});var C=E(l);a=z(C,`=
                    `),C.forEach(_),u=R(L,"text",{x:!0,class:!0});var F=E(u);g=z(F,h),F.forEach(_),L.forEach(_),d=R(I,"g",{transform:!0});var $=E(d);c=R($,"text",{x:!0,class:!0});var re=E(c);p=z(re,`votes cast
                    `),re.forEach(_),w=R($,"text",{class:!0});var O=E(w);b=z(O,`=
                    `),O.forEach(_),v=R($,"text",{x:!0,class:!0});var k=E(v);N=z(k,y),k.forEach(_),$.forEach(_),I.forEach(_),this.h()},h(){f(n,"x",e[3].labelX),f(n,"class","label left-align svelte-1w67vw4"),f(o,"x",e[3].labelX),f(o,"class","value left-align svelte-1w67vw4"),f(l,"class","value svelte-1w67vw4"),f(u,"x",e[3].valueX),f(u,"class","value left-align svelte-1w67vw4"),f(i,"transform","translate(0, 30)"),f(c,"x",e[3].labelX),f(c,"class","value left-align svelte-1w67vw4"),f(w,"class","value svelte-1w67vw4"),f(v,"x",e[3].valueX),f(v,"class","value left-align svelte-1w67vw4"),f(d,"transform","translate(0, 60)"),f(t,"transform",x="translate(0, "+(-e[5]+390)+")")},m(S,I){U(S,t,I),m(t,n),m(n,r),m(t,i),m(i,o),m(o,s),m(i,l),m(l,a),m(i,u),m(u,g),m(t,d),m(d,c),m(c,p),m(d,w),m(w,b),m(d,v),m(v,N)},p(S,I){I&2&&h!==(h=S[1].nodesCreated+"")&&ce(g,h),I&2&&y!==(y=S[1].votesCast+"")&&ce(N,y),I&32&&x!==(x="translate(0, "+(-S[5]+390)+")")&&f(t,"transform",x)},d(S){S&&_(t)}}}function Dc(e){let t,n,r,i,o,s,l,a,u=(e[0].preferred_username||e[0].name||e[0].nickname||"User")+"",h,g,d,c,p,w,b,v,y,N=Tt(e[2]),x=[];for(let I=0;I<N.length;I+=1)x[I]=co(fo(e,N,I));let S=e[1]&&ho(e);return{c(){t=A("text"),n=V("ProjectZer0"),i=he(),o=A("g"),s=A("text"),l=V(`name:
            `),a=A("text"),h=V(u),d=he(),c=A("g"),p=A("text"),w=V(`mission statement:
            `);for(let I=0;I<x.length;I+=1)x[I].c();v=he(),S&&S.c(),y=Ae(),this.h()},l(I){t=R(I,"text",{dy:!0,class:!0});var M=E(t);n=z(M,"ProjectZer0"),M.forEach(_),i=de(I),o=R(I,"g",{transform:!0});var L=E(o);s=R(L,"text",{x:!0,class:!0});var X=E(s);l=z(X,`name:
            `),X.forEach(_),a=R(L,"text",{x:!0,dy:!0,class:!0});var C=E(a);h=z(C,u),C.forEach(_),L.forEach(_),d=de(I),c=R(I,"g",{transform:!0});var F=E(c);p=R(F,"text",{x:!0,class:!0});var $=E(p);w=z($,`mission statement:
            `),$.forEach(_);for(let re=0;re<x.length;re+=1)x[re].l(F);F.forEach(_),v=de(I),S&&S.l(I),y=Ae(),this.h()},h(){f(t,"dy",r=-e[5]+120),f(t,"class","title svelte-1w67vw4"),f(s,"x",e[3].labelX),f(s,"class","label left-align svelte-1w67vw4"),f(a,"x",e[3].labelX),f(a,"dy","25"),f(a,"class","value left-align svelte-1w67vw4"),f(o,"transform",g="translate(0, "+(-e[5]+170)+")"),f(p,"x",e[3].labelX),f(p,"class","label left-align svelte-1w67vw4"),f(c,"transform",b="translate(0, "+(-e[5]+230)+")")},m(I,M){U(I,t,M),m(t,n),U(I,i,M),U(I,o,M),m(o,s),m(s,l),m(o,a),m(a,h),U(I,d,M),U(I,c,M),m(c,p),m(p,w);for(let L=0;L<x.length;L+=1)x[L]&&x[L].m(c,null);U(I,v,M),S&&S.m(I,M),U(I,y,M)},p(I,M){if(M&32&&r!==(r=-I[5]+120)&&f(t,"dy",r),M&1&&u!==(u=(I[0].preferred_username||I[0].name||I[0].nickname||"User")+"")&&ce(h,u),M&32&&g!==(g="translate(0, "+(-I[5]+170)+")")&&f(o,"transform",g),M&4){N=Tt(I[2]);let L;for(L=0;L<N.length;L+=1){const X=fo(I,N,L);x[L]?x[L].p(X,M):(x[L]=co(X),x[L].c(),x[L].m(c,null))}for(;L<x.length;L+=1)x[L].d(1);x.length=N.length}M&32&&b!==(b="translate(0, "+(-I[5]+230)+")")&&f(c,"transform",b),I[1]?S?S.p(I,M):(S=ho(I),S.c(),S.m(y.parentNode,y)):S&&(S.d(1),S=null)},d(I){I&&(_(t),_(i),_(o),_(d),_(c),_(v),_(y)),Dr(x,I),S&&S.d(I)}}}function Pc(e){let t,n;return t=new ur({props:{style:e[4],$$slots:{default:[Dc,({radius:r,isHovered:i})=>({5:r,6:i}),({radius:r,isHovered:i})=>(r?32:0)|(i?64:0)]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&1063&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function Cc(e,t,n){const r=e.split(" "),i=[];let o="",s=0;const l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("font-family","Orbitron"),l.setAttribute("font-size","14px"),l.setAttribute("x","-1000"),l.setAttribute("y","-1000");const a=document.querySelector("svg");return a&&(a.appendChild(l),r.forEach(u=>{const h=o+(o?" ":"")+u;l.textContent=h,l.getComputedTextLength()>t&&o!==""?(i.push({text:o,x:n,dy:s*20}),o=u,s++):o=h}),o&&i.push({text:o,x:n,dy:s*20}),a.removeChild(l)),i}function Lc(e,t,n){let r,{node:i}=t,{userActivity:o}=t;const s={labelX:-200,equalsX:0,valueX:30},l={previewSize:H.SIZES.DASHBOARD.size,detailSize:H.SIZES.DASHBOARD.size,colors:H.COLORS.DASHBOARD,padding:H.PADDING,lineHeight:H.LINE_HEIGHT,stroke:H.STROKE};return e.$$set=a=>{"node"in a&&n(0,i=a.node),"userActivity"in a&&n(1,o=a.userActivity)},e.$$.update=()=>{e.$$.dirty&1&&n(2,r=Cc(i.mission_statement||"no mission statement set.",420,s.labelX))},[i,o,r,s,l]}class Fc extends Ie{constructor(t){super(),xe(this,t,Lc,Pc,Ne,{node:0,userActivity:1})}}async function Vc(e){try{console.log("Updating user profile...");const t=await qe("/users/update-profile",{method:"POST",body:JSON.stringify(e)});return console.log("User profile updated:",t),t}catch(t){return console.error("Error updating user profile:",t),null}}const q={layout:{leftAlign:-200,fieldWidth:400,buttonWidth:150,verticalSpacing:{betweenFields:75,labelToInput:10}},inputs:{background:"rgba(0, 0, 0, 0.9)",border:{default:"2px solid rgba(255, 255, 255, 0.3)",focus:"3px solid rgba(255, 255, 255, 0.8)",error:"2px solid #ff4444"},text:"white",borderRadius:"4px",padding:"8px",font:{family:"Orbitron",size:"0.9rem"},shadow:{focus:"0 0 0 1px rgba(255, 255, 255, 0.3)"}},buttons:{save:{background:"rgba(74, 144, 226, 0.3)",border:"1px solid rgba(74, 144, 226, 0.4)",hoverBg:"rgba(74, 144, 226, 0.4)"}},text:{label:{size:"14px",color:"rgba(255, 255, 255, 0.7)"},characterCount:{size:"12px",color:"rgba(255, 255, 255, 0.6)",warning:"#ffd700",error:"#ff4444"}}};function zc(e){let t,n,r,i,o,s,l;return{c(){t=A("text"),n=V("Username:"),r=he(),i=A("foreignObject"),o=J("input"),this.h()},l(a){t=R(a,"text",{x:!0,class:!0});var u=E(t);n=z(u,"Username:"),u.forEach(_),r=de(a),i=R(a,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var h=E(i);o=ee(h,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),h.forEach(_),this.h()},h(){f(t,"x",q.layout.leftAlign),f(t,"class","label svelte-1n43n7y"),f(o,"type","text"),f(o,"id","username-input"),f(o,"placeholder","Enter username"),f(o,"class","input"),o.disabled=e[1],f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","40")},m(a,u){U(a,t,u),m(t,n),U(a,r,u),U(a,i,u),m(i,o),Le(o,e[0]),s||(l=be(o,"input",e[2]),s=!0)},p(a,[u]){u&2&&(o.disabled=a[1]),u&1&&o.value!==a[0]&&Le(o,a[0])},i:Re,o:Re,d(a){a&&(_(t),_(r),_(i)),s=!1,l()}}}function Uc(e,t,n){let{username:r=""}=t,{disabled:i=!1}=t;function o(){r=this.value,n(0,r)}return e.$$set=s=>{"username"in s&&n(0,r=s.username),"disabled"in s&&n(1,i=s.disabled)},[r,i,o]}class Gc extends Ie{constructor(t){super(),xe(this,t,Uc,zc,Ne,{username:0,disabled:1})}}function Wc(e){let t,n,r,i,o,s,l;return{c(){t=A("g"),n=A("text"),r=V(`Email:
    `),i=A("foreignObject"),o=J("input"),this.h()},l(a){t=R(a,"g",{});var u=E(t);n=R(u,"text",{x:!0,y:!0,class:!0});var h=E(n);r=z(h,`Email:
    `),h.forEach(_),i=R(u,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=E(i);o=ee(g,"INPUT",{type:!0,placeholder:!0,class:!0}),g.forEach(_),u.forEach(_),this.h()},h(){f(n,"x",q.layout.leftAlign),f(n,"y",q.layout.verticalSpacing.betweenFields),f(n,"class","label svelte-1jbaojg"),f(o,"type","email"),f(o,"placeholder","Enter email"),f(o,"class","input"),o.disabled=e[1],f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.betweenFields+q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","40")},m(a,u){U(a,t,u),m(t,n),m(n,r),m(t,i),m(i,o),Le(o,e[0]),s||(l=be(o,"input",e[2]),s=!0)},p(a,[u]){u&2&&(o.disabled=a[1]),u&1&&o.value!==a[0]&&Le(o,a[0])},i:Re,o:Re,d(a){a&&_(t),s=!1,l()}}}function Yc(e,t,n){let{email:r=""}=t,{disabled:i=!1}=t;function o(){r=this.value,n(0,r)}return e.$$set=s=>{"email"in s&&n(0,r=s.email),"disabled"in s&&n(1,i=s.disabled)},[r,i,o]}class Bc extends Ie{constructor(t){super(),xe(this,t,Yc,Wc,Ne,{email:0,disabled:1})}}function Xc(e){let t,n,r,i,o,s,l,a,u,h;return{c(){t=A("g"),n=A("text"),r=V(`Mission Statement:
    `),i=A("foreignObject"),o=J("textarea"),s=A("text"),l=V(e[2]),a=V(" characters remaining"),this.h()},l(g){t=R(g,"g",{});var d=E(t);n=R(d,"text",{x:!0,y:!0,class:!0});var c=E(n);r=z(c,`Mission Statement:
    `),c.forEach(_),i=R(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var p=E(i);o=ee(p,"TEXTAREA",{id:!0,placeholder:!0,class:!0,maxlength:!0}),E(o).forEach(_),p.forEach(_),s=R(d,"text",{x:!0,y:!0,class:!0});var w=E(s);l=z(w,e[2]),a=z(w," characters remaining"),w.forEach(_),d.forEach(_),this.h()},h(){f(n,"x",q.layout.leftAlign),f(n,"y",q.layout.verticalSpacing.betweenFields*2),f(n,"class","label svelte-34co8w"),f(o,"id","mission-statement-input"),f(o,"placeholder","Enter mission statement"),f(o,"class","textarea"),f(o,"maxlength",gs),o.disabled=e[1],f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.betweenFields*2+q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","150"),f(s,"x",q.layout.leftAlign+q.layout.fieldWidth),f(s,"y",q.layout.verticalSpacing.betweenFields*2+145),f(s,"class","character-count svelte-34co8w"),ge(s,"near-limit",e[4]),ge(s,"over-limit",e[3])},m(g,d){U(g,t,d),m(t,n),m(n,r),m(t,i),m(i,o),Le(o,e[0]),m(t,s),m(s,l),m(s,a),u||(h=be(o,"input",e[5]),u=!0)},p(g,[d]){d&2&&(o.disabled=g[1]),d&1&&Le(o,g[0]),d&4&&ce(l,g[2]),d&16&&ge(s,"near-limit",g[4]),d&8&&ge(s,"over-limit",g[3])},i:Re,o:Re,d(g){g&&_(t),u=!1,h()}}}const gs=280;function Hc(e,t,n){let r,i,o,{statement:s=""}=t,{disabled:l=!1}=t;function a(){s=this.value,n(0,s)}return e.$$set=u=>{"statement"in u&&n(0,s=u.statement),"disabled"in u&&n(1,l=u.disabled)},e.$$.update=()=>{e.$$.dirty&1&&n(2,r=gs-s.length),e.$$.dirty&4&&n(4,i=r<=20),e.$$.dirty&4&&n(3,o=r<0)},[s,l,r,o,i,a]}class jc extends Ie{constructor(t){super(),xe(this,t,Hc,Xc,Ne,{statement:0,disabled:1})}}function qc(e){let t;return{c(){t=V("Save Changes")},l(n){t=z(n,"Save Changes")},m(n,r){U(n,t,r)},d(n){n&&_(t)}}}function $c(e){let t;return{c(){t=V("Loading...")},l(n){t=z(n,"Loading...")},m(n,r){U(n,t,r)},d(n){n&&_(t)}}}function Zc(e){let t,n,r,i;function o(a,u){return a[0]?$c:qc}let s=o(e),l=s(e);return{c(){t=A("foreignObject"),n=J("button"),l.c(),this.h()},l(a){t=R(a,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var u=E(t);n=ee(u,"BUTTON",{class:!0});var h=E(n);l.l(h),h.forEach(_),u.forEach(_),this.h()},h(){f(n,"class","save-button"),n.disabled=e[1],f(t,"x",-q.layout.buttonWidth/2),f(t,"y",q.layout.verticalSpacing.betweenFields*2+190),f(t,"width",q.layout.buttonWidth),f(t,"height","40")},m(a,u){U(a,t,u),m(t,n),l.m(n,null),r||(i=be(n,"click",function(){ti(e[2])&&e[2].apply(this,arguments)}),r=!0)},p(a,[u]){e=a,s!==(s=o(e))&&(l.d(1),l=s(e),l&&(l.c(),l.m(n,null))),u&2&&(n.disabled=e[1])},i:Re,o:Re,d(a){a&&_(t),l.d(),r=!1,i()}}}function Kc(e,t,n){let{loading:r}=t,{disabled:i}=t,{onClick:o}=t;return e.$$set=s=>{"loading"in s&&n(0,r=s.loading),"disabled"in s&&n(1,i=s.disabled),"onClick"in s&&n(2,o=s.onClick)},[r,i,o]}class Qc extends Ie{constructor(t){super(),xe(this,t,Kc,Zc,Ne,{loading:0,disabled:1,onClick:2})}}function go(e){let t,n;return{c(){t=A("text"),n=V("Profile updated successfully! Redirecting..."),this.h()},l(r){t=R(r,"text",{x:!0,y:!0,class:!0});var i=E(t);n=z(i,"Profile updated successfully! Redirecting..."),i.forEach(_),this.h()},h(){f(t,"x","0"),f(t,"y",q.layout.verticalSpacing.betweenFields*2+190),f(t,"class","success svelte-f1lcoa")},m(r,i){U(r,t,i),m(t,n)},d(r){r&&_(t)}}}function Jc(e){let t,n,r,i,o,s,l,a,u,h,g,d,c,p;function w(I){e[8](I)}let b={disabled:e[4]};e[0]!==void 0&&(b.username=e[0]),s=new Gc({props:b}),Xe.push(()=>vn(s,"username",w));function v(I){e[9](I)}let y={disabled:e[4]};e[1]!==void 0&&(y.email=e[1]),a=new Bc({props:y}),Xe.push(()=>vn(a,"email",v));function N(I){e[10](I)}let x={disabled:e[4]};e[2]!==void 0&&(x.statement=e[2]),h=new jc({props:x}),Xe.push(()=>vn(h,"statement",N)),d=new Qc({props:{loading:e[4],disabled:e[4],onClick:e[6]}});let S=e[3]&&go();return{c(){t=A("text"),n=V("Edit Profile"),i=he(),o=A("g"),se(s.$$.fragment),se(a.$$.fragment),se(h.$$.fragment),se(d.$$.fragment),S&&S.c(),this.h()},l(I){t=R(I,"text",{dy:!0,class:!0});var M=E(t);n=z(M,"Edit Profile"),M.forEach(_),i=de(I),o=R(I,"g",{transform:!0});var L=E(o);ae(s.$$.fragment,L),ae(a.$$.fragment,L),ae(h.$$.fragment,L),ae(d.$$.fragment,L),S&&S.l(L),L.forEach(_),this.h()},h(){f(t,"dy",r=-e[11]+120),f(t,"class","title svelte-f1lcoa"),f(o,"transform",c="translate(0, "+(-e[11]+150)+")")},m(I,M){U(I,t,M),m(t,n),U(I,i,M),U(I,o,M),le(s,o,null),le(a,o,null),le(h,o,null),le(d,o,null),S&&S.m(o,null),p=!0},p(I,M){(!p||M&2048&&r!==(r=-I[11]+120))&&f(t,"dy",r);const L={};M&16&&(L.disabled=I[4]),!l&&M&1&&(l=!0,L.username=I[0],mn(()=>l=!1)),s.$set(L);const X={};M&16&&(X.disabled=I[4]),!u&&M&2&&(u=!0,X.email=I[1],mn(()=>u=!1)),a.$set(X);const C={};M&16&&(C.disabled=I[4]),!g&&M&4&&(g=!0,C.statement=I[2],mn(()=>g=!1)),h.$set(C);const F={};M&16&&(F.loading=I[4]),M&16&&(F.disabled=I[4]),d.$set(F),I[3]?S||(S=go(),S.c(),S.m(o,null)):S&&(S.d(1),S=null),(!p||M&2048&&c!==(c="translate(0, "+(-I[11]+150)+")"))&&f(o,"transform",c)},i(I){p||(Y(s.$$.fragment,I),Y(a.$$.fragment,I),Y(h.$$.fragment,I),Y(d.$$.fragment,I),p=!0)},o(I){B(s.$$.fragment,I),B(a.$$.fragment,I),B(h.$$.fragment,I),B(d.$$.fragment,I),p=!1},d(I){I&&(_(t),_(i),_(o)),ue(s),ue(a),ue(h),ue(d),S&&S.d()}}}function eh(e){let t,n;return t=new ur({props:{style:e[5],$$slots:{default:[Jc,({radius:r,isHovered:i})=>({11:r,12:i}),({radius:r,isHovered:i})=>(r?2048:0)|(i?4096:0)]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&10271&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function th(e,t,n){let{node:r}=t,i=r.preferred_username||"",o=r.email||"",s=r.mission_statement||"",l=!1,a=!1;const u={previewSize:H.SIZES.WORD.detail,detailSize:H.SIZES.WORD.detail,colors:H.COLORS.WORD,padding:H.PADDING,lineHeight:H.LINE_HEIGHT,stroke:H.STROKE};async function h(){n(4,a=!0);try{const p=await Vc({sub:r.sub,preferred_username:i,email:o,mission_statement:s});p&&(yn.set(p),n(3,l=!0),setTimeout(()=>yt("/graph/dashboard"),2e3))}catch(p){console.error("Failed to update profile:",p)}finally{n(4,a=!1)}}function g(p){i=p,n(0,i)}function d(p){o=p,n(1,o)}function c(p){s=p,n(2,s)}return e.$$set=p=>{"node"in p&&n(7,r=p.node)},[i,o,s,l,a,u,h,r,g,d,c]}class nh extends Ie{constructor(t){super(),xe(this,t,th,eh,Ne,{node:7})}}function _o(e){let t,n,r,i,o,s,l;return{c(){t=A("foreignObject"),n=J("div"),r=J("button"),i=V(e[2]),o=he(),this.h()},l(a){t=R(a,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var u=E(t);n=ee(u,"DIV",{class:!0});var h=E(n);r=ee(h,"BUTTON",{class:!0});var g=E(r);i=z(g,e[2]),g.forEach(_),o=de(h),h.forEach(_),u.forEach(_),this.h()},h(){f(r,"class","form-button"),r.disabled=e[4],f(n,"class","button-wrapper svelte-15go4qa"),f(t,"x","0"),f(t,"y","0"),f(t,"width",q.layout.buttonWidth),f(t,"height","50")},m(a,u){U(a,t,u),m(t,n),m(n,r),m(r,i),m(n,o),s||(l=be(r,"click",function(){ti(e[0])&&e[0].apply(this,arguments)}),s=!0)},p(a,u){e=a,u&4&&ce(i,e[2]),u&16&&(r.disabled=e[4])},d(a){a&&_(t),s=!1,l()}}}function rh(e){let t;return{c(){t=V(e[3])},l(n){t=z(n,e[3])},m(n,r){U(n,t,r)},p(n,r){r&8&&ce(t,n[3])},d(n){n&&_(t)}}}function ih(e){let t;return{c(){t=V("Loading...")},l(n){t=z(n,"Loading...")},m(n,r){U(n,t,r)},p:Re,d(n){n&&_(t)}}}function oh(e){let t,n,r,i,o,s,l,a,u=e[6]&&_o(e);function h(c,p){return c[4]?ih:rh}let g=h(e),d=g(e);return{c(){t=A("g"),u&&u.c(),n=A("foreignObject"),r=J("div"),i=J("button"),d.c(),this.h()},l(c){t=R(c,"g",{transform:!0});var p=E(t);u&&u.l(p),n=R(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var w=E(n);r=ee(w,"DIV",{class:!0});var b=E(r);i=ee(b,"BUTTON",{class:!0});var v=E(i);d.l(v),v.forEach(_),b.forEach(_),w.forEach(_),p.forEach(_),this.h()},h(){f(i,"class","form-button primary"),i.disabled=o=e[4]||e[5],f(r,"class","button-wrapper svelte-15go4qa"),f(n,"x",s=e[6]?q.layout.fieldWidth-q.layout.buttonWidth:q.layout.fieldWidth/2-q.layout.buttonWidth/2),f(n,"y","0"),f(n,"width",q.layout.buttonWidth),f(n,"height","50"),f(t,"transform","translate("+q.layout.leftAlign+", 0)")},m(c,p){U(c,t,p),u&&u.m(t,null),m(t,n),m(n,r),m(r,i),d.m(i,null),l||(a=be(i,"click",function(){ti(e[1])&&e[1].apply(this,arguments)}),l=!0)},p(c,[p]){e=c,e[6]?u?u.p(e,p):(u=_o(e),u.c(),u.m(t,n)):u&&(u.d(1),u=null),g===(g=h(e))&&d?d.p(e,p):(d.d(1),d=g(e),d&&(d.c(),d.m(i,null))),p&48&&o!==(o=e[4]||e[5])&&(i.disabled=o),p&64&&s!==(s=e[6]?q.layout.fieldWidth-q.layout.buttonWidth:q.layout.fieldWidth/2-q.layout.buttonWidth/2)&&f(n,"x",s)},i:Re,o:Re,d(c){c&&_(t),u&&u.d(),d.d(),l=!1,a()}}}function sh(e,t,n){let{onBack:r}=t,{onNext:i}=t,{backLabel:o="Back"}=t,{nextLabel:s="Next"}=t,{loading:l=!1}=t,{nextDisabled:a=!1}=t,{showBackButton:u=!0}=t;return e.$$set=h=>{"onBack"in h&&n(0,r=h.onBack),"onNext"in h&&n(1,i=h.onNext),"backLabel"in h&&n(2,o=h.backLabel),"nextLabel"in h&&n(3,s=h.nextLabel),"loading"in h&&n(4,l=h.loading),"nextDisabled"in h&&n(5,a=h.nextDisabled),"showBackButton"in h&&n(6,u=h.showBackButton)},[r,i,o,s,l,a,u]}class fr extends Ie{constructor(t){super(),xe(this,t,sh,oh,Ne,{onBack:0,onNext:1,backLabel:2,nextLabel:3,loading:4,nextDisabled:5,showBackButton:6})}}function ah(e){let t,n,r,i,o,s,l="Choose type...",a,u="Word",h,g="Statement",d,c="Quantity",p,w,b,v,y;return w=new fr({props:{onBack:e[3],onNext:e[6],nextLabel:"Continue",nextDisabled:!e[0]||e[1],showBackButton:!1}}),{c(){t=A("g"),n=A("text"),r=V(`Select Node Type
    `),i=A("foreignObject"),o=J("select"),s=J("option"),s.textContent=l,a=J("option"),a.textContent=u,h=J("option"),h.textContent=g,d=J("option"),d.textContent=c,p=A("g"),se(w.$$.fragment),this.h()},l(N){t=R(N,"g",{});var x=E(t);n=R(x,"text",{x:!0,y:!0,class:!0});var S=E(n);r=z(S,`Select Node Type
    `),S.forEach(_),i=R(x,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var I=E(i);o=ee(I,"SELECT",{class:!0});var M=E(o);s=ee(M,"OPTION",{"data-svelte-h":!0}),Et(s)!=="svelte-3gv1dn"&&(s.textContent=l),a=ee(M,"OPTION",{"data-svelte-h":!0}),Et(a)!=="svelte-183aq5q"&&(a.textContent=u),h=ee(M,"OPTION",{"data-svelte-h":!0}),Et(h)!=="svelte-1wqksxw"&&(h.textContent=g),d=ee(M,"OPTION",{"data-svelte-h":!0}),Et(d)!=="svelte-b76txe"&&(d.textContent=c),M.forEach(_),I.forEach(_),p=R(x,"g",{transform:!0});var L=E(p);ae(w.$$.fragment,L),L.forEach(_),x.forEach(_),this.h()},h(){f(n,"x",q.layout.leftAlign),f(n,"y","0"),f(n,"class","form-label svelte-118fzwu"),s.__value="",Le(s,s.__value),a.__value="word",Le(a,a.__value),h.__value="statement",Le(h,h.__value),d.__value="quantity",Le(d,d.__value),f(o,"class","form-input"),o.disabled=e[1],e[0]===void 0&&bs(()=>e[5].call(o)),f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","40"),f(p,"transform","translate(0, "+q.layout.verticalSpacing.betweenFields+")")},m(N,x){U(N,t,x),m(t,n),m(n,r),m(t,i),m(i,o),m(o,s),m(o,a),m(o,h),m(o,d),Ei(o,e[0],!0),m(t,p),le(w,p,null),b=!0,v||(y=[be(o,"change",e[5]),be(o,"change",e[4])],v=!0)},p(N,[x]){(!b||x&2)&&(o.disabled=N[1]),x&1&&Ei(o,N[0]);const S={};x&3&&(S.nextDisabled=!N[0]||N[1]),w.$set(S)},i(N){b||(Y(w.$$.fragment,N),b=!0)},o(N){B(w.$$.fragment,N),b=!1},d(N){N&&_(t),ue(w),v=!1,jt(y)}}}function lh(e,t,n){let{nodeType:r=""}=t,{disabled:i=!1}=t;const o=rt(),s=()=>{};function l(){o("typeChange",{type:r})}function a(){r=Es(this),n(0,r)}const u=()=>o("proceed");return e.$$set=h=>{"nodeType"in h&&n(0,r=h.nodeType),"disabled"in h&&n(1,i=h.disabled)},[r,i,o,s,l,a,u]}class uh extends Ie{constructor(t){super(),xe(this,t,lh,ah,Ne,{nodeType:0,disabled:1})}}function po(e){let t,n,r=(e[0]||e[1])+"",i;return{c(){t=A("g"),n=A("text"),i=V(r),this.h()},l(o){t=R(o,"g",{transform:!0});var s=E(t);n=R(s,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var l=E(n);i=z(l,r),l.forEach(_),s.forEach(_),this.h()},h(){f(n,"class","message svelte-1sqlw30"),f(n,"x",q.layout.fieldWidth/2),f(n,"y","0"),f(n,"text-anchor","middle"),ge(n,"error",e[0]),ge(n,"success",e[1]),f(t,"transform","translate("+q.layout.leftAlign+", 0)")},m(o,s){U(o,t,s),m(t,n),m(n,i)},p(o,s){s&3&&r!==(r=(o[0]||o[1])+"")&&ce(i,r),s&1&&ge(n,"error",o[0]),s&2&&ge(n,"success",o[1])},d(o){o&&_(t)}}}function fh(e){let t,n=(e[0]||e[1])&&po(e);return{c(){n&&n.c(),t=Ae()},l(r){n&&n.l(r),t=Ae()},m(r,i){n&&n.m(r,i),U(r,t,i)},p(r,[i]){r[0]||r[1]?n?n.p(r,i):(n=po(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:Re,o:Re,d(r){r&&_(t),n&&n.d(r)}}}function ch(e,t,n){let{errorMessage:r=null}=t,{successMessage:i=null}=t;return e.$$set=o=>{"errorMessage"in o&&n(0,r=o.errorMessage),"successMessage"in o&&n(1,i=o.successMessage)},[r,i]}class hi extends Ie{constructor(t){super(),xe(this,t,ch,fh,Ne,{errorMessage:0,successMessage:1})}}function mo(e){let t,n,r;return n=new hi({props:{errorMessage:e[3]}}),{c(){t=A("g"),se(n.$$.fragment),this.h()},l(i){t=R(i,"g",{transform:!0});var o=E(t);ae(n.$$.fragment,o),o.forEach(_),this.h()},h(){f(t,"transform","translate(0, "+(q.layout.verticalSpacing.labelToInput+50)+")")},m(i,o){U(i,t,o),le(n,t,null),r=!0},p(i,o){const s={};o&8&&(s.errorMessage=i[3]),n.$set(s)},i(i){r||(Y(n.$$.fragment,i),r=!0)},o(i){B(n.$$.fragment,i),r=!1},d(i){i&&_(t),ue(n)}}}function hh(e){let t,n,r,i,o,s,l,a,u,h,g=e[3]&&mo(e);return l=new fr({props:{onBack:e[7],onNext:e[5],nextLabel:e[2]?"Checking...":"Check Word",loading:e[2],nextDisabled:!e[0].trim()||e[1]}}),{c(){t=A("g"),n=A("text"),r=V(`Word
    `),i=A("foreignObject"),o=J("input"),g&&g.c(),s=A("g"),se(l.$$.fragment),this.h()},l(d){t=R(d,"g",{});var c=E(t);n=R(c,"text",{x:!0,y:!0,class:!0});var p=E(n);r=z(p,`Word
    `),p.forEach(_),i=R(c,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var w=E(i);o=ee(w,"INPUT",{type:!0,class:!0,placeholder:!0}),w.forEach(_),g&&g.l(c),s=R(c,"g",{transform:!0});var b=E(s);ae(l.$$.fragment,b),b.forEach(_),c.forEach(_),this.h()},h(){f(n,"x",q.layout.leftAlign),f(n,"y","0"),f(n,"class","form-label svelte-1x2lj8g"),f(o,"type","text"),f(o,"class","form-input"),f(o,"placeholder","Enter important keyword for ProjectZer0"),o.disabled=e[1],ge(o,"error",e[3]),f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","40"),f(s,"transform","translate(0, "+q.layout.verticalSpacing.betweenFields+")")},m(d,c){U(d,t,c),m(t,n),m(n,r),m(t,i),m(i,o),Le(o,e[0]),g&&g.m(t,null),m(t,s),le(l,s,null),a=!0,u||(h=be(o,"input",e[6]),u=!0)},p(d,[c]){(!a||c&2)&&(o.disabled=d[1]),c&1&&o.value!==d[0]&&Le(o,d[0]),(!a||c&8)&&ge(o,"error",d[3]),d[3]?g?(g.p(d,c),c&8&&Y(g,1)):(g=mo(d),g.c(),Y(g,1),g.m(t,s)):g&&(et(),B(g,1,1,()=>{g=null}),tt());const p={};c&4&&(p.nextLabel=d[2]?"Checking...":"Check Word"),c&4&&(p.loading=d[2]),c&3&&(p.nextDisabled=!d[0].trim()||d[1]),l.$set(p)},i(d){a||(Y(g),Y(l.$$.fragment,d),a=!0)},o(d){B(g),B(l.$$.fragment,d),a=!1},d(d){d&&_(t),g&&g.d(),ue(l),u=!1,h()}}}function dh(e,t,n){let{word:r=""}=t,{disabled:i=!1}=t;const o=rt();let s=!1,l=null;async function a(){if(!r.trim()){n(3,l="Please enter a word");return}n(2,s=!0),n(3,l=null);try{if((await qe(`/nodes/word/check/${encodeURIComponent(r.trim())}`)).exists){const d=await qe(`/nodes/word/${encodeURIComponent(r.trim())}`);n(3,l=`Word "${r.trim()}" already exists. Redirecting to word page...`),On.set(d),setTimeout(()=>{yt("/graph/word")},2e3)}else o("proceed")}catch(g){n(3,l=g instanceof Error?g.message:"Failed to check word existence")}finally{n(2,s=!1)}}function u(){r=this.value,n(0,r)}const h=()=>o("back");return e.$$set=g=>{"word"in g&&n(0,r=g.word),"disabled"in g&&n(1,i=g.disabled)},[r,i,s,l,o,a,u,h]}class gh extends Ie{constructor(t){super(),xe(this,t,dh,hh,Ne,{word:0,disabled:1})}}const je={MAX_DEFINITION_LENGTH:280,MAX_COMMENT_LENGTH:280};function _h(e){let t,n,r,i,o,s,l=je.MAX_DEFINITION_LENGTH-e[0].length+"",a,u,h,g,d,c,p;return g=new fr({props:{onBack:e[6],onNext:e[7],nextDisabled:e[1]||e[2]}}),{c(){t=A("g"),n=A("text"),r=V(`Definition (optional)
    `),i=A("foreignObject"),o=J("textarea"),s=A("text"),a=V(l),u=V(` characters remaining
    `),h=A("g"),se(g.$$.fragment),this.h()},l(w){t=R(w,"g",{});var b=E(t);n=R(b,"text",{x:!0,y:!0,class:!0});var v=E(n);r=z(v,`Definition (optional)
    `),v.forEach(_),i=R(b,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var y=E(i);o=ee(y,"TEXTAREA",{class:!0,placeholder:!0}),E(o).forEach(_),y.forEach(_),s=R(b,"text",{x:!0,y:!0,class:!0,"text-anchor":!0});var N=E(s);a=z(N,l),u=z(N,` characters remaining
    `),N.forEach(_),h=R(b,"g",{transform:!0});var x=E(h);ae(g.$$.fragment,x),x.forEach(_),b.forEach(_),this.h()},h(){f(n,"x",q.layout.leftAlign),f(n,"y","-20"),f(n,"class","form-label svelte-oc3aop"),f(o,"class","form-textarea"),f(o,"placeholder","Enter your definition of this word within the context of its use in ProjectZer0."),o.disabled=e[1],ge(o,"error",e[2]),f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","120"),f(s,"x",q.layout.leftAlign+q.layout.fieldWidth-90),f(s,"y",q.layout.verticalSpacing.labelToInput+160),f(s,"class","character-count svelte-oc3aop"),f(s,"text-anchor","end"),ge(s,"near-limit",e[0].length>je.MAX_DEFINITION_LENGTH-20),ge(s,"over-limit",e[2]),f(h,"transform","translate(0, "+(q.layout.verticalSpacing.betweenFields+110)+")")},m(w,b){U(w,t,b),m(t,n),m(n,r),m(t,i),m(i,o),Le(o,e[0]),m(t,s),m(s,a),m(s,u),m(t,h),le(g,h,null),d=!0,c||(p=[be(o,"input",e[5]),be(o,"input",e[4])],c=!0)},p(w,[b]){(!d||b&2)&&(o.disabled=w[1]),b&1&&Le(o,w[0]),(!d||b&4)&&ge(o,"error",w[2]),(!d||b&1)&&l!==(l=je.MAX_DEFINITION_LENGTH-w[0].length+"")&&ce(a,l),(!d||b&1)&&ge(s,"near-limit",w[0].length>je.MAX_DEFINITION_LENGTH-20),(!d||b&4)&&ge(s,"over-limit",w[2]);const v={};b&6&&(v.nextDisabled=w[1]||w[2]),g.$set(v)},i(w){d||(Y(g.$$.fragment,w),d=!0)},o(w){B(g.$$.fragment,w),d=!1},d(w){w&&_(t),ue(g),c=!1,jt(p)}}}function ph(e,t,n){let r,{definition:i=""}=t,{disabled:o=!1}=t;const s=rt();function l(g){const d=g.target;d.value.length>je.MAX_DEFINITION_LENGTH&&n(0,i=d.value.slice(0,je.MAX_DEFINITION_LENGTH))}function a(){i=this.value,n(0,i)}const u=()=>s("back"),h=()=>s("proceed");return e.$$set=g=>{"definition"in g&&n(0,i=g.definition),"disabled"in g&&n(1,o=g.disabled)},e.$$.update=()=>{e.$$.dirty&1&&n(2,r=i.length>je.MAX_DEFINITION_LENGTH)},[i,o,r,s,l,a,u,h]}class mh extends Ie{constructor(t){super(),xe(this,t,ph,_h,Ne,{definition:0,disabled:1})}}function vh(e){let t,n,r,i,o,s,l=je.MAX_COMMENT_LENGTH-e[0].length+"",a,u,h,g,d,c,p;return g=new fr({props:{onBack:e[7],onNext:e[8],nextLabel:"Review",nextDisabled:e[1]||e[3]}}),{c(){t=A("g"),n=A("text"),r=V(`Discussion (optional)
    `),i=A("foreignObject"),o=J("textarea"),s=A("text"),a=V(l),u=V(` characters remaining
    `),h=A("g"),se(g.$$.fragment),this.h()},l(w){t=R(w,"g",{});var b=E(t);n=R(b,"text",{x:!0,y:!0,class:!0});var v=E(n);r=z(v,`Discussion (optional)
    `),v.forEach(_),i=R(b,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var y=E(i);o=ee(y,"TEXTAREA",{class:!0,placeholder:!0}),E(o).forEach(_),y.forEach(_),s=R(b,"text",{x:!0,y:!0,class:!0,"text-anchor":!0});var N=E(s);a=z(N,l),u=z(N,` characters remaining
    `),N.forEach(_),h=R(b,"g",{transform:!0});var x=E(h);ae(g.$$.fragment,x),x.forEach(_),b.forEach(_),this.h()},h(){f(n,"x",q.layout.leftAlign),f(n,"y","-20"),f(n,"class","form-label svelte-uicven"),f(o,"class","form-textarea"),f(o,"placeholder",e[2]),o.disabled=e[1],ge(o,"error",e[3]),f(i,"x",q.layout.leftAlign),f(i,"y",q.layout.verticalSpacing.labelToInput),f(i,"width",q.layout.fieldWidth),f(i,"height","120"),f(s,"x",q.layout.leftAlign+q.layout.fieldWidth-90),f(s,"y",q.layout.verticalSpacing.labelToInput+160),f(s,"class","character-count svelte-uicven"),f(s,"text-anchor","end"),ge(s,"near-limit",e[0].length>je.MAX_COMMENT_LENGTH-20),ge(s,"over-limit",e[3]),f(h,"transform","translate(0, "+(q.layout.verticalSpacing.betweenFields+110)+")")},m(w,b){U(w,t,b),m(t,n),m(n,r),m(t,i),m(i,o),Le(o,e[0]),m(t,s),m(s,a),m(s,u),m(t,h),le(g,h,null),d=!0,c||(p=[be(o,"input",e[6]),be(o,"input",e[5])],c=!0)},p(w,[b]){(!d||b&4)&&f(o,"placeholder",w[2]),(!d||b&2)&&(o.disabled=w[1]),b&1&&Le(o,w[0]),(!d||b&8)&&ge(o,"error",w[3]),(!d||b&1)&&l!==(l=je.MAX_COMMENT_LENGTH-w[0].length+"")&&ce(a,l),(!d||b&1)&&ge(s,"near-limit",w[0].length>je.MAX_COMMENT_LENGTH-20),(!d||b&8)&&ge(s,"over-limit",w[3]);const v={};b&10&&(v.nextDisabled=w[1]||w[3]),g.$set(v)},i(w){d||(Y(g.$$.fragment,w),d=!0)},o(w){B(g.$$.fragment,w),d=!1},d(w){w&&_(t),ue(g),c=!1,jt(p)}}}function wh(e,t,n){let r,{discussion:i=""}=t,{disabled:o=!1}=t,{placeholder:s="Start a discussion around this word and its definition."}=t;const l=rt();function a(d){const c=d.target;c.value.length>je.MAX_COMMENT_LENGTH&&n(0,i=c.value.slice(0,je.MAX_COMMENT_LENGTH))}function u(){i=this.value,n(0,i)}const h=()=>l("back"),g=()=>l("proceed");return e.$$set=d=>{"discussion"in d&&n(0,i=d.discussion),"disabled"in d&&n(1,o=d.disabled),"placeholder"in d&&n(2,s=d.placeholder)},e.$$.update=()=>{e.$$.dirty&1&&n(3,r=i.length>je.MAX_COMMENT_LENGTH)},[i,o,s,r,l,a,u,h,g]}class yh extends Ie{constructor(t){super(),xe(this,t,wh,vh,Ne,{discussion:0,disabled:1,placeholder:2})}}function vo(e){let t,n,r="Definition:",i,o,s,l;return{c(){t=J("div"),n=J("span"),n.textContent=r,i=he(),o=J("div"),s=J("span"),l=V(e[2]),this.h()},l(a){t=ee(a,"DIV",{class:!0});var u=E(t);n=ee(u,"SPAN",{class:!0,"data-svelte-h":!0}),Et(n)!=="svelte-9jpw1w"&&(n.textContent=r),i=de(u),o=ee(u,"DIV",{class:!0});var h=E(o);s=ee(h,"SPAN",{class:!0});var g=E(s);l=z(g,e[2]),g.forEach(_),h.forEach(_),u.forEach(_),this.h()},h(){f(n,"class","label"),f(s,"class","value"),f(o,"class","scrollable-content svelte-1ss4kju"),f(t,"class","review-item")},m(a,u){U(a,t,u),m(t,n),m(t,i),m(t,o),m(o,s),m(s,l)},p(a,u){u&4&&ce(l,a[2])},d(a){a&&_(t)}}}function wo(e){let t,n,r="Discussion:",i,o,s,l;return{c(){t=J("div"),n=J("span"),n.textContent=r,i=he(),o=J("div"),s=J("span"),l=V(e[3]),this.h()},l(a){t=ee(a,"DIV",{class:!0});var u=E(t);n=ee(u,"SPAN",{class:!0,"data-svelte-h":!0}),Et(n)!=="svelte-1gdkpap"&&(n.textContent=r),i=de(u),o=ee(u,"DIV",{class:!0});var h=E(o);s=ee(h,"SPAN",{class:!0});var g=E(s);l=z(g,e[3]),g.forEach(_),h.forEach(_),u.forEach(_),this.h()},h(){f(n,"class","label"),f(s,"class","value"),f(o,"class","scrollable-content svelte-1ss4kju"),f(t,"class","review-item")},m(a,u){U(a,t,u),m(t,n),m(t,i),m(t,o),m(o,s),m(s,l)},p(a,u){u&8&&ce(l,a[3])},d(a){a&&_(t)}}}function yo(e){let t,n,r;return n=new hi({props:{errorMessage:e[7],successMessage:e[8]}}),{c(){t=A("g"),se(n.$$.fragment),this.h()},l(i){t=R(i,"g",{transform:!0});var o=E(t);ae(n.$$.fragment,o),o.forEach(_),this.h()},h(){f(t,"transform","translate(0, 240)")},m(i,o){U(i,t,o),le(n,t,null),r=!0},p(i,o){const s={};o&128&&(s.errorMessage=i[7]),o&256&&(s.successMessage=i[8]),n.$set(s)},i(i){r||(Y(n.$$.fragment,i),r=!0)},o(i){B(n.$$.fragment,i),r=!1},d(i){i&&_(t),ue(n)}}}function bh(e){let t,n,r,i,o,s="Word:",l,a,u,h,g,d,c,p,w,b,v,y="Publicly credit creation",N,x,S,I,M,L="Share on X (Twitter)",X,C,F,$,re,O,k=e[2]&&vo(e),T=e[3]&&wo(e),D=(e[7]||e[8])&&yo(e);return F=new fr({props:{onBack:e[14],onNext:e[10],nextLabel:e[6]?"Creating...":"Create Node",loading:e[6],nextDisabled:e[4]||e[6]}}),{c(){t=A("g"),n=A("foreignObject"),r=J("div"),i=J("div"),o=J("span"),o.textContent=s,l=he(),a=J("span"),u=V(e[1]),h=he(),k&&k.c(),g=he(),T&&T.c(),d=he(),c=J("div"),p=J("label"),w=J("input"),b=he(),v=J("span"),v.textContent=y,N=he(),x=J("label"),S=J("input"),I=he(),M=J("span"),M.textContent=L,X=he(),D&&D.c(),C=A("g"),se(F.$$.fragment),this.h()},l(P){t=R(P,"g",{});var W=E(t);n=R(W,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var j=E(n);r=ee(j,"DIV",{class:!0});var Q=E(r);i=ee(Q,"DIV",{class:!0});var ne=E(i);o=ee(ne,"SPAN",{class:!0,"data-svelte-h":!0}),Et(o)!=="svelte-19a2vmp"&&(o.textContent=s),l=de(ne),a=ee(ne,"SPAN",{class:!0});var _e=E(a);u=z(_e,e[1]),_e.forEach(_),ne.forEach(_),h=de(Q),k&&k.l(Q),g=de(Q),T&&T.l(Q),d=de(Q),c=ee(Q,"DIV",{class:!0});var pe=E(c);p=ee(pe,"LABEL",{class:!0});var we=E(p);w=ee(we,"INPUT",{type:!0}),b=de(we),v=ee(we,"SPAN",{"data-svelte-h":!0}),Et(v)!=="svelte-1kstmq"&&(v.textContent=y),we.forEach(_),N=de(pe),x=ee(pe,"LABEL",{class:!0});var me=E(x);S=ee(me,"INPUT",{type:!0}),I=de(me),M=ee(me,"SPAN",{"data-svelte-h":!0}),Et(M)!=="svelte-1rqtj98"&&(M.textContent=L),me.forEach(_),pe.forEach(_),X=de(Q),Q.forEach(_),j.forEach(_),D&&D.l(W),C=R(W,"g",{transform:!0});var ve=E(C);ae(F.$$.fragment,ve),ve.forEach(_),W.forEach(_),this.h()},h(){f(o,"class","label"),f(a,"class","value word-value"),f(i,"class","review-item word-item"),f(w,"type","checkbox"),w.disabled=e[6],f(p,"class","checkbox-label"),f(S,"type","checkbox"),S.disabled=e[6],f(x,"class","checkbox-label"),f(c,"class","options-grid"),f(r,"class","review-container"),f(n,"x",q.layout.leftAlign-30),f(n,"y","-40"),f(n,"width",q.layout.fieldWidth+60),f(n,"height","290"),f(C,"transform","translate(0, 270)")},m(P,W){U(P,t,W),m(t,n),m(n,r),m(r,i),m(i,o),m(i,l),m(i,a),m(a,u),m(r,h),k&&k.m(r,null),m(r,g),T&&T.m(r,null),m(r,d),m(r,c),m(c,p),m(p,w),w.checked=e[0],m(p,b),m(p,v),m(c,N),m(c,x),m(x,S),S.checked=e[5],m(x,I),m(x,M),m(r,X),D&&D.m(t,null),m(t,C),le(F,C,null),$=!0,re||(O=[be(w,"change",e[12]),be(S,"change",e[13])],re=!0)},p(P,[W]){(!$||W&2)&&ce(u,P[1]),P[2]?k?k.p(P,W):(k=vo(P),k.c(),k.m(r,g)):k&&(k.d(1),k=null),P[3]?T?T.p(P,W):(T=wo(P),T.c(),T.m(r,d)):T&&(T.d(1),T=null),(!$||W&64)&&(w.disabled=P[6]),W&1&&(w.checked=P[0]),(!$||W&64)&&(S.disabled=P[6]),W&32&&(S.checked=P[5]),P[7]||P[8]?D?(D.p(P,W),W&384&&Y(D,1)):(D=yo(P),D.c(),Y(D,1),D.m(t,C)):D&&(et(),B(D,1,1,()=>{D=null}),tt());const j={};W&64&&(j.nextLabel=P[6]?"Creating...":"Create Node"),W&64&&(j.loading=P[6]),W&80&&(j.nextDisabled=P[4]||P[6]),F.$set(j)},i(P){$||(Y(D),Y(F.$$.fragment,P),$=!0)},o(P){B(D),B(F.$$.fragment,P),$=!1},d(P){P&&_(t),k&&k.d(),T&&T.d(),D&&D.d(),ue(F),re=!1,jt(O)}}}function Eh(e,t,n){let{word:r=""}=t,{definition:i=""}=t,{discussion:o=""}=t,{publicCredit:s=!1}=t,{disabled:l=!1}=t,{userId:a=void 0}=t,u=!1,h=!1,g=null,d=null;const c=rt();async function p(){n(6,h=!0);try{const y={word:r.trim(),definition:i,discussion:o,publicCredit:s,createdBy:a,shareToX:u};xi&&console.log("Submitting word creation form:",JSON.stringify(y,null,2));const N=await qe("/nodes/word",{method:"POST",body:JSON.stringify(y)});xi&&console.log("Word creation response:",JSON.stringify(N,null,2)),n(8,d=`Word node "${N.word}" created successfully`),c("success",{message:d,word:N.word}),On.set(N),setTimeout(()=>{yt("/graph/word")},2e3)}catch(y){console.error("Error creating word:",y),console.error("Error details:",y instanceof Error?y.stack:"Unknown error"),n(7,g=y instanceof Error?y.message:"Failed to create new word node"),c("error",{message:g})}finally{n(6,h=!1)}}function w(){s=this.checked,n(0,s)}function b(){u=this.checked,n(5,u)}const v=()=>c("back");return e.$$set=y=>{"word"in y&&n(1,r=y.word),"definition"in y&&n(2,i=y.definition),"discussion"in y&&n(3,o=y.discussion),"publicCredit"in y&&n(0,s=y.publicCredit),"disabled"in y&&n(4,l=y.disabled),"userId"in y&&n(11,a=y.userId)},[s,r,i,o,l,u,h,g,d,c,p,a,w,b,v]}class Nh extends Ie{constructor(t){super(),xe(this,t,Eh,bh,Ne,{word:1,definition:2,discussion:3,publicCredit:0,disabled:4,userId:11})}}function bo(e,t,n){const r=e.slice();return r[20]=t[n],r[22]=n,r}function Eo(e){let t,n=Tt(Array(5)),r=[];for(let i=0;i<n.length;i+=1)r[i]=No(bo(e,n,i));return{c(){t=A("g");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=R(i,"g",{transform:!0});var o=E(t);for(let s=0;s<r.length;s+=1)r[s].l(o);o.forEach(_),this.h()},h(){f(t,"transform","translate(0, 40)")},m(i,o){U(i,t,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(t,null)},p(i,o){if(o&2){n=Tt(Array(5));let s;for(s=0;s<n.length;s+=1){const l=bo(i,n,s);r[s]?r[s].p(l,o):(r[s]=No(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(i){i&&_(t),Dr(r,i)}}}function No(e){let t;return{c(){t=A("circle"),this.h()},l(n){t=R(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),E(t).forEach(_),this.h()},h(){f(t,"cx",-40+e[22]*20),f(t,"cy","0"),f(t,"r","4"),f(t,"class","step-indicator svelte-137x9w8"),ge(t,"active",e[1]>=e[22]+1)},m(n,r){U(n,t,r)},p(n,r){r&2&&ge(t,"active",n[1]>=n[22]+1)},d(n){n&&_(t)}}}function Ih(e){let t,n;const r=[e[2],{userId:e[0].sub},{disabled:Dn}];let i={};for(let o=0;o<r.length;o+=1)i=Co(i,r[o]);return t=new Nh({props:i}),t.$on("back",e[8]),t.$on("success",e[17]),t.$on("error",e[18]),{c(){se(t.$$.fragment)},l(o){ae(t.$$.fragment,o)},m(o,s){le(t,o,s),n=!0},p(o,s){const l=s&5?Ds(r,[s&4&&Ps(o[2]),s&1&&{userId:o[0].sub},s&0&&{disabled:Dn}]):{};t.$set(l)},i(o){n||(Y(t.$$.fragment,o),n=!0)},o(o){B(t.$$.fragment,o),n=!1},d(o){ue(t,o)}}}function xh(e){let t,n,r;function i(s){e[16](s)}let o={disabled:Dn};return e[2].discussion!==void 0&&(o.discussion=e[2].discussion),t=new yh({props:o}),Xe.push(()=>vn(t,"discussion",i)),t.$on("back",e[8]),t.$on("proceed",e[9]),{c(){se(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,l){le(t,s,l),r=!0},p(s,l){const a={};!n&&l&4&&(n=!0,a.discussion=s[2].discussion,mn(()=>n=!1)),t.$set(a)},i(s){r||(Y(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){ue(t,s)}}}function Ah(e){let t,n,r;function i(s){e[15](s)}let o={disabled:Dn};return e[2].definition!==void 0&&(o.definition=e[2].definition),t=new mh({props:o}),Xe.push(()=>vn(t,"definition",i)),t.$on("back",e[8]),t.$on("proceed",e[9]),{c(){se(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,l){le(t,s,l),r=!0},p(s,l){const a={};!n&&l&4&&(n=!0,a.definition=s[2].definition,mn(()=>n=!1)),t.$set(a)},i(s){r||(Y(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){ue(t,s)}}}function Rh(e){let t,n,r;function i(s){e[13](s)}let o={disabled:Dn};return e[2].word!==void 0&&(o.word=e[2].word),t=new gh({props:o}),Xe.push(()=>vn(t,"word",i)),t.$on("back",e[8]),t.$on("proceed",e[9]),t.$on("error",e[14]),{c(){se(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,l){le(t,s,l),r=!0},p(s,l){const a={};!n&&l&4&&(n=!0,a.word=s[2].word,mn(()=>n=!1)),t.$set(a)},i(s){r||(Y(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){ue(t,s)}}}function Sh(e){let t,n,r;function i(s){e[12](s)}let o={disabled:Dn};return e[2].nodeType!==void 0&&(o.nodeType=e[2].nodeType),t=new uh({props:o}),Xe.push(()=>vn(t,"nodeType",i)),t.$on("proceed",e[9]),{c(){se(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,l){le(t,s,l),r=!0},p(s,l){const a={};!n&&l&4&&(n=!0,a.nodeType=s[2].nodeType,mn(()=>n=!1)),t.$set(a)},i(s){r||(Y(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){ue(t,s)}}}function Th(e){let t,n,r,i,o,s,l,a,u,h,g,d,c=e[6]&&Eo(e);o=new hi({props:{errorMessage:e[4],successMessage:e[5]}});const p=[Sh,Rh,Ah,xh,Ih],w=[];function b(v,y){return v[1]===1?0:v[1]===2?1:v[1]===3?2:v[1]===4?3:v[1]===5?4:-1}return~(a=b(e))&&(u=w[a]=p[a](e)),{c(){t=A("g"),n=A("text"),r=V(e[7]),c&&c.c(),i=A("g"),se(o.$$.fragment),l=A("g"),u&&u.c(),this.h()},l(v){t=R(v,"g",{transform:!0});var y=E(t);n=R(y,"text",{class:!0,"text-anchor":!0});var N=E(n);r=z(N,e[7]),N.forEach(_),c&&c.l(y),i=R(y,"g",{transform:!0});var x=E(i);ae(o.$$.fragment,x),x.forEach(_),l=R(y,"g",{transform:!0});var S=E(l);u&&u.l(S),S.forEach(_),y.forEach(_),this.h()},h(){f(n,"class","title svelte-137x9w8"),f(n,"text-anchor","middle"),f(i,"transform",s="translate(0, "+(e[6]?70:40)+")"),f(l,"transform",h="translate(0, "+(e[6]?100:60)+")"),f(t,"transform",g="translate(0, "+(-e[19]+(e[1]===5?100:120))+")")},m(v,y){U(v,t,y),m(t,n),m(n,r),c&&c.m(t,null),m(t,i),le(o,i,null),m(t,l),~a&&w[a].m(l,null),d=!0},p(v,y){(!d||y&128)&&ce(r,v[7]),v[6]?c?c.p(v,y):(c=Eo(v),c.c(),c.m(t,i)):c&&(c.d(1),c=null);const N={};y&16&&(N.errorMessage=v[4]),y&32&&(N.successMessage=v[5]),o.$set(N),(!d||y&64&&s!==(s="translate(0, "+(v[6]?70:40)+")"))&&f(i,"transform",s);let x=a;a=b(v),a===x?~a&&w[a].p(v,y):(u&&(et(),B(w[x],1,1,()=>{w[x]=null}),tt()),~a?(u=w[a],u?u.p(v,y):(u=w[a]=p[a](v),u.c()),Y(u,1),u.m(l,null)):u=null),(!d||y&64&&h!==(h="translate(0, "+(v[6]?100:60)+")"))&&f(l,"transform",h),(!d||y&524290&&g!==(g="translate(0, "+(-v[19]+(v[1]===5?100:120))+")"))&&f(t,"transform",g)},i(v){d||(Y(o.$$.fragment,v),Y(u),d=!0)},o(v){B(o.$$.fragment,v),B(u),d=!1},d(v){v&&_(t),c&&c.d(),ue(o),~a&&w[a].d()}}}function Oh(e){let t,n;return t=new ur({props:{style:e[3],$$slots:{default:[Th,({radius:r})=>({19:r}),({radius:r})=>r?524288:0]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&8&&(o.style=r[3]),i&8913143&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}let Dn=!1;function Mh(e,t,n){let r,i,o,{node:s}=t,l=1,a={nodeType:"",word:"",definition:"",discussion:"",publicCredit:!1},u=null,h=null,g=0,d;function c(){l>1&&(n(1,l--,l),n(4,u=null))}function p(){l<5&&(n(1,l++,l),n(4,u=null))}ni(()=>{d&&clearInterval(d)});function w(I){e.$$.not_equal(a.nodeType,I)&&(a.nodeType=I,n(2,a))}function b(I){e.$$.not_equal(a.word,I)&&(a.word=I,n(2,a))}const v=I=>n(4,u=I.detail.message);function y(I){e.$$.not_equal(a.definition,I)&&(a.definition=I,n(2,a))}function N(I){e.$$.not_equal(a.discussion,I)&&(a.discussion=I,n(2,a))}const x=I=>n(5,h=I.detail.message),S=I=>n(4,u=I.detail.message);return e.$$set=I=>{"node"in I&&n(0,s=I.node)},e.$$.update=()=>{if(e.$$.dirty&3084)if(a.nodeType===""){if(!d){const I=[{base:G.PRIMARY.BLUE,full:`${G.PRIMARY.BLUE}FF`,semi:`${G.PRIMARY.BLUE}66`,light:`${G.PRIMARY.BLUE}33`},{base:G.PRIMARY.PURPLE,full:`${G.PRIMARY.PURPLE}FF`,semi:`${G.PRIMARY.PURPLE}66`,light:`${G.PRIMARY.PURPLE}33`},{base:G.PRIMARY.TURQUOISE,full:`${G.PRIMARY.TURQUOISE}FF`,semi:`${G.PRIMARY.TURQUOISE}66`,light:`${G.PRIMARY.TURQUOISE}33`},{base:G.PRIMARY.GREEN,full:`${G.PRIMARY.GREEN}FF`,semi:`${G.PRIMARY.GREEN}66`,light:`${G.PRIMARY.GREEN}33`},{base:G.PRIMARY.YELLOW,full:`${G.PRIMARY.YELLOW}FF`,semi:`${G.PRIMARY.YELLOW}66`,light:`${G.PRIMARY.YELLOW}33`},{base:G.PRIMARY.ORANGE,full:`${G.PRIMARY.ORANGE}FF`,semi:`${G.PRIMARY.ORANGE}66`,light:`${G.PRIMARY.ORANGE}33`},{base:G.PRIMARY.RED,full:`${G.PRIMARY.RED}FF`,semi:`${G.PRIMARY.RED}66`,light:`${G.PRIMARY.RED}33`}];n(11,d=setInterval(()=>{n(10,g=(g+1)%I.length),n(3,r={...r,colors:{...r.colors,border:I[g].full,text:I[g].full,hover:I[g].full,gradient:{start:I[g].semi,end:I[g].light}}})},2e3))}}else d&&(clearInterval(d),n(11,d=void 0));e.$$.dirty&1028&&n(3,r={previewSize:H.SIZES.WORD.detail,detailSize:H.SIZES.WORD.detail,colors:a.nodeType==="word"?H.COLORS.WORD:{background:H.COLORS.WORD.background,border:H.COLORS.WORD.border,text:H.COLORS.WORD.text,hover:H.COLORS.WORD.hover,gradient:H.COLORS.WORD.gradient},padding:H.PADDING,lineHeight:H.LINE_HEIGHT,stroke:H.STROKE,highlightColor:a.nodeType==="word"?G.PRIMARY.BLUE:a.nodeType===""?[G.PRIMARY.BLUE,G.PRIMARY.PURPLE,G.PRIMARY.GREEN,G.PRIMARY.TURQUOISE,G.PRIMARY.YELLOW,G.PRIMARY.ORANGE][g]:void 0}),e.$$.dirty&2&&n(7,i=l===1?"Create New Node":l===2?"Enter Word":l===3?"Add Definition":l===4?"Start Discussion":"Review Creation"),e.$$.dirty&2&&n(6,o=l<5)},[s,l,a,r,u,h,o,i,c,p,g,d,w,b,v,y,N,x,S]}class kh extends Ie{constructor(t){super(),xe(this,t,Mh,Oh,Ne,{node:0})}}const Dh=e=>({radius:e&4}),Io=e=>({radius:e[2]}),Ph=e=>({radius:e&4}),xo=e=>({radius:e[2]}),Ch=e=>({radius:e&4}),Ao=e=>({radius:e[2]}),Lh=e=>({radius:e&4}),Ro=e=>({radius:e[2]});function Fh(e){let t,n,r,i;const o=e[3].title,s=Ut(o,e,e[4],Ro),l=e[3].content,a=Ut(l,e,e[4],Ao),u=e[3].score,h=Ut(u,e,e[4],xo),g=e[3].button,d=Ut(g,e,e[4],Io);return{c(){s&&s.c(),t=he(),a&&a.c(),n=he(),h&&h.c(),r=he(),d&&d.c()},l(c){s&&s.l(c),t=de(c),a&&a.l(c),n=de(c),h&&h.l(c),r=de(c),d&&d.l(c)},m(c,p){s&&s.m(c,p),U(c,t,p),a&&a.m(c,p),U(c,n,p),h&&h.m(c,p),U(c,r,p),d&&d.m(c,p),i=!0},p(c,p){s&&s.p&&(!i||p&20)&&Gt(s,o,c,c[4],i?Yt(o,c[4],p,Lh):Wt(c[4]),Ro),a&&a.p&&(!i||p&20)&&Gt(a,l,c,c[4],i?Yt(l,c[4],p,Ch):Wt(c[4]),Ao),h&&h.p&&(!i||p&20)&&Gt(h,u,c,c[4],i?Yt(u,c[4],p,Ph):Wt(c[4]),xo),d&&d.p&&(!i||p&20)&&Gt(d,g,c,c[4],i?Yt(g,c[4],p,Dh):Wt(c[4]),Io)},i(c){i||(Y(s,c),Y(a,c),Y(h,c),Y(d,c),i=!0)},o(c){B(s,c),B(a,c),B(h,c),B(d,c),i=!1},d(c){c&&(_(t),_(n),_(r)),s&&s.d(c),a&&a.d(c),h&&h.d(c),d&&d.d(c)}}}function Vh(e){let t,n;return t=new ds({props:{style:e[0],transform:e[1],$$slots:{default:[Fh]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&1&&(o.style=r[0]),i&2&&(o.transform=r[1]),i&20&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function zh(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{style:s}=t,{transform:l}=t;return e.$$set=a=>{"style"in a&&n(0,s=a.style),"transform"in a&&n(1,l=a.transform),"$$scope"in a&&n(4,o=a.$$scope)},e.$$.update=()=>{e.$$.dirty&1&&n(2,r=s.previewSize/2)},[s,l,r,i,o]}class _s extends Ie{constructor(t){super(),xe(this,t,zh,Vh,Ne,{style:0,transform:1})}}function So(e){let t,n;return{c(){t=A("text"),n=V(e[0]),this.h()},l(r){t=R(r,"text",{y:!0,class:!0});var i=E(t);n=z(i,e[0]),i.forEach(_),this.h()},h(){f(t,"y","20"),f(t,"class","button-text svelte-1j2tcq6"),ie(t,"font-family",H.FONTS.hover.family),ie(t,"font-size",H.FONTS.hover.size),ie(t,"font-weight",H.FONTS.hover.weight)},m(r,i){U(r,t,i),m(t,n)},p(r,i){i&1&&ce(n,r[0])},d(r){r&&_(t)}}}function Uh(e){let t,n,r,i,o,s,l,a,u,h,g,d,c,p,w=`scale(${e[3]})`,b,v,y,N=e[2]&&So(e);return{c(){t=A("g"),n=A("defs"),r=A("filter"),i=A("feGaussianBlur"),o=A("feFlood"),s=A("feComposite"),l=A("feGaussianBlur"),a=A("feFlood"),u=A("feComposite"),h=A("feMerge"),g=A("feMergeNode"),d=A("feMergeNode"),c=A("feMergeNode"),p=A("circle"),N&&N.c(),this.h()},l(x){t=R(x,"g",{class:!0,transform:!0});var S=E(t);n=R(S,"defs",{});var I=E(n);r=R(I,"filter",{id:!0,x:!0,y:!0,width:!0,height:!0});var M=E(r);i=R(M,"feGaussianBlur",{in:!0,stdDeviation:!0,result:!0}),E(i).forEach(_),o=R(M,"feFlood",{"flood-color":!0,"flood-opacity":!0,result:!0}),E(o).forEach(_),s=R(M,"feComposite",{in:!0,in2:!0,operator:!0,result:!0}),E(s).forEach(_),l=R(M,"feGaussianBlur",{in:!0,stdDeviation:!0,result:!0}),E(l).forEach(_),a=R(M,"feFlood",{"flood-color":!0,"flood-opacity":!0,result:!0}),E(a).forEach(_),u=R(M,"feComposite",{in:!0,in2:!0,operator:!0,result:!0}),E(u).forEach(_),h=R(M,"feMerge",{});var L=E(h);g=R(L,"feMergeNode",{in:!0}),E(g).forEach(_),d=R(L,"feMergeNode",{in:!0}),E(d).forEach(_),c=R(L,"feMergeNode",{in:!0}),E(c).forEach(_),L.forEach(_),M.forEach(_),I.forEach(_),p=R(S,"circle",{r:!0,class:!0}),E(p).forEach(_),N&&N.l(S),S.forEach(_),this.h()},h(){f(i,"in","SourceAlpha"),f(i,"stdDeviation","2"),f(i,"result","blur1"),f(o,"flood-color","#FFFFFF"),f(o,"flood-opacity","0.6"),f(o,"result","color1"),f(s,"in","color1"),f(s,"in2","blur1"),f(s,"operator","in"),f(s,"result","glow1"),f(l,"in","SourceAlpha"),f(l,"stdDeviation","1"),f(l,"result","blur2"),f(a,"flood-color","#FFFFFF"),f(a,"flood-opacity","0.8"),f(a,"result","color2"),f(u,"in","color2"),f(u,"in2","blur2"),f(u,"operator","in"),f(u,"result","glow2"),f(g,"in","glow1"),f(d,"in","glow2"),f(c,"in","SourceGraphic"),f(r,"id",e[5]),f(r,"x","-50%"),f(r,"y","-50%"),f(r,"width","200%"),f(r,"height","200%"),f(p,"r","8"),f(p,"class","button-circle svelte-1j2tcq6"),ie(p,"transform",w),ie(p,"filter",e[2]?`url(#${e[5]})`:"none"),f(t,"class","mode-button svelte-1j2tcq6"),f(t,"transform",b="translate(0, "+e[1]+")")},m(x,S){U(x,t,S),m(t,n),m(n,r),m(r,i),m(r,o),m(r,s),m(r,l),m(r,a),m(r,u),m(r,h),m(h,g),m(h,d),m(h,c),m(t,p),N&&N.m(t,null),v||(y=[be(t,"mouseenter",e[7]),be(t,"mouseleave",e[8]),be(t,"click",e[6])],v=!0)},p(x,[S]){S&8&&w!==(w=`scale(${x[3]})`)&&ie(p,"transform",w),S&4&&ie(p,"filter",x[2]?`url(#${x[5]})`:"none"),x[2]?N?N.p(x,S):(N=So(x),N.c(),N.m(t,null)):N&&(N.d(1),N=null),S&2&&b!==(b="translate(0, "+x[1]+")")&&f(t,"transform",b)},i:Re,o:Re,d(x){x&&_(t),N&&N.d(),v=!1,jt(y)}}}function Gh(e,t,n){let r,{mode:i}=t,{y:o=0}=t;const s=rt();let l=!1;const a=hs(1,{stiffness:.3,damping:.6});Xt(e,a,c=>n(3,r=c));const u=`button-glow-${Math.random().toString(36).slice(2)}`;function h(){s("click"),s("modeChange",{mode:i==="expand"?"detail":"preview"})}const g=()=>n(2,l=!0),d=()=>n(2,l=!1);return e.$$set=c=>{"mode"in c&&n(0,i=c.mode),"y"in c&&n(1,o=c.y)},e.$$.update=()=>{e.$$.dirty&5&&(i==="expand"?a.set(l?1.5:1):a.set(l?1:1.5))},[i,o,l,r,a,u,h,g,d]}class Vr extends Ie{constructor(t){super(),xe(this,t,Gh,Uh,Ne,{mode:0,y:1})}}function Wh(e){let t,n,r;return{c(){t=A("text"),n=V("Word"),this.h()},l(i){t=R(i,"text",{y:!0,class:!0});var o=E(t);n=z(o,"Word"),o.forEach(_),this.h()},h(){f(t,"y",r=-e[1].previewSize/4-15),f(t,"class","title svelte-h5j0qi"),ie(t,"font-family",H.FONTS.title.family),ie(t,"font-size",H.FONTS.title.size),ie(t,"font-weight",H.FONTS.title.weight)},m(i,o){U(i,t,o),m(t,n)},p(i,o){o&2&&r!==(r=-i[1].previewSize/4-15)&&f(t,"y",r)},d(i){i&&_(t)}}}function Yh(e){let t,n=e[0].word+"",r,i;return{c(){t=A("text"),r=V(n),this.h()},l(o){t=R(o,"text",{y:!0,class:!0});var s=E(t);r=z(s,n),s.forEach(_),this.h()},h(){f(t,"y",i=-e[1].previewSize/4+40),f(t,"class","content svelte-h5j0qi"),ie(t,"font-family",H.FONTS.word.family),ie(t,"font-size",H.FONTS.word.size),ie(t,"font-weight",H.FONTS.word.weight)},m(o,s){U(o,t,s),m(t,r)},p(o,s){s&1&&n!==(n=o[0].word+"")&&ce(r,n),s&2&&i!==(i=-o[1].previewSize/4+40)&&f(t,"y",i)},d(o){o&&_(t)}}}function Bh(e){let t,n,r;return{c(){t=A("text"),n=V(e[3]),this.h()},l(i){t=R(i,"text",{y:!0,class:!0});var o=E(t);n=z(o,e[3]),o.forEach(_),this.h()},h(){f(t,"y",r=e[1].previewSize/4+10),f(t,"class","score svelte-h5j0qi"),ie(t,"font-family",H.FONTS.word.family),ie(t,"font-size",H.FONTS.value.size),ie(t,"font-weight",H.FONTS.value.weight)},m(i,o){U(i,t,o),m(t,n)},p(i,o){o&8&&ce(n,i[3]),o&2&&r!==(r=i[1].previewSize/4+10)&&f(t,"y",r)},d(i){i&&_(t)}}}function Xh(e){let t,n;return t=new Vr({props:{mode:"expand",y:e[9]}}),t.$on("click",e[4]),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i&512&&(o.y=r[9]),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function Hh(e){let t,n;return t=new _s({props:{style:e[1],transform:e[2],$$slots:{button:[Xh,({radius:r})=>({9:r}),({radius:r})=>r?512:0],score:[Bh],content:[Yh],title:[Wh]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&2&&(o.style=r[1]),i&4&&(o.transform=r[2]),i&1547&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}const To=3,jh=1e3;function wr(e){return e&&typeof e=="object"&&"low"in e?Number(e.low):Number(e||0)}function qh(e,t,n){let r;Xt(e,yn,d=>n(6,r=d));let{data:i}=t,{style:o}=t,{transform:s=""}=t,l=0,a="0";const u=rt();function h(){u("modeChange",{mode:"detail"})}async function g(d=0){if(r)try{const c=await qe(`/nodes/word/${i.word}/vote`);if(!c)throw new Error("No response from vote status endpoint");console.log("[WordPreview] Vote status response:",c);const p=wr(c.positiveVotes),w=wr(c.negativeVotes);console.log("[WordPreview] Parsed vote numbers:",{posVotes:p,negVotes:w}),n(0,i.positiveVotes=p,i),n(0,i.negativeVotes=w,i),n(5,l=p-w),console.log("[WordPreview] Updated state:",{positiveVotes:i.positiveVotes,negativeVotes:i.negativeVotes,netVotes:l,currentScoreDisplay:a})}catch(c){console.error("[WordPreview] Error fetching vote status:",c),d<To&&(console.log(`[WordPreview] Retrying vote status fetch (attempt ${d+1}/${To})`),await new Promise(p=>setTimeout(p,jh)),await g(d+1))}}return tn(async()=>{console.warn(" [WordPreview] MOUNT:",{word:i.word,initialPositiveVotes:i.positiveVotes,initialNegativeVotes:i.negativeVotes});const d=wr(i.positiveVotes),c=wr(i.negativeVotes);n(5,l=d-c),console.warn(" [WordPreview] INITIAL CALCS:",{initialPos:d,initialNeg:c,netVotes:l,scoreDisplay:a}),await g()}),e.$$set=d=>{"data"in d&&n(0,i=d.data),"style"in d&&n(1,o=d.style),"transform"in d&&n(2,s=d.transform)},e.$$.update=()=>{if(e.$$.dirty&40){const d=a;n(3,a=l>0?`+${l}`:l.toString()),console.warn(" [WordPreview] SCORE UPDATE:",{netVotes:l,oldScoreDisplay:d,newScoreDisplay:a})}},[i,o,s,a,h,l]}class ps extends Ie{constructor(t){super(),xe(this,t,qh,Hh,Ne,{data:0,style:1,transform:2})}}async function $h(e){try{return await qe(`/users/${e}/details`)}catch(t){return console.error(`Error fetching user details for ${e}:`,t),null}}function Zh(e){let t,n,r,i,o,s,l=e[0].word+"",a,u,h,g,d,c,p,w,b,v,y,N,x,S,I,M,L,X,C,F,$,re,O,k,T,D,P,W,j,Q,ne,_e,pe,we,me,ve,Te,Se,Fe,qt,Ve,nn,ze,xt=e[0].positiveVotes+"",$e,De,ft,ct,ht,dt,Ze,At=e[0].negativeVotes+"",Ke,Pe,gt,_t,pt,mt,Qe,kt,Me,Ue,rn,Ge,on,We,Dt,Je,Ce,vt,wt,Pt=kr(e[0].createdBy,e[3],!e[0].publicCredit)+"",it,Ct,Lt,Oe,ye,sn,$t;return Oe=new Vr({props:{mode:"collapse",y:e[17]}}),Oe.$on("click",e[9]),{c(){t=A("text"),n=V("Word"),i=he(),o=A("g"),s=A("text"),a=V(l),h=he(),g=A("g"),d=A("text"),c=V(`Please vote on whether to include this keyword in 
            `),p=A("text"),w=V(`ProjectZer0 or not.
            `),b=A("text"),v=V("You can always change your vote using the buttons below."),y=he(),N=A("g"),x=A("foreignObject"),S=J("div"),I=J("button"),M=V("Agree"),L=he(),X=A("foreignObject"),C=J("div"),F=J("button"),$=V("No Vote"),re=he(),O=A("foreignObject"),k=J("div"),T=J("button"),D=V("Disagree"),P=he(),W=A("g"),j=A("text"),Q=V(`Vote Data:
            `),ne=A("g"),_e=A("text"),pe=V(e[6]),we=A("text"),me=V(`=
                `),ve=A("text"),Te=V(e[4]),Se=A("g"),Fe=A("text"),qt=V(`Total Agree
                `),Ve=A("text"),nn=V(`=
                `),ze=A("text"),$e=V(xt),De=A("g"),ft=A("text"),ct=V(`Total Disagree
                `),ht=A("text"),dt=V(`=
                `),Ze=A("text"),Ke=V(At),Pe=A("g"),gt=A("text"),_t=V(`Net 
                `),pt=A("text"),mt=V(`=
                `),Qe=A("text"),kt=V(e[2]),Me=A("g"),Ue=A("text"),rn=V(`Word Status
                `),Ge=A("text"),on=V(`=
                `),We=A("text"),Dt=V(e[7]),Je=he(),Ce=A("g"),vt=A("text"),wt=V("created by: "),it=V(Pt),Lt=he(),se(Oe.$$.fragment),this.h()},l(Z){t=R(Z,"text",{y:!0,class:!0});var fe=E(t);n=z(fe,"Word"),fe.forEach(_),i=de(Z),o=R(Z,"g",{class:!0,transform:!0});var Rt=E(o);s=R(Rt,"text",{class:!0});var ot=E(s);a=z(ot,l),ot.forEach(_),Rt.forEach(_),h=de(Z),g=R(Z,"g",{transform:!0});var Ee=E(g);d=R(Ee,"text",{x:!0,class:!0});var En=E(d);c=z(En,`Please vote on whether to include this keyword in 
            `),En.forEach(_),p=R(Ee,"text",{x:!0,y:!0,class:!0});var Pn=E(p);w=z(Pn,`ProjectZer0 or not.
            `),Pn.forEach(_),b=R(Ee,"text",{x:!0,y:!0,class:!0});var K=E(b);v=z(K,"You can always change your vote using the buttons below."),K.forEach(_),Ee.forEach(_),y=de(Z),N=R(Z,"g",{transform:!0});var oe=E(N);x=R(oe,"foreignObject",{x:!0,width:!0,height:!0});var Zt=E(x);S=ee(Zt,"DIV",{class:!0});var Nn=E(S);I=ee(Nn,"BUTTON",{class:!0});var an=E(I);M=z(an,"Agree"),an.forEach(_),L=de(Nn),Nn.forEach(_),Zt.forEach(_),X=R(oe,"foreignObject",{x:!0,width:!0,height:!0});var In=E(X);C=ee(In,"DIV",{class:!0});var xn=E(C);F=ee(xn,"BUTTON",{class:!0});var ln=E(F);$=z(ln,"No Vote"),ln.forEach(_),re=de(xn),xn.forEach(_),In.forEach(_),O=R(oe,"foreignObject",{x:!0,width:!0,height:!0});var Cn=E(O);k=ee(Cn,"DIV",{class:!0});var Ln=E(k);T=ee(Ln,"BUTTON",{class:!0});var Fn=E(T);D=z(Fn,"Disagree"),Fn.forEach(_),Ln.forEach(_),Cn.forEach(_),oe.forEach(_),P=de(Z),W=R(Z,"g",{transform:!0});var st=E(W);j=R(st,"text",{x:!0,class:!0});var Vn=E(j);Q=z(Vn,`Vote Data:
            `),Vn.forEach(_),ne=R(st,"g",{transform:!0});var Kt=E(ne);_e=R(Kt,"text",{x:!0,class:!0});var zn=E(_e);pe=z(zn,e[6]),zn.forEach(_),we=R(Kt,"text",{x:!0,class:!0});var Un=E(we);me=z(Un,`=
                `),Un.forEach(_),ve=R(Kt,"text",{x:!0,class:!0});var An=E(ve);Te=z(An,e[4]),An.forEach(_),Kt.forEach(_),Se=R(st,"g",{transform:!0});var un=E(Se);Fe=R(un,"text",{x:!0,class:!0});var Gn=E(Fe);qt=z(Gn,`Total Agree
                `),Gn.forEach(_),Ve=R(un,"text",{x:!0,class:!0});var Wn=E(Ve);nn=z(Wn,`=
                `),Wn.forEach(_),ze=R(un,"text",{x:!0,class:!0});var Yn=E(ze);$e=z(Yn,xt),Yn.forEach(_),un.forEach(_),De=R(st,"g",{transform:!0});var at=E(De);ft=R(at,"text",{x:!0,class:!0});var Bn=E(ft);ct=z(Bn,`Total Disagree
                `),Bn.forEach(_),ht=R(at,"text",{x:!0,class:!0});var fn=E(ht);dt=z(fn,`=
                `),fn.forEach(_),Ze=R(at,"text",{x:!0,class:!0});var Xn=E(Ze);Ke=z(Xn,At),Xn.forEach(_),at.forEach(_),Pe=R(st,"g",{transform:!0});var cn=E(Pe);gt=R(cn,"text",{x:!0,class:!0});var Hn=E(gt);_t=z(Hn,`Net 
                `),Hn.forEach(_),pt=R(cn,"text",{x:!0,class:!0});var hn=E(pt);mt=z(hn,`=
                `),hn.forEach(_),Qe=R(cn,"text",{x:!0,class:!0});var jn=E(Qe);kt=z(jn,e[2]),jn.forEach(_),cn.forEach(_),Me=R(st,"g",{transform:!0});var dn=E(Me);Ue=R(dn,"text",{x:!0,class:!0});var qn=E(Ue);rn=z(qn,`Word Status
                `),qn.forEach(_),Ge=R(dn,"text",{x:!0,class:!0});var gn=E(Ge);on=z(gn,`=
                `),gn.forEach(_),We=R(dn,"text",{x:!0,class:!0});var $n=E(We);Dt=z($n,e[7]),$n.forEach(_),dn.forEach(_),st.forEach(_),Je=de(Z),Ce=R(Z,"g",{transform:!0});var Zn=E(Ce);vt=R(Zn,"text",{class:!0});var Rn=E(vt);wt=z(Rn,"created by: "),it=z(Rn,Pt),Rn.forEach(_),Zn.forEach(_),Lt=de(Z),ae(Oe.$$.fragment,Z),this.h()},h(){f(t,"y",r=-e[17]+40),f(t,"class","title svelte-lowxag"),ie(t,"font-family",H.FONTS.title.family),ie(t,"font-size",H.FONTS.title.size),ie(t,"font-weight",H.FONTS.title.weight),f(s,"class","word main-word svelte-lowxag"),ie(s,"font-family",H.FONTS.word.family),ie(s,"font-weight",H.FONTS.word.weight),f(o,"class","word-display"),f(o,"transform",u="translate(0, "+-e[17]/2+")"),f(d,"x",e[8].labelX),f(d,"class","context-text left-align svelte-lowxag"),f(p,"x",e[8].labelX),f(p,"y","25"),f(p,"class","context-text left-align svelte-lowxag"),f(b,"x",e[8].labelX),f(b,"y","60"),f(b,"class","context-text left-align svelte-lowxag"),f(g,"transform","translate(0, -100)"),f(I,"class","vote-button agree"),I.disabled=e[5],ge(I,"active",e[4]==="agree"),f(S,"class","button-wrapper"),f(x,"x",-160),f(x,"width","100"),f(x,"height","45"),f(F,"class","vote-button no-vote"),F.disabled=e[5],ge(F,"active",e[4]==="none"),f(C,"class","button-wrapper"),f(X,"x",-50),f(X,"width","100"),f(X,"height","45"),f(T,"class","vote-button disagree"),T.disabled=e[5],ge(T,"active",e[4]==="disagree"),f(k,"class","button-wrapper"),f(O,"x",60),f(O,"width","100"),f(O,"height","45"),f(N,"transform","translate(0, -10)"),f(j,"x",e[8].labelX),f(j,"class","stats-label left-align svelte-lowxag"),f(_e,"x",e[8].labelX),f(_e,"class","stats-text left-align svelte-lowxag"),f(we,"x",e[8].equalsX),f(we,"class","stats-text svelte-lowxag"),f(ve,"x",e[8].valueX),f(ve,"class","stats-value left-align svelte-lowxag"),f(ne,"transform","translate(0, 30)"),f(Fe,"x",e[8].labelX),f(Fe,"class","stats-text left-align svelte-lowxag"),f(Ve,"x",e[8].equalsX),f(Ve,"class","stats-text svelte-lowxag"),f(ze,"x",e[8].valueX),f(ze,"class","stats-value left-align svelte-lowxag"),f(Se,"transform","translate(0, 55)"),f(ft,"x",e[8].labelX),f(ft,"class","stats-text left-align svelte-lowxag"),f(ht,"x",e[8].equalsX),f(ht,"class","stats-text svelte-lowxag"),f(Ze,"x",e[8].valueX),f(Ze,"class","stats-value left-align svelte-lowxag"),f(De,"transform","translate(0, 80)"),f(gt,"x",e[8].labelX),f(gt,"class","stats-text left-align svelte-lowxag"),f(pt,"x",e[8].equalsX),f(pt,"class","stats-text svelte-lowxag"),f(Qe,"x",e[8].valueX),f(Qe,"class","stats-value left-align svelte-lowxag"),f(Pe,"transform","translate(0, 105)"),f(Ue,"x",e[8].labelX),f(Ue,"class","stats-text left-align svelte-lowxag"),f(Ge,"x",e[8].equalsX),f(Ge,"class","stats-text svelte-lowxag"),f(We,"x",e[8].valueX),f(We,"class","stats-value left-align svelte-lowxag"),f(Me,"transform","translate(0, 130)"),f(W,"transform","translate(0, 60)"),f(vt,"class","creator-label svelte-lowxag"),f(Ce,"transform",Ct="translate(0, "+(e[17]-55)+")")},m(Z,fe){U(Z,t,fe),m(t,n),U(Z,i,fe),U(Z,o,fe),m(o,s),m(s,a),U(Z,h,fe),U(Z,g,fe),m(g,d),m(d,c),m(g,p),m(p,w),m(g,b),m(b,v),U(Z,y,fe),U(Z,N,fe),m(N,x),m(x,S),m(S,I),m(I,M),m(S,L),m(N,X),m(X,C),m(C,F),m(F,$),m(C,re),m(N,O),m(O,k),m(k,T),m(T,D),U(Z,P,fe),U(Z,W,fe),m(W,j),m(j,Q),m(W,ne),m(ne,_e),m(_e,pe),m(ne,we),m(we,me),m(ne,ve),m(ve,Te),m(W,Se),m(Se,Fe),m(Fe,qt),m(Se,Ve),m(Ve,nn),m(Se,ze),m(ze,$e),m(W,De),m(De,ft),m(ft,ct),m(De,ht),m(ht,dt),m(De,Ze),m(Ze,Ke),m(W,Pe),m(Pe,gt),m(gt,_t),m(Pe,pt),m(pt,mt),m(Pe,Qe),m(Qe,kt),m(W,Me),m(Me,Ue),m(Ue,rn),m(Me,Ge),m(Ge,on),m(Me,We),m(We,Dt),U(Z,Je,fe),U(Z,Ce,fe),m(Ce,vt),m(vt,wt),m(vt,it),U(Z,Lt,fe),le(Oe,Z,fe),ye=!0,sn||($t=[be(I,"click",e[12]),be(F,"click",e[13]),be(T,"click",e[14])],sn=!0)},p(Z,fe){(!ye||fe&131072&&r!==(r=-Z[17]+40))&&f(t,"y",r),(!ye||fe&1)&&l!==(l=Z[0].word+"")&&ce(a,l),(!ye||fe&131072&&u!==(u="translate(0, "+-Z[17]/2+")"))&&f(o,"transform",u),(!ye||fe&32)&&(I.disabled=Z[5]),(!ye||fe&16)&&ge(I,"active",Z[4]==="agree"),(!ye||fe&32)&&(F.disabled=Z[5]),(!ye||fe&16)&&ge(F,"active",Z[4]==="none"),(!ye||fe&32)&&(T.disabled=Z[5]),(!ye||fe&16)&&ge(T,"active",Z[4]==="disagree"),(!ye||fe&64)&&ce(pe,Z[6]),(!ye||fe&16)&&ce(Te,Z[4]),(!ye||fe&1)&&xt!==(xt=Z[0].positiveVotes+"")&&ce($e,xt),(!ye||fe&1)&&At!==(At=Z[0].negativeVotes+"")&&ce(Ke,At),(!ye||fe&4)&&ce(kt,Z[2]),(!ye||fe&128)&&ce(Dt,Z[7]),(!ye||fe&9)&&Pt!==(Pt=kr(Z[0].createdBy,Z[3],!Z[0].publicCredit)+"")&&ce(it,Pt),(!ye||fe&131072&&Ct!==(Ct="translate(0, "+(Z[17]-55)+")"))&&f(Ce,"transform",Ct);const Rt={};fe&131072&&(Rt.y=Z[17]),Oe.$set(Rt)},i(Z){ye||(Y(Oe.$$.fragment,Z),ye=!0)},o(Z){B(Oe.$$.fragment,Z),ye=!1},d(Z){Z&&(_(t),_(i),_(o),_(h),_(g),_(y),_(N),_(P),_(W),_(Je),_(Ce),_(Lt)),ue(Oe,Z),sn=!1,jt($t)}}}function Kh(e){let t,n;return t=new ur({props:{style:e[1],$$slots:{default:[Zh,({radius:r})=>({17:r}),({radius:r})=>r?131072:0]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&2&&(o.style=r[1]),i&393469&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}const Oo=3,Qh=1e3;function St(e){return e&&typeof e=="object"&&"low"in e?Number(e.low):Number(e||0)}function Jh(e,t,n){let r;Xt(e,yn,x=>n(11,r=x));let{data:i}=t,{style:o}=t;const s=rt(),l={labelX:-200,equalsX:0,valueX:30};let a=null,u="none",h=!1,g,d,c;async function p(x=0){if(r)try{const S=await qe(`/nodes/word/${i.word}/vote`);if(!S)throw new Error("No response from vote status endpoint");n(4,u=S.status||"none"),n(0,i.positiveVotes=St(S.positiveVotes),i),n(0,i.negativeVotes=St(S.negativeVotes),i)}catch(S){console.error("Error fetching vote status:",S),x<Oo&&(console.log(`Retrying vote status fetch (attempt ${x+1}/${Oo})`),await new Promise(I=>setTimeout(I,Qh)),await p(x+1))}}function w(){s("modeChange",{mode:"preview"})}async function b(x){if(!r||h)return;n(5,h=!0);const S=u;try{if(n(4,u=x),x==="none"){const I=await qe(`/nodes/word/${i.word}/vote/remove`,{method:"POST"});n(0,i.positiveVotes=St(I.positiveVotes),i),n(0,i.negativeVotes=St(I.negativeVotes),i)}else{const I=await qe(`/nodes/word/${i.word}/vote`,{method:"POST",body:JSON.stringify({isPositive:x==="agree"})});n(0,i.positiveVotes=St(I.positiveVotes),i),n(0,i.negativeVotes=St(I.negativeVotes),i)}}catch(I){console.error("Error voting:",I),n(4,u=S),await p()}finally{n(5,h=!1)}}tn(async()=>{i.createdBy&&i.createdBy!=="FreeDictionaryAPI"&&n(3,a=await $h(i.createdBy)),n(0,i.positiveVotes=St(i.positiveVotes),i),n(0,i.negativeVotes=St(i.negativeVotes),i),await p()});const v=()=>b("agree"),y=()=>b("none"),N=()=>b("disagree");return e.$$set=x=>{"data"in x&&n(0,i=x.data),"style"in x&&n(1,o=x.style)},e.$$.update=()=>{e.$$.dirty&2048&&n(6,g=(r==null?void 0:r.preferred_username)||(r==null?void 0:r.name)||"Anonymous"),e.$$.dirty&1&&n(2,d=St(i.positiveVotes)-St(i.negativeVotes)),e.$$.dirty&4&&n(7,c=d>0?"agreed":d<0?"disagreed":"undecided")},[i,o,d,a,u,h,g,c,l,w,b,r,v,y,N]}class ed extends Ie{constructor(t){super(),xe(this,t,Jh,Kh,Ne,{data:0,style:1})}}function Mo(e,t,n){const r=e.slice();return r[17]=t[n],r[19]=n,r}function td(e){let t,n=e[0]==="live"?"Live Definition":"Alternative Definition",r,i;return{c(){t=A("text"),r=V(n),this.h()},l(o){t=R(o,"text",{y:!0,class:!0});var s=E(t);r=z(s,n),s.forEach(_),this.h()},h(){f(t,"y",i=-e[1].previewSize/4-50),f(t,"class","title centered svelte-1723qqz"),ie(t,"font-family",H.FONTS.title.family),ie(t,"font-size","12px"),ie(t,"font-weight",H.FONTS.title.weight)},m(o,s){U(o,t,s),m(t,r)},p(o,s){s&1&&n!==(n=o[0]==="live"?"Live Definition":"Alternative Definition")&&ce(r,n),s&2&&i!==(i=-o[1].previewSize/4-50)&&f(t,"y",i)},d(o){o&&_(t)}}}function ko(e){let t,n=e[17]+"",r,i;return{c(){t=A("tspan"),r=V(n),this.h()},l(o){t=R(o,"tspan",{x:!0,dy:!0});var s=E(t);r=z(s,n),s.forEach(_),this.h()},h(){f(t,"x",i=-e[1].previewSize/2+40),f(t,"dy",e[19]===0?0:"1.2em")},m(o,s){U(o,t,s),m(t,r)},p(o,s){s&16&&n!==(n=o[17]+"")&&ce(r,n),s&2&&i!==(i=-o[1].previewSize/2+40)&&f(t,"x",i)},d(o){o&&_(t)}}}function nd(e){let t,n,r,i=Tt(e[4]),o=[];for(let s=0;s<i.length;s+=1)o[s]=ko(Mo(e,i,s));return{c(){t=A("text");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){t=R(s,"text",{y:!0,x:!0,class:!0});var l=E(t);for(let a=0;a<o.length;a+=1)o[a].l(l);l.forEach(_),this.h()},h(){f(t,"y",n=-e[1].previewSize/4+20),f(t,"x",r=-e[1].previewSize/2+35),f(t,"class","content left-aligned svelte-1723qqz"),ie(t,"font-family",H.FONTS.word.family),ie(t,"font-size",H.FONTS.word.size),ie(t,"font-weight",H.FONTS.word.weight)},m(s,l){U(s,t,l);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null)},p(s,l){if(l&18){i=Tt(s[4]);let a;for(a=0;a<i.length;a+=1){const u=Mo(s,i,a);o[a]?o[a].p(u,l):(o[a]=ko(u),o[a].c(),o[a].m(t,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}l&2&&n!==(n=-s[1].previewSize/4+20)&&f(t,"y",n),l&2&&r!==(r=-s[1].previewSize/2+35)&&f(t,"x",r)},d(s){s&&_(t),Dr(o,s)}}}function rd(e){let t,n,r;return{c(){t=A("text"),n=V(e[3]),this.h()},l(i){t=R(i,"text",{y:!0,class:!0});var o=E(t);n=z(o,e[3]),o.forEach(_),this.h()},h(){f(t,"y",r=e[1].previewSize/4+10),f(t,"class","score svelte-1723qqz"),ie(t,"font-family",H.FONTS.word.family),ie(t,"font-size",H.FONTS.value.size),ie(t,"font-weight",H.FONTS.value.weight)},m(i,o){U(i,t,o),m(t,n)},p(i,o){o&8&&ce(n,i[3]),o&2&&r!==(r=i[1].previewSize/4+10)&&f(t,"y",r)},d(i){i&&_(t)}}}function id(e){let t,n;return t=new Vr({props:{mode:"expand",y:e[16]}}),t.$on("click",e[5]),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i&65536&&(o.y=r[16]),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function od(e){let t,n;return t=new _s({props:{style:e[1],transform:e[2],$$slots:{button:[id,({radius:r})=>({16:r}),({radius:r})=>r?65536:0],score:[rd],content:[nd],title:[td]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&2&&(o.style=r[1]),i&4&&(o.transform=r[2]),i&1114139&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}const Do=3,sd=1e3;function yr(e){return e&&typeof e=="object"&&"low"in e?Number(e.low):Number(e||0)}function ad(e,t,n){let r,i,o,s,l;Xt(e,yn,y=>n(12,l=y));let{definition:a}=t,{type:u}=t,{style:h}=t,{transform:g=""}=t,{word:d}=t,c=0,p="0";const w=rt();function b(){w("modeChange",{mode:"detail"})}async function v(y=0){if(l)try{const N=await qe(`/definitions/${a.id}/vote`);if(!N)throw new Error("No response from vote status endpoint");console.log("[DefinitionPreview] Vote status response:",N);const x=yr(N.positiveVotes),S=yr(N.negativeVotes);console.log("[DefinitionPreview] Parsed vote numbers:",{posVotes:x,negVotes:S}),n(6,a.positiveVotes=x,a),n(6,a.negativeVotes=S,a),n(8,c=x-S),console.log("[DefinitionPreview] Updated state:",{positiveVotes:a.positiveVotes,negativeVotes:a.negativeVotes,netVotes:c,currentScoreDisplay:p})}catch(N){console.error("[DefinitionPreview] Error fetching vote status:",N),y<Do&&(console.log(`[DefinitionPreview] Retrying vote status fetch (attempt ${y+1}/${Do})`),await new Promise(x=>setTimeout(x,sd)),await v(y+1))}}return tn(async()=>{console.warn(" [DefinitionPreview] MOUNT:",{id:a.id,initialPositiveVotes:a.positiveVotes,initialNegativeVotes:a.negativeVotes});const y=yr(a.positiveVotes),N=yr(a.negativeVotes);n(8,c=y-N),console.warn(" [DefinitionPreview] INITIAL CALCS:",{initialPos:y,initialNeg:N,netVotes:c,scoreDisplay:p}),await v()}),e.$$set=y=>{"definition"in y&&n(6,a=y.definition),"type"in y&&n(0,u=y.type),"style"in y&&n(1,h=y.style),"transform"in y&&n(2,g=y.transform),"word"in y&&n(7,d=y.word)},e.$$.update=()=>{if(e.$$.dirty&2&&n(11,r=h.previewSize-h.padding.preview*2-45),e.$$.dirty&2048&&n(9,i=Math.floor(r/8)),e.$$.dirty&192&&n(10,o=`${d}: ${a.text}`),e.$$.dirty&1536&&n(4,s=o.split(" ").reduce((y,N)=>{const x=y[y.length-1]||"",S=x+(x?" ":"")+N;return!x||S.length<=i?y[y.length-1]=S:y.push(N),y},[""])),e.$$.dirty&264){const y=p;n(3,p=c>0?`+${c}`:c.toString()),console.warn(" [DefinitionPreview] SCORE UPDATE:",{netVotes:c,oldScoreDisplay:y,newScoreDisplay:p})}},[u,h,g,p,s,b,a,d,c,i,o,r]}class ld extends Ie{constructor(t){super(),xe(this,t,ad,od,Ne,{definition:6,type:0,style:1,transform:2,word:7})}}function ud(e){let t,n=e[2]==="live"?"Live Definition":"Alternative Definition",r,i,o,s,l,a,u,h,g,d,c,p=e[0].text+"",w,b,v,y,N,x,S,I,M,L,X,C,F,$,re,O,k,T,D,P,W,j,Q,ne,_e,pe,we,me,ve,Te,Se,Fe,qt,Ve,nn,ze,xt,$e,De,ft,ct,ht,dt,Ze=(e[0].positiveVotes||0)+"",At,Ke,Pe,gt,_t,pt,mt,Qe=(e[0].negativeVotes||0)+"",kt,Me,Ue,rn,Ge,on,We,Dt,Je,Ce,vt,wt,Pt,it,Ct,Lt,Oe,ye,sn,$t=kr(e[0].createdBy,null,!1)+"",Z,fe,Rt,ot,Ee,En,Pn;return ot=new Vr({props:{mode:"collapse",y:e[18]}}),ot.$on("click",e[10]),{c(){t=A("text"),r=V(n),o=he(),s=A("g"),l=A("foreignObject"),a=J("div"),u=J("span"),h=V(e[1]),g=V(":"),d=he(),c=J("span"),w=V(p),v=he(),y=A("g"),N=A("text"),x=V(`Please vote on whether you agree with this definition 
            `),S=A("text"),I=V(`for this word within the context of ProjectZer0.
            `),M=A("text"),L=V("You can always change your vote using the buttons below."),X=he(),C=A("g"),F=A("foreignObject"),$=J("div"),re=J("button"),O=V("Agree"),k=he(),T=A("foreignObject"),D=J("div"),P=J("button"),W=V("No Vote"),j=he(),Q=A("foreignObject"),ne=J("div"),_e=J("button"),pe=V("Disagree"),we=he(),me=A("g"),ve=A("text"),Te=V(`Vote Data:
    `),Se=A("g"),Fe=A("text"),qt=V(e[8]),Ve=A("text"),nn=V(`=
        `),ze=A("text"),xt=V(e[4]),$e=A("g"),De=A("text"),ft=V(`Total Agree
        `),ct=A("text"),ht=V(`=
        `),dt=A("text"),At=V(Ze),Ke=A("g"),Pe=A("text"),gt=V(`Total Disagree
        `),_t=A("text"),pt=V(`=
        `),mt=A("text"),kt=V(Qe),Me=A("g"),Ue=A("text"),rn=V(`Net 
        `),Ge=A("text"),on=V(`=
        `),We=A("text"),Dt=V(e[5]),Je=A("g"),Ce=A("text"),vt=V(`Definition Status
        `),wt=A("text"),Pt=V(`=
        `),it=A("text"),Ct=V(e[6]),Lt=he(),Oe=A("g"),ye=A("text"),sn=V("defined by: "),Z=V($t),Rt=he(),se(ot.$$.fragment),this.h()},l(K){t=R(K,"text",{y:!0,class:!0});var oe=E(t);r=z(oe,n),oe.forEach(_),o=de(K),s=R(K,"g",{class:!0,transform:!0});var Zt=E(s);l=R(Zt,"foreignObject",{x:!0,width:!0,height:!0});var Nn=E(l);a=ee(Nn,"DIV",{class:!0});var an=E(a);u=ee(an,"SPAN",{class:!0});var In=E(u);h=z(In,e[1]),g=z(In,":"),In.forEach(_),d=de(an),c=ee(an,"SPAN",{class:!0});var xn=E(c);w=z(xn,p),xn.forEach(_),an.forEach(_),Nn.forEach(_),Zt.forEach(_),v=de(K),y=R(K,"g",{transform:!0});var ln=E(y);N=R(ln,"text",{x:!0,class:!0});var Cn=E(N);x=z(Cn,`Please vote on whether you agree with this definition 
            `),Cn.forEach(_),S=R(ln,"text",{x:!0,y:!0,class:!0});var Ln=E(S);I=z(Ln,`for this word within the context of ProjectZer0.
            `),Ln.forEach(_),M=R(ln,"text",{x:!0,y:!0,class:!0});var Fn=E(M);L=z(Fn,"You can always change your vote using the buttons below."),Fn.forEach(_),ln.forEach(_),X=de(K),C=R(K,"g",{transform:!0});var st=E(C);F=R(st,"foreignObject",{x:!0,width:!0,height:!0});var Vn=E(F);$=ee(Vn,"DIV",{class:!0});var Kt=E($);re=ee(Kt,"BUTTON",{class:!0});var zn=E(re);O=z(zn,"Agree"),zn.forEach(_),k=de(Kt),Kt.forEach(_),Vn.forEach(_),T=R(st,"foreignObject",{x:!0,width:!0,height:!0});var Un=E(T);D=ee(Un,"DIV",{class:!0});var An=E(D);P=ee(An,"BUTTON",{class:!0});var un=E(P);W=z(un,"No Vote"),un.forEach(_),j=de(An),An.forEach(_),Un.forEach(_),Q=R(st,"foreignObject",{x:!0,width:!0,height:!0});var Gn=E(Q);ne=ee(Gn,"DIV",{class:!0});var Wn=E(ne);_e=ee(Wn,"BUTTON",{class:!0});var Yn=E(_e);pe=z(Yn,"Disagree"),Yn.forEach(_),Wn.forEach(_),Gn.forEach(_),st.forEach(_),we=de(K),me=R(K,"g",{transform:!0});var at=E(me);ve=R(at,"text",{x:!0,class:!0});var Bn=E(ve);Te=z(Bn,`Vote Data:
    `),Bn.forEach(_),Se=R(at,"g",{transform:!0});var fn=E(Se);Fe=R(fn,"text",{x:!0,class:!0});var Xn=E(Fe);qt=z(Xn,e[8]),Xn.forEach(_),Ve=R(fn,"text",{x:!0,class:!0});var cn=E(Ve);nn=z(cn,`=
        `),cn.forEach(_),ze=R(fn,"text",{x:!0,class:!0});var Hn=E(ze);xt=z(Hn,e[4]),Hn.forEach(_),fn.forEach(_),$e=R(at,"g",{transform:!0});var hn=E($e);De=R(hn,"text",{x:!0,class:!0});var jn=E(De);ft=z(jn,`Total Agree
        `),jn.forEach(_),ct=R(hn,"text",{x:!0,class:!0});var dn=E(ct);ht=z(dn,`=
        `),dn.forEach(_),dt=R(hn,"text",{x:!0,class:!0});var qn=E(dt);At=z(qn,Ze),qn.forEach(_),hn.forEach(_),Ke=R(at,"g",{transform:!0});var gn=E(Ke);Pe=R(gn,"text",{x:!0,class:!0});var $n=E(Pe);gt=z($n,`Total Disagree
        `),$n.forEach(_),_t=R(gn,"text",{x:!0,class:!0});var Zn=E(_t);pt=z(Zn,`=
        `),Zn.forEach(_),mt=R(gn,"text",{x:!0,class:!0});var Rn=E(mt);kt=z(Rn,Qe),Rn.forEach(_),gn.forEach(_),Me=R(at,"g",{transform:!0});var cr=E(Me);Ue=R(cr,"text",{x:!0,class:!0});var di=E(Ue);rn=z(di,`Net 
        `),di.forEach(_),Ge=R(cr,"text",{x:!0,class:!0});var gi=E(Ge);on=z(gi,`=
        `),gi.forEach(_),We=R(cr,"text",{x:!0,class:!0});var _i=E(We);Dt=z(_i,e[5]),_i.forEach(_),cr.forEach(_),Je=R(at,"g",{transform:!0});var hr=E(Je);Ce=R(hr,"text",{x:!0,class:!0});var pi=E(Ce);vt=z(pi,`Definition Status
        `),pi.forEach(_),wt=R(hr,"text",{x:!0,class:!0});var mi=E(wt);Pt=z(mi,`=
        `),mi.forEach(_),it=R(hr,"text",{x:!0,class:!0});var vi=E(it);Ct=z(vi,e[6]),vi.forEach(_),hr.forEach(_),at.forEach(_),Lt=de(K),Oe=R(K,"g",{transform:!0});var wi=E(Oe);ye=R(wi,"text",{class:!0});var zr=E(ye);sn=z(zr,"defined by: "),Z=z(zr,$t),zr.forEach(_),wi.forEach(_),Rt=de(K),ae(ot.$$.fragment,K),this.h()},h(){f(t,"y",i=-e[18]+40),f(t,"class","title svelte-iygazu"),ie(t,"font-family",H.FONTS.title.family),ie(t,"font-size",H.FONTS.title.size),ie(t,"font-weight",H.FONTS.title.weight),f(u,"class","word-text"),f(c,"class","definition-text svelte-iygazu"),f(a,"class","definition-line"),f(l,"x",e[9].labelX),f(l,"width",Math.abs(e[9].labelX)*2),f(l,"height","100"),f(s,"class","definition-display"),f(s,"transform",b="translate(0, "+(-e[18]/2-40)+")"),f(N,"x",e[9].labelX),f(N,"class","context-text left-align svelte-iygazu"),f(S,"x",e[9].labelX),f(S,"y","25"),f(S,"class","context-text left-align svelte-iygazu"),f(M,"x",e[9].labelX),f(M,"y","60"),f(M,"class","context-text left-align svelte-iygazu"),f(y,"transform","translate(0, -100)"),f(re,"class","vote-button agree"),re.disabled=e[7],ge(re,"active",e[4]==="agree"),f($,"class","button-wrapper"),f(F,"x",-160),f(F,"width","100"),f(F,"height","45"),f(P,"class","vote-button no-vote"),P.disabled=e[7],ge(P,"active",e[4]==="none"),f(D,"class","button-wrapper"),f(T,"x",-50),f(T,"width","100"),f(T,"height","45"),f(_e,"class","vote-button disagree"),_e.disabled=e[7],ge(_e,"active",e[4]==="disagree"),f(ne,"class","button-wrapper"),f(Q,"x",60),f(Q,"width","100"),f(Q,"height","45"),f(C,"transform","translate(0, -10)"),f(ve,"x",e[9].labelX),f(ve,"class","stats-label left-align svelte-iygazu"),f(Fe,"x",e[9].labelX),f(Fe,"class","stats-text left-align svelte-iygazu"),f(Ve,"x",e[9].equalsX),f(Ve,"class","stats-text svelte-iygazu"),f(ze,"x",e[9].valueX),f(ze,"class","stats-value left-align svelte-iygazu"),f(Se,"transform","translate(0, 30)"),f(De,"x",e[9].labelX),f(De,"class","stats-text left-align svelte-iygazu"),f(ct,"x",e[9].equalsX),f(ct,"class","stats-text svelte-iygazu"),f(dt,"x",e[9].valueX),f(dt,"class","stats-value left-align svelte-iygazu"),f($e,"transform","translate(0, 55)"),f(Pe,"x",e[9].labelX),f(Pe,"class","stats-text left-align svelte-iygazu"),f(_t,"x",e[9].equalsX),f(_t,"class","stats-text svelte-iygazu"),f(mt,"x",e[9].valueX),f(mt,"class","stats-value left-align svelte-iygazu"),f(Ke,"transform","translate(0, 80)"),f(Ue,"x",e[9].labelX),f(Ue,"class","stats-text left-align svelte-iygazu"),f(Ge,"x",e[9].equalsX),f(Ge,"class","stats-text svelte-iygazu"),f(We,"x",e[9].valueX),f(We,"class","stats-value left-align svelte-iygazu"),f(Me,"transform","translate(0, 105)"),f(Ce,"x",e[9].labelX),f(Ce,"class","stats-text left-align svelte-iygazu"),f(wt,"x",e[9].equalsX),f(wt,"class","stats-text svelte-iygazu"),f(it,"x",e[9].valueX),f(it,"class","stats-value left-align svelte-iygazu"),f(Je,"transform","translate(0, 130)"),f(me,"transform","translate(0, 60)"),f(ye,"class","creator-label svelte-iygazu"),f(Oe,"transform",fe="translate(0, "+(e[18]-55)+")")},m(K,oe){U(K,t,oe),m(t,r),U(K,o,oe),U(K,s,oe),m(s,l),m(l,a),m(a,u),m(u,h),m(u,g),m(a,d),m(a,c),m(c,w),U(K,v,oe),U(K,y,oe),m(y,N),m(N,x),m(y,S),m(S,I),m(y,M),m(M,L),U(K,X,oe),U(K,C,oe),m(C,F),m(F,$),m($,re),m(re,O),m($,k),m(C,T),m(T,D),m(D,P),m(P,W),m(D,j),m(C,Q),m(Q,ne),m(ne,_e),m(_e,pe),U(K,we,oe),U(K,me,oe),m(me,ve),m(ve,Te),m(me,Se),m(Se,Fe),m(Fe,qt),m(Se,Ve),m(Ve,nn),m(Se,ze),m(ze,xt),m(me,$e),m($e,De),m(De,ft),m($e,ct),m(ct,ht),m($e,dt),m(dt,At),m(me,Ke),m(Ke,Pe),m(Pe,gt),m(Ke,_t),m(_t,pt),m(Ke,mt),m(mt,kt),m(me,Me),m(Me,Ue),m(Ue,rn),m(Me,Ge),m(Ge,on),m(Me,We),m(We,Dt),m(me,Je),m(Je,Ce),m(Ce,vt),m(Je,wt),m(wt,Pt),m(Je,it),m(it,Ct),U(K,Lt,oe),U(K,Oe,oe),m(Oe,ye),m(ye,sn),m(ye,Z),U(K,Rt,oe),le(ot,K,oe),Ee=!0,En||(Pn=[be(re,"click",e[13]),be(P,"click",e[14]),be(_e,"click",e[15])],En=!0)},p(K,oe){(!Ee||oe&4)&&n!==(n=K[2]==="live"?"Live Definition":"Alternative Definition")&&ce(r,n),(!Ee||oe&262144&&i!==(i=-K[18]+40))&&f(t,"y",i),(!Ee||oe&2)&&ce(h,K[1]),(!Ee||oe&1)&&p!==(p=K[0].text+"")&&ce(w,p),(!Ee||oe&262144&&b!==(b="translate(0, "+(-K[18]/2-40)+")"))&&f(s,"transform",b),(!Ee||oe&128)&&(re.disabled=K[7]),(!Ee||oe&16)&&ge(re,"active",K[4]==="agree"),(!Ee||oe&128)&&(P.disabled=K[7]),(!Ee||oe&16)&&ge(P,"active",K[4]==="none"),(!Ee||oe&128)&&(_e.disabled=K[7]),(!Ee||oe&16)&&ge(_e,"active",K[4]==="disagree"),(!Ee||oe&256)&&ce(qt,K[8]),(!Ee||oe&16)&&ce(xt,K[4]),(!Ee||oe&1)&&Ze!==(Ze=(K[0].positiveVotes||0)+"")&&ce(At,Ze),(!Ee||oe&1)&&Qe!==(Qe=(K[0].negativeVotes||0)+"")&&ce(kt,Qe),(!Ee||oe&32)&&ce(Dt,K[5]),(!Ee||oe&64)&&ce(Ct,K[6]),(!Ee||oe&1)&&$t!==($t=kr(K[0].createdBy,null,!1)+"")&&ce(Z,$t),(!Ee||oe&262144&&fe!==(fe="translate(0, "+(K[18]-55)+")"))&&f(Oe,"transform",fe);const Zt={};oe&262144&&(Zt.y=K[18]),ot.$set(Zt)},i(K){Ee||(Y(ot.$$.fragment,K),Ee=!0)},o(K){B(ot.$$.fragment,K),Ee=!1},d(K){K&&(_(t),_(o),_(s),_(v),_(y),_(X),_(C),_(we),_(me),_(Lt),_(Oe),_(Rt)),ue(ot,K),En=!1,jt(Pn)}}}function fd(e){let t,n;return t=new ur({props:{style:e[3],$$slots:{default:[ud,({radius:r})=>({18:r}),({radius:r})=>r?262144:0]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,[i]){const o={};i&8&&(o.style=r[3]),i&786935&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}const Po=3,cd=1e3;function Qt(e){return e&&typeof e=="object"&&"low"in e?Number(e.low):Number(e||0)}function hd(e,t,n){let r;Xt(e,yn,S=>n(12,r=S));let{data:i}=t,{word:o}=t,{type:s}=t,{style:l}=t;const a={labelX:-200,equalsX:0,valueX:30};let u="none",h=!1,g,d,c;const p=rt();function w(){p("modeChange",{mode:"preview"})}async function b(S=0){if(r)try{console.log("[DefinitionDetail] Fetching vote status for definition:",i.id);const I=await qe(`/definitions/${i.id}/vote`);if(!I)throw new Error("No response from vote status endpoint");console.log("[DefinitionDetail] Vote status response:",I),n(4,u=I.status||"none"),n(0,i.positiveVotes=Qt(I.positiveVotes),i),n(0,i.negativeVotes=Qt(I.negativeVotes),i),console.log("[DefinitionDetail] Updated vote status:",{userVoteStatus:u,positiveVotes:i.positiveVotes,negativeVotes:i.negativeVotes})}catch(I){console.error("[DefinitionDetail] Error fetching vote status:",I),S<Po&&(console.log(`[DefinitionDetail] Retrying vote status fetch (attempt ${S+1}/${Po})`),await new Promise(M=>setTimeout(M,cd)),await b(S+1))}}async function v(S){if(!r||h)return;n(7,h=!0);const I=u;try{if(console.log("[DefinitionDetail] Processing vote:",{definitionId:i.id,voteType:S,currentStatus:u}),n(4,u=S),S==="none"){const M=await qe(`/definitions/${i.id}/vote/remove`,{method:"POST"});n(0,i.positiveVotes=Qt(M.positiveVotes),i),n(0,i.negativeVotes=Qt(M.negativeVotes),i),console.log("[DefinitionDetail] Vote removed:",M)}else{const M=await qe(`/definitions/${i.id}/vote`,{method:"POST",body:JSON.stringify({isPositive:S==="agree"})});n(0,i.positiveVotes=Qt(M.positiveVotes),i),n(0,i.negativeVotes=Qt(M.negativeVotes),i),console.log("[DefinitionDetail] Vote recorded:",M)}}catch(M){console.error("[DefinitionDetail] Error processing vote:",M),n(4,u=I),await b()}finally{n(7,h=!1)}}tn(async()=>{console.log("[DefinitionDetail] Mounting with definition:",i),n(0,i.positiveVotes=Qt(i.positiveVotes),i),n(0,i.negativeVotes=Qt(i.negativeVotes),i),await b()});const y=()=>v("agree"),N=()=>v("none"),x=()=>v("disagree");return e.$$set=S=>{"data"in S&&n(0,i=S.data),"word"in S&&n(1,o=S.word),"type"in S&&n(2,s=S.type),"style"in S&&n(3,l=S.style)},e.$$.update=()=>{e.$$.dirty&4096&&n(8,g=(r==null?void 0:r.preferred_username)||(r==null?void 0:r.name)||"Anonymous"),e.$$.dirty&1&&n(5,d=(i.positiveVotes||0)-(i.negativeVotes||0)),e.$$.dirty&32&&n(6,c=d>0?"agreed":d<0?"disagreed":"undecided"),e.$$.dirty&113&&console.log("[DefinitionDetail] Vote state updated:",{userVoteStatus:u,netVotes:d,definitionStatus:c,positiveVotes:i.positiveVotes,negativeVotes:i.negativeVotes})},[i,o,s,l,u,d,c,h,g,a,w,v,r,y,N,x]}class dd extends Ie{constructor(t){super(),xe(this,t,hd,fd,Ne,{data:0,word:1,type:2,style:3})}}function gd(e){let t,n,r={nodes:e[0].nodes,links:e[0].links??[],isPreviewMode:e[8],$$slots:{node:[Rd,({node:i})=>({30:i}),({node:i})=>[i?1073741824:0]]},$$scope:{ctx:e}};return t=new xc({props:r}),e[25](t),t.$on("modeChange",e[26]),{c(){se(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,o){le(t,i,o),n=!0},p(i,o){const s={};o[0]&1&&(s.nodes=i[0].nodes),o[0]&1&&(s.links=i[0].links??[]),o[0]&256&&(s.isPreviewMode=i[8]),o[0]&1073741884|o[1]&1&&(s.$$scope={dirty:o,ctx:i}),t.$set(s)},i(i){n||(Y(t.$$.fragment,i),n=!0)},o(i){B(t.$$.fragment,i),n=!1},d(i){e[25](null),ue(t,i)}}}function _d(e){let t,n='<div class="loading-spinner svelte-1nfodeq"></div> <span class="loading-text svelte-1nfodeq">Loading...</span>';return{c(){t=J("div"),t.innerHTML=n,this.h()},l(r){t=ee(r,"DIV",{class:!0,"data-svelte-h":!0}),Et(t)!=="svelte-uhd5sy"&&(t.innerHTML=n),this.h()},h(){f(t,"class","loading-container svelte-1nfodeq")},m(r,i){U(r,t,i)},p:Re,i:Re,o:Re,d(r){r&&_(t)}}}function pd(e){let t,n,r,i,o;const s=[Ed,bd],l=[];function a(u,h){return h[0]&1073741856&&(t=null),t==null&&(t=u[5].get(u[30].id)==="detail"),t?0:1}return n=a(e,[-1,-1]),r=l[n]=s[n](e),{c(){r.c(),i=Ae()},l(u){r.l(u),i=Ae()},m(u,h){l[n].m(u,h),U(u,i,h),o=!0},p(u,h){let g=n;n=a(u,h),n===g?l[n].p(u,h):(et(),B(l[g],1,1,()=>{l[g]=null}),tt(),r=l[n],r?r.p(u,h):(r=l[n]=s[n](u),r.c()),Y(r,1),r.m(i.parentNode,i))},i(u){o||(Y(r),o=!0)},o(u){B(r),o=!1},d(u){u&&_(i),l[n].d(u)}}}function md(e){let t,n,r,i;const o=[Id,Nd],s=[];function l(a,u){return a[30].group==="central"?0:1}return t=l(e),n=s[t]=o[t](e),{c(){n.c(),r=Ae()},l(a){n.l(a),r=Ae()},m(a,u){s[t].m(a,u),U(a,r,u),i=!0},p(a,u){let h=t;t=l(a),t===h?s[t].p(a,u):(et(),B(s[h],1,1,()=>{s[h]=null}),tt(),n=s[t],n?n.p(a,u):(n=s[t]=o[t](a),n.c()),Y(n,1),n.m(r.parentNode,r))},i(a){i||(Y(n),i=!0)},o(a){B(n),i=!1},d(a){a&&_(r),s[t].d(a)}}}function vd(e){let t,n;return t=new kh({props:{node:e[30].data}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i[0]&1073741824&&(o.node=r[30].data),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function wd(e){let t,n;return t=new nh({props:{node:e[30].data}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i[0]&1073741824&&(o.node=r[30].data),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function yd(e){let t,n;return t=new Fc({props:{node:e[30].data,userActivity:e[4]}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i[0]&1073741824&&(o.node=r[30].data),i[0]&16&&(o.userActivity=r[4]),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function bd(e){let t,n;function r(...i){return e[24](e[30],...i)}return t=new ld({props:{word:e[2].word,definition:e[30].data,type:e[30].group==="live-definition"?"live":"alternative",style:e[30].group==="live-definition"?e[10]:e[11],transform:""}}),t.$on("modeChange",r),{c(){se(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,o){le(t,i,o),n=!0},p(i,o){e=i;const s={};o[0]&4&&(s.word=e[2].word),o[0]&1073741824&&(s.definition=e[30].data),o[0]&1073741824&&(s.type=e[30].group==="live-definition"?"live":"alternative"),o[0]&1073741824&&(s.style=e[30].group==="live-definition"?e[10]:e[11]),t.$set(s)},i(i){n||(Y(t.$$.fragment,i),n=!0)},o(i){B(t.$$.fragment,i),n=!1},d(i){ue(t,i)}}}function Ed(e){let t,n;function r(...i){return e[23](e[30],...i)}return t=new dd({props:{word:e[2].word,data:e[30].data,type:e[30].group==="live-definition"?"live":"alternative",style:e[30].group==="live-definition"?e[10]:e[11]}}),t.$on("modeChange",r),{c(){se(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,o){le(t,i,o),n=!0},p(i,o){e=i;const s={};o[0]&4&&(s.word=e[2].word),o[0]&1073741824&&(s.data=e[30].data),o[0]&1073741824&&(s.type=e[30].group==="live-definition"?"live":"alternative"),o[0]&1073741824&&(s.style=e[30].group==="live-definition"?e[10]:e[11]),t.$set(s)},i(i){n||(Y(t.$$.fragment,i),n=!0)},o(i){B(t.$$.fragment,i),n=!1},d(i){ue(t,i)}}}function Nd(e){let t,n;return t=new ps({props:{data:e[30].data,style:e[9],transform:""}}),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i[0]&1073741824&&(o.data=r[30].data),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function Id(e){let t,n,r,i;const o=[Ad,xd],s=[];function l(a,u){return a[3]==="preview"?0:1}return t=l(e),n=s[t]=o[t](e),{c(){n.c(),r=Ae()},l(a){n.l(a),r=Ae()},m(a,u){s[t].m(a,u),U(a,r,u),i=!0},p(a,u){let h=t;t=l(a),t===h?s[t].p(a,u):(et(),B(s[h],1,1,()=>{s[h]=null}),tt(),n=s[t],n?n.p(a,u):(n=s[t]=o[t](a),n.c()),Y(n,1),n.m(r.parentNode,r))},i(a){i||(Y(n),i=!0)},o(a){B(n),i=!1},d(a){a&&_(r),s[t].d(a)}}}function xd(e){let t,n;return t=new ed({props:{data:e[30].data,style:e[9]}}),t.$on("modeChange",e[12]),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i[0]&1073741824&&(o.data=r[30].data),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function Ad(e){let t,n;return t=new ps({props:{data:e[30].data,style:e[9],transform:""}}),t.$on("modeChange",e[12]),{c(){se(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){le(t,r,i),n=!0},p(r,i){const o={};i[0]&1073741824&&(o.data=r[30].data),t.$set(o)},i(r){n||(Y(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ue(t,r)}}}function Rd(e){let t,n,r,i,o,s,l,a,u;const h=[yd,wd,vd,md,pd],g=[];function d(c,p){return p[0]&1073741824&&(t=null),p[0]&1073741824&&(n=null),p[0]&1073741824&&(r=null),p[0]&1073741824&&(i=null),p[0]&1073741828&&(o=null),t==null&&(t=!!Zf(c[30])),t?0:(n==null&&(n=!!Kf(c[30])),n?1:(r==null&&(r=!!Qf(c[30])),r?2:(i==null&&(i=!!ec(c[30])),i?3:(o==null&&(o=!!(tc(c[30])&&c[2])),o?4:-1))))}return~(s=d(e,[-1,-1]))&&(l=g[s]=h[s](e)),{c(){l&&l.c(),a=Ae()},l(c){l&&l.l(c),a=Ae()},m(c,p){~s&&g[s].m(c,p),U(c,a,p),u=!0},p(c,p){let w=s;s=d(c,p),s===w?~s&&g[s].p(c,p):(l&&(et(),B(g[w],1,1,()=>{g[w]=null}),tt()),~s?(l=g[s],l?l.p(c,p):(l=g[s]=h[s](c),l.c()),Y(l,1),l.m(a.parentNode,a)):l=null)},i(c){u||(Y(l),u=!0)},o(c){B(l),u=!1},d(c){c&&_(a),~s&&g[s].d(c)}}}function Sd(e){let t,n,r,i;const o=[_d,gd],s=[];function l(a,u){return a[7]?a[1]?1:-1:0}return~(t=l(e))&&(n=s[t]=o[t](e)),{c(){n&&n.c(),r=Ae()},l(a){n&&n.l(a),r=Ae()},m(a,u){~t&&s[t].m(a,u),U(a,r,u),i=!0},p(a,u){let h=t;t=l(a),t===h?~t&&s[t].p(a,u):(n&&(et(),B(s[h],1,1,()=>{s[h]=null}),tt()),~t?(n=s[t],n?n.p(a,u):(n=s[t]=o[t](a),n.c()),Y(n,1),n.m(r.parentNode,r)):n=null)},i(a){i||(Y(n),i=!0)},o(a){B(n),i=!1},d(a){a&&_(r),~t&&s[t].d(a)}}}function Td(e,t,n){let r,i,o,s,l,a,u,h,g,d,c,p,w;Xt(e,yn,k=>n(20,c=k)),Xt(e,On,k=>n(21,p=k)),Xt(e,Ns,k=>n(22,w=k));let{data:b}=t,v,y=!0,N=new Map,x;const S={previewSize:H.SIZES.WORD.preview,detailSize:H.SIZES.WORD.detail,colors:H.COLORS.WORD,padding:H.PADDING,lineHeight:H.LINE_HEIGHT,stroke:H.STROKE,highlightColor:G.PRIMARY.BLUE},I={previewSize:H.SIZES.DEFINITION.live.preview,detailSize:H.SIZES.DEFINITION.live.detail,colors:H.COLORS.DEFINITION.live,padding:H.PADDING,lineHeight:H.LINE_HEIGHT,stroke:H.STROKE,highlightColor:G.PRIMARY.BLUE},M={previewSize:H.SIZES.DEFINITION.alternative.preview,detailSize:H.SIZES.DEFINITION.alternative.detail,colors:H.COLORS.DEFINITION.alternative,padding:H.PADDING,lineHeight:H.LINE_HEIGHT,stroke:H.STROKE,highlightColor:G.PRIMARY.PURPLE};function L(k){console.log("Page: Received modeChange event",k.detail);const T=r;n(3,r=k.detail.mode),console.log("Word node mode transition:",{from:T,to:r,view:o,isWordView:s})}function X(k,T){console.log("Definition mode change triggered:",{nodeId:T,newMode:k.detail.mode,currentLayout:x?"exists":"null"}),N.set(T,k.detail.mode),n(5,N=new Map(N))}async function C(){console.log("Starting initializeData:",{data:b,currentUrl:window.location.href,view:o,isWordView:s});try{await xs();const k=await As();if(!k){console.log("No user found, redirecting to login"),Ni();return}if(yn.set(k),n(4,v=await Cs()),b!=null&&b.wordData&&s)console.log("Setting word data from server load:",b.wordData),On.set(b.wordData);else if(s){const T=new URL(window.location.href),D=T.searchParams.get("word");if(console.log("Checking URL for word param:",{wordParam:D,url:T.toString()}),D){console.log("Loading word data from URL param:",D);const P=await Rs(D);P&&(console.log("Word data loaded from URL:",P),On.set(P))}}}catch(k){console.error("Error in initializeData:",k),Ni()}finally{console.log("Setting isLoading to false",{view:o,isWordView:s,hasWordData:!!p}),n(15,y=!1)}}tn(C);const F=(k,T)=>X(T,k.id),$=(k,T)=>X(T,k.id);function re(k){Xe[k?"unshift":"push"](()=>{x=k,n(6,x)})}function O(k){tr.call(this,e,k)}return e.$$set=k=>{"data"in k&&n(14,b=k.data)},e.$$.update=()=>{e.$$.dirty[0]&4194304&&n(3,r=w&&w.params.view==="word"?"detail":"preview"),e.$$.dirty[0]&4194304&&n(16,o=w.params.view),e.$$.dirty[0]&65544&&n(8,i=o==="alternative-definitions"||o==="word"?r==="preview":!1),e.$$.dirty[0]&65536&&n(19,s=o==="word"||o==="alternative-definitions"),e.$$.dirty[0]&2621440&&n(2,l=s?p:null),e.$$.dirty[0]&3702784&&n(7,a=!y&&c&&(!s||s&&!!p)),e.$$.dirty[0]&1638404&&n(1,u=s&&l?{id:l.id,type:"word",data:l,group:"central"}:c?{id:c.sub,type:o,data:c,group:"central"}:null),e.$$.dirty[0]&589824&&n(18,h=o==="dashboard"?zt.DASHBOARD:o==="create-node"?zt.CREATE_NODE:s?zt.WORD:zt.EDIT_PROFILE),e.$$.dirty[0]&262144&&n(17,g=ac(h).map(k=>({id:k.id,type:"navigation",data:k,group:"navigation"}))),e.$$.dirty[0]&196614&&n(0,d=u?(()=>{const k=[u,...g];if(l&&l.definitions.length>0){const T=[...l.definitions].sort((D,P)=>mr(P)-mr(D));if(o==="alternative-definitions"){const D=T.map((W,j)=>({id:W.id,type:"definition",data:W,group:j===0?"live-definition":"alternative-definition"})),P=T.map((W,j)=>({source:u.id,target:W.id,type:j===0?"live":"alternative",value:1+Math.abs(mr(W))}));return{nodes:[...k,...D],links:P}}else if(o==="word"){const D=T[0],P={id:D.id,type:"definition",data:D,group:"live-definition"},W={source:u.id,target:D.id,type:"live",value:1+Math.abs(mr(D))};return{nodes:[...k,P],links:[W]}}}return{nodes:k,links:[]}})():{nodes:[],links:[]}),e.$$.dirty[0]&1&&d.nodes,e.$$.dirty[0]&1&&d.links},[d,u,l,r,v,N,x,a,i,S,I,M,L,X,b,y,o,g,h,s,c,p,w,F,$,re,O]}class zd extends Ie{constructor(t){super(),xe(this,t,Td,Sd,Ne,{data:14},null,[-1,-1])}}export{zd as component};
